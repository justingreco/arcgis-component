import { e, d as d$1, n as n$1, s as s$2, a as s$3, t, r, h as e$1, m as m$1 } from './cast-3d5be210.js';
import { s as s$1 } from './Identifiable-d9658370.js';
import { l } from './JSONSupport-dce2c67b.js';
import { g as g$1 } from './Graphic-93f45ded.js';
import { v as v$1 } from './Polyline-dcdb3782.js';
import { n as n$2, l as l$1, u, a as n$3, c as c$3, d as d$2 } from './suggestLocations-94082560.js';
import './geometry-2f332a26.js';
import { c as c$2 } from './scaleUtils-c3d4b164.js';
import { M } from './Extent-f27111e1.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
let p$3=class extends(s$1(l)){constructor(t){super(t),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null;}};e([d$1()],p$3.prototype,"autoNavigate",void 0),e([d$1()],p$3.prototype,"filter",void 0),e([d$1()],p$3.prototype,"getResults",void 0),e([d$1()],p$3.prototype,"getSuggestions",void 0),e([d$1()],p$3.prototype,"maxResults",void 0),e([d$1()],p$3.prototype,"maxSuggestions",void 0),e([d$1()],p$3.prototype,"minSuggestCharacters",void 0),e([d$1()],p$3.prototype,"outFields",void 0),e([d$1()],p$3.prototype,"placeholder",void 0),e([d$1()],p$3.prototype,"popupEnabled",void 0),e([d$1()],p$3.prototype,"popupTemplate",void 0),e([d$1()],p$3.prototype,"prefix",void 0),e([d$1()],p$3.prototype,"resultGraphicEnabled",void 0),e([d$1()],p$3.prototype,"resultSymbol",void 0),e([d$1()],p$3.prototype,"suggestionsEnabled",void 0),e([d$1()],p$3.prototype,"suffix",void 0),e([d$1()],p$3.prototype,"withinViewEnabled",void 0),e([d$1()],p$3.prototype,"zoomScale",void 0),p$3=e([n$1("esri.widgets.Search.SearchSource")],p$3);const i=p$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const o=s$2.getLogger("esri.widgets.Search.support.geometryUtils");function s(r,t){if(!t)return o.error("missing-parameter: view is missing."),Promise.reject(new s$3("searchgeometryutils:missing-parameter","view is missing."));if(!r)return o.error("missing-parameter: point is missing."),Promise.reject(new s$3("searchgeometryutils:missing-parameter","point is missing."));if(r.hasZ||"2d"===t.type)return Promise.resolve(r);const n=t?.map?.ground;return n&&n.layers.length?n.queryElevation(r,{cache:t.basemapTerrain?.elevationQueryCache}).then((e=>e.geometry)):Promise.resolve(r)}function m(e){if(t(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function a$1(e,r,n){return t(e)?null:"extent"===e.type?e:"multipoint"===e.type||"polygon"===e.type||"polyline"===e.type?e.extent:"point"===e.type?c$1(e,r,n):void 0}function p$2(e,r,n){return t(e)||t(r)?null:c$1(e.center,r,n)}function c$1(e,r,t){const o=e.hasZ?e.z:void 0;if(r&&r.map){return (t?c$2(r,t):r.extent).clone().centerAt(e).set({zmax:o,zmin:o})}return new M({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:o,zmax:o})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const f="Single Line Input",d=3e5;function g(e,o){return e.location?h(e,o):I(e,o)}function p$1(e,o){if(o.localSearchDisabled)return null;const t=e?.scale;return "number"==typeof t&&t<=d?e.get("extent.center"):null}function y(e,t){const{source:r,spatialReference:s,view:n,suggestTerm:c,maxSuggestions:a,sourceIndex:l}=e,m=new l$1,{apiKey:f,url:d}=r,g=j(r,n),y=t&&t.signal;if(!d)return Promise.resolve(null);f&&(m.apiKey=f),r.categories&&(m.categories=r.categories),s&&(m.outSpatialReference=s);const x=p$1(n,r);x&&(m.location=x);if(!c.trim())return Promise.resolve(null);const{prefix:v="",suffix:S=""}=r,w=`${v}${c}${S}`;return m.text=w,g&&(m.searchExtent=e$1(g)),m.maxSuggestions=a,r.countryCode&&(m.countryCode=r.countryCode),u(d,m,{signal:y}).then((e=>b(e,l)))}function x(e){return !!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}function v(e){return !!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e)}function S(e){return !!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}const w="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";function h(e,o){const{source:t,spatialReference:r,location:s,sourceIndex:i,view:c}=e,{apiKey:u,url:l,zoomScale:m,defaultZoomScale:f}=t,d=c&&c.scale,g=o&&o.signal,p=new n$3;return p.location=s,u&&(p.apiKey=u),r&&(p.outSpatialReference=r),n$2(l,p,{signal:g}).then((e=>L([e],{sourceIndex:i,scale:d,view:c,zoomScale:m,defaultZoomScale:f}))).catch((()=>[]))}function j(e,o){const{filter:t,withinViewEnabled:r}=e,s=o&&o.scale,n=o&&o.extent,i=t&&t.geometry;return a$1(i,o,s)||(r&&n?n:void 0)}function I(e,t){const{source:r,suggestResult:n,spatialReference:i,view:a,maxResults:u,sourceIndex:l}=e,m=r&&r.zoomScale,d=r&&r.defaultZoomScale;if(!n.text.trim())return Promise.resolve(null);const g=!n.key&&r.prefix?r.prefix:"",y=!n.key&&r.suffix?r.suffix:"",x=`${g}${n.text}${y}`,v=new c$3,{apiKey:S,url:w}=r,h=a&&a.scale,I=j(r,a),$=t&&t.signal;if(S&&(v.apiKey=S),!w)return Promise.resolve(null);r.categories&&(v.categories=r.categories),r.locationType&&(v.locationType=r.locationType),i&&(v.outSpatialReference=i);const b=p$1(a,r);b&&(v.location=b),v.maxLocations=u,I&&(v.searchExtent=e$1(I)),r.countryCode&&(v.countryCode=r.countryCode);const{key:K}=n,P=`${K}`;return K&&(v.magicKey=P),v.address={},v.address[r.singleLineFieldName||f]=x,r.outFields&&(v.outFields=r.outFields),d$2(w,v,{signal:$}).then((e=>L(e,{key:P,scale:h,sourceIndex:l,view:a,zoomScale:m,defaultZoomScale:d})))}function $(e,o){return {text:e.text,key:e.magicKey,sourceIndex:o}}function b(e,o){return e.map((e=>$(e,o)))}function K(o,s){const{key:n,scale:i,sourceIndex:c,view:a,zoomScale:u,defaultZoomScale:f}=s,{attributes:d,extent:g,location:p,address:y}=o,x=new g$1({geometry:p,attributes:d}),v=g||p,S=a$1(v,a,i),w="number"==typeof u?p$2(S,a,u):"number"==typeof f&&"point"===v.type?p$2(S,a,f):S,h=p?`${p.x},${p.y}`:"",j=y||h,I=x.clone();return r(w)&&(I.geometry=v$1.fromExtent(w)),{extent:w,feature:x,target:I,key:n,name:j,sourceIndex:c}}function L(e,o){return e.filter(Boolean).map((e=>K(e,o)))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
var a;const p="esri.widgets.Search.LocatorSearchSource";let n=a=class extends i{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,t)=>g({source:this,...e},t),this.getSuggestions=(e,t)=>y({source:this,...e},t);}clone(){return new a({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?m$1(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?m$1(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};e([d$1()],n.prototype,"apiKey",void 0),e([d$1()],n.prototype,"categories",void 0),e([d$1()],n.prototype,"countryCode",void 0),e([d$1({json:{write:!0}})],n.prototype,"defaultZoomScale",void 0),e([d$1()],n.prototype,"localSearchDisabled",void 0),e([d$1()],n.prototype,"locationType",void 0),e([d$1({json:{write:!0}})],n.prototype,"name",void 0),e([d$1({json:{write:!0}})],n.prototype,"placeholder",void 0),e([d$1()],n.prototype,"searchTemplate",void 0),e([d$1({json:{write:!0}})],n.prototype,"singleLineFieldName",void 0),e([d$1({json:{read:{source:"suggest"},write:{target:"suggest"}}})],n.prototype,"suggestionsEnabled",void 0),e([d$1({json:{write:!0}})],n.prototype,"url",void 0),e([d$1({json:{write:!0}})],n.prototype,"zoomScale",void 0),n=a=e([n$1(p)],n);const c=n;

const LocatorSearchSource = /*#__PURE__*/Object.freeze({
	__proto__: null,
	'default': c
});

export { LocatorSearchSource as L, S, a$1 as a, c, i, m, p$2 as p, s, v, w, x };
