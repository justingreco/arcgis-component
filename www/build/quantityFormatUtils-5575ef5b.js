import { c as ce, N, z as z$2 } from './unitUtils-a0a11e54.js';
import './geometry-2f332a26.js';
import { a as s, ag as c$1 } from './cast-3d5be210.js';
import { m as d$2, p as t$1, w as i$1 } from './projection-fbd5d346.js';
import { h as o, k as k$1, E, j as j$2 } from './Point-edff2a11.js';
import { m as m$2, v as v$1 } from './Polyline-dcdb3782.js';
import { x as x$1 } from './screenUtils-31d073db.js';
import { o as o$2, v as v$2 } from './vec2-4f9a494f.js';
import { a as o$1, u as u$1, q as q$1 } from './mathUtils-559a53d9.js';
import { b as v$3 } from './Segment-ff1a2d80.js';
import { l, p as p$2, D as D$1, F as F$1, x as x$2, h, $, y as y$2, d as d$3, j as j$3, B, M as M$2, S as S$1, w as w$2, I as I$1 } from './Feature-d7b2670c.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const r={readOnly:!0,get(){return ce(this.view)}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
var e;!function(e){e[e.Auto=0]="Auto",e[e.Euclidean=1]="Euclidean",e[e.Geodesic=2]="Geodesic";}(e||(e={}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
function f$1(e){if(!e)return null;if(o(e)&&e.wkid){const t=d$2[e.wkid];if(t)return t}if(e.wkt){const t=p$1(e.wkt);if(t)return t}return null}function p$1(e){const t=t$1.exec(e);if(!t||2!==t.length)return null;const n=t[1].split(",");if(!n||n.length<3)return null;const s=parseFloat(n[1]),a=parseFloat(n[2]);if(isNaN(s)||isNaN(a))return null;return {a:s,f:0===a?0:1/a}}function u(e){const t=f$1(e||k$1.WGS84);if(d$1(t))return t;const n=t.a*(1-t.f);return Object.assign(t,{b:n,eSq:1-(n/t.a)**2,radius:(2*t.a+n)/3,densificationRatio:1e4/((2*t.a+n)/3)})}function d$1(e){return "b"in e&&"eSq"in e&&"radius"in e}function m$1(e){return e<0?e+360:e}function g$1(e,t,n){const{a:i,eSq:a}=u(n),r=Math.sqrt(a),o=Math.sin(t[1]*i$1),c=i*t[0]*i$1;let l;if(a>0){l=i*((1-a)*(o/(1-a*(o*o))-1/(2*r)*Math.log((1-r*o)/(1+r*o))))*.5;}else l=i*o;return e[0]=c,e[1]=l,e}function M$1(e){return null!==f$1(e)}function w$1(n,i="square-meters"){if(n.some((e=>!M$1(e.spatialReference))))throw new s("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const s$1=[];for(let e=0;e<n.length;e++){const t=n[e],i=t.spatialReference,{radius:a,densificationRatio:r}=u(i),o=a*r;s$1.push(R$1(t,o));}const a=[],r=[0,0],o=[0,0];for(let e=0;e<s$1.length;e++){const{rings:n,spatialReference:c}=s$1[e];let l=0;for(let e=0;e<n.length;e++){const t=n[e];g$1(r,t[0],c),g$1(o,t[t.length-1],c);let i=o[0]*r[1]-r[0]*o[1];for(let e=0;e<t.length-1;e++)g$1(r,t[e+1],c),g$1(o,t[e],c),i+=o[0]*r[1]-r[0]*o[1];l+=i;}l=N(l,"square-meters",i),a.push(l/-2);}return a}function y$1(n,i="meters"){if(!n)throw new s("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(n.some((e=>!M$1(e.spatialReference))))throw new s("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const s$1=[];for(let e=0;e<n.length;e++){const a=n[e],{spatialReference:r}=a,o="polyline"===a.type?a.paths:a.rings;let c=0;for(let e=0;e<o.length;e++){const t=o[e];let n=0;for(let e=1;e<t.length;e++){const i=t[e-1][0],s=t[e][0],a=t[e-1][1],o=t[e][1];if(a!==o||i!==s){const e={distance:null};z$1(e,[i,a],[s,o],r),n+=e.distance;}}c+=n;}c=N(c,"meters",i),s$1.push(c);}return s$1}function R$1(t,n){if("polyline"!==t.type&&"polygon"!==t.type)throw new s("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=t;if(!M$1(i))throw new s("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const s$1="polyline"===t.type?t.paths:t.rings,a=[],r=[0,0],l={distance:null};for(const e of s$1){const t=[];a.push(t),t.push([e[0][0],e[0][1]]);let s,o,c=e[0][0],h=e[0][1];for(let a=0;a<e.length-1;a++){if(s=e[a+1][0],o=e[a+1][1],c===s&&h===o)continue;const f=[c,h];z$1(l,[c,h],[s,o],i);const{azimuth:p,distance:u}=l,d=u/n;if(d>1){for(let e=1;e<=d-1;e++){v(r,f,p,e*n,i),t.push(r.slice(0));}v(r,f,p,(u+Math.floor(d-1)*n)/2,i),t.push(r.slice(0));}v(r,f,p,u,i),t.push(r.slice(0)),c=r[0],h=r[1];}}return "polyline"===t.type?new m$2({paths:a,spatialReference:i}):new v$1({rings:a,spatialReference:i})}function v(e,t,n,i,a){const r=t[0],o=t[1],c=r*i$1,l=o*i$1,h=n*i$1,{a:f,b:p,f:d}=u(a),m=Math.sin(h),g=Math.cos(h),M=(1-d)*Math.tan(l),w=1/Math.sqrt(1+M*M),y=M*w,R=Math.atan2(M,g),v=w*m,z=v*v,b=1-z,j=b*(f*f-p*p)/(p*p),q=1+j/16384*(4096+j*(j*(320-175*j)-768)),x=j/1024*(256+j*(j*(74-47*j)-128));let A,N,S,k,P=i/(p*q),F=2*Math.PI;for(;Math.abs(P-F)>1e-12;)S=Math.cos(2*R+P),A=Math.sin(P),N=Math.cos(P),k=x*A*(S+x/4*(N*(2*S*S-1)-x/6*S*(4*A*A-3)*(4*S*S-3))),F=P,P=i/(p*q)+k;const U=y*A-w*N*g,C=Math.atan2(y*N+w*A*g,(1-d)*Math.sqrt(z+U*U)),E=Math.atan2(A*m,w*N-y*A*g),G=d/16*b*(4+d*(4-3*b)),I=C/i$1,O=(c+(E-(1-G)*d*v*(P+G*A*(S+G*N*(2*S*S-1)))))/i$1;return e[0]=O,e[1]=I,e}function z$1(e,t,n,i){const a=t[0]*i$1,r=t[1]*i$1,o=n[0]*i$1,c=n[1]*i$1,{a:l,b:h,f,radius:p}=u(i),d=o-a,m=Math.atan((1-f)*Math.tan(r)),g=Math.atan((1-f)*Math.tan(c)),M=Math.sin(m),w=Math.cos(m),y=Math.sin(g),R=Math.cos(g);let v,z,b,j,q,x,A,N,S,k,P=1e3,F=d;do{if(A=Math.sin(F),N=Math.cos(F),b=Math.sqrt(R*A*(R*A)+(w*y-M*R*N)*(w*y-M*R*N)),0===b)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;q=M*y+w*R*N,x=Math.atan2(b,q),S=w*R*A/b,z=1-S*S,j=q-2*M*y/z,isNaN(j)&&(j=0),k=f/16*z*(4+f*(4-3*z)),v=F,F=d+(1-k)*f*S*(x+k*b*(j+k*q*(2*j*j-1)));}while(Math.abs(F-v)>1e-12&&--P>0);if(0===P){const t=p,n=Math.acos(Math.sin(r)*Math.sin(c)+Math.cos(r)*Math.cos(c)*Math.cos(o-a))*t,i=o-a,l=Math.sin(i)*Math.cos(c),h=Math.cos(r)*Math.sin(c)-Math.sin(r)*Math.cos(c)*Math.cos(i),f=Math.atan2(l,h);return e.azimuth=f/i$1,e.distance=n,e.reverseAzimuth=void 0,e}const U=z*(l*l-h*h)/(h*h),C=U/1024*(256+U*(U*(74-47*U)-128)),E=h*(1+U/16384*(4096+U*(U*(320-175*U)-768)))*(x-C*b*(j+C/4*(q*(2*j*j-1)-C/6*j*(4*b*b-3)*(4*j*j-3)))),G=Math.atan2(R*Math.sin(F),w*y-M*R*Math.cos(F)),I=Math.atan2(w*Math.sin(F),w*y*Math.cos(F)-M*R);return e.azimuth=G/i$1,e.distance=E,e.reverseAzimuth=I/i$1,e}function b(n,i,s$1="meters"){if(!n||!i)throw new s("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!n.spatialReference||!i.spatialReference)throw new s("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");if(!E(n.spatialReference,i.spatialReference))throw new s("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");const{spatialReference:a}=n;if(!M$1(a))throw new s("geodesic-distance:not-supported","input geometry spatial reference is not supported");if(n.x===i.x&&n.y===i.y)return {distance:0,azimuth:0,reverseAzimuth:0};const o={distance:null};return z$1(o,[n.x,n.y],[i.x,i.y],a),o.distance=N(o.distance,"meters",s$1),o.azimuth=m$1(o.azimuth),o.reverseAzimuth=m$1(o.reverseAzimuth),o}function j$1(t,n,i){if(!t||null==n||null==i)throw new s("point-from-distance:missing-parameters","one or more input parameters are missing or undefined");if(i<0||i>360)throw new s("point-from-distance:-of-bounds","azimuth is restricted to angles between, and including, 0° to 360° degrees");if(!t.spatialReference)throw new s("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");const{spatialReference:s$1}=t;if(!M$1(s$1))throw new s("geodesic-distance:not-supported","input geometry spatial reference is not supported");const a=[0,0];return v(a,[t.x,t.y],i,n,s$1),new j$2({x:a[0],y:a[1],spatialReference:s$1})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
function c(e,o){if(o$1(o,0,0,0),e.length>0){for(let r=0;r<e.length;++r)u$1(o,o,e[r]);q$1(o,o,1/e.length);}}function i(e,n,s,t){t.projectToRenderScreen(e,f),t.projectToRenderScreen(n,m),o$2(s,p,a),v$2(s,s);}const f=x$1(),a=f,m=x$1(),p=m;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
class t{constructor(e=null){this.spatialReference=e;}get spatialReference(){return this._spatialReference}set spatialReference(e){e!==this._spatialReference&&(this._spatialReference=e,this._updateNormalizationFactors());}normalizeDistance(e){return e*this._metersPerDistanceUnit}normalizeElevation(e){return e*this._metersPerElevationUnit}normalizeArea(e){return e*this._squareMetersPerAreaUnit}_updateNormalizationFactors(){this._metersPerDistanceUnit=z$2(this._spatialReference,1),this._metersPerElevationUnit=z$2(this._spatialReference,1),this._squareMetersPerAreaUnit=this._metersPerDistanceUnit*this._metersPerDistanceUnit;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
function g(t,a,n,u=2,i="abbr"){return l(t,v$3(a,n).value,n,u,i)}function L(t,e,n,u=2,i="abbr"){return p$2(t,v$3(e,n).value,n,u,i)}function M(t,r,e=2,a="abbr"){return D$1(t,r.value,r.unit,e,a)}function d(t,r,e=2,a="abbr"){return F$1(t,r.value,r.unit,e,a)}function w(t,r,e=2,a="abbr"){return x$2(t,r.value,r.unit,e,a)}function I(t,r,e=2,a="abbr"){return h(t,r.value,r.unit,e,a)}function R(t,r,e=2,a="abbr"){return $(t,r.value,r.unit,e,a)}function y(t,r,e=2,a="abbr"){return y$2(t,r.value,r.unit,e,a)}function V(t,r,e=2,a="abbr"){return d$3(t,r.value,r.unit,e,a)}function j(t,r,e=2,a="abbr"){return j$3(t,r.value,r.unit,e,a)}function D(t,r,e=2,a="abbr"){return B(t,r.value,r.unit,e,a)}function A(t,r,e=2,a="abbr"){return M$2(t,r.value,r.unit,e,a)}function T(t){return S$1(t.value,t.unit)}function U(t,r,e){return w$2(t.value,t.unit,t.rotationType,r,e)}function q(t,r,e){return I$1(t.value,t.unit,t.rotationType,r,e)}function x(r,e,a,n,u="abbr"){switch(n=c$1(n,2),a){case"imperial":return y(r,e,n,u);case"metric":return M(r,e,n,u);default:return g(r,e,a,n,u)}}function F(t,r,e,a=2,n="abbr"){switch(e){case"imperial":return V(t,r,a,n);case"metric":return d(t,r,a,n);default:return L(t,r,e,a,n)}}function S(t,r,e,a=2,n="abbr"){switch(e){case"imperial":return j(t,r,a,n);case"metric":return w(t,r,a,n);default:return g(t,r,e,a,n)}}function k(t,r,e,a=2,n="abbr"){switch(e){case"imperial":return D(t,r,a,n);case"metric":return I(t,r,a,n);default:return L(t,r,e,a,n)}}function z(t,r,e,a=2,n="abbr"){switch(e){case"imperial":return A(t,r,a,n);case"metric":return R(t,r,a,n);default:return g(t,r,e,a,n)}}

export { M$1 as M, y as a, M as b, c, e, g, i, j, r, t, w, y$1 as y, z$1 as z };
