import { ag as c$9, j as r$1, s as s$3, t, r as r$2, y as y$8, a as s$4, e as e$5, d as d$5, I as s$5, n as n$4, E as E$4, i as i$4, J as g$7 } from './cast-3d5be210.js';
import { s as s$7 } from './intl-54ccdc89.js';
import { l as l$6, h as h$5, a as a$4 } from './reactiveUtils-bd6fe823.js';
import { o as o$5 } from './aliasOf-bdfe6662.js';
import { O as O$1, n as n$5, v as v$3, h as h$6, f as f$4, e as e$6 } from './jsxFactory-4cd653a4.js';
import { o as o$3 } from './byteSizeEstimations-5d50d6ff.js';
import { s as s$2 } from './Cyclical-922b1741.js';
import { o as o$4 } from './mathUtils-559a53d9.js';
import { b as R$2, N as N$1, J as J$2, K as K$2, A as A$3, T as T$3, Y as Y$1 } from './unitUtils-a0a11e54.js';
import { m as m$5, S as S$3, u as u$6, L as L$2 } from './number-c5a37d3e.js';
import { g as g$6 } from './Graphic-93f45ded.js';
import { j as j$4 } from './Collection-a38e0489.js';
import { l as l$5, s as s$6 } from './executeQueryJSON-cbafa4d9.js';
import { c as c$a, d as d$6 } from './TopFeaturesQuery-babc7c57.js';
import { d as ye, a as a$2, e as de$1, B as B$4 } from './fieldUtils-240a3b99.js';
import { u as u$5, d as i$2, a as c$b, e as i$3, I as I$5, f as c$c, b as c$d, g as i$5 } from './PopupTemplate-b459951f.js';
import { a as a$3 } from './assets-99f5c3ee.js';
import { n as n$6, h as h$7 } from './utils-112c7fa0.js';
import { a as a$5 } from './HandleOwner-fe336959.js';
import { e as e$7, t as t$1 } from './widget-a58988b6.js';
import { U as U$2 } from './request-ac4d8bfb.js';
import { b as b$5, m as m$6 } from './Query-1f6c7e43.js';
import './Point-edff2a11.js';
import './featureConversionUtils-3f60eb15.js';
import './Extent-f27111e1.js';
import './Polyline-dcdb3782.js';
import './normalizeUtils-d37dc597.js';
import './pbf-bac0c6a4.js';
import './FeatureSet-1b85367a.js';
import './geometry-2f332a26.js';
import { l as l$7 } from './Promise-d2759b2e.js';
import { r as r$3 } from './themeUtils-b1f4a2e4.js';
import { M as Me } from './languageUtils-d37e9fbb.js';
import { K as Ke } from './FeatureLayer-6922c890.js';
import { u as u$7 } from './Handles-54afc0a7.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
function g$5(t,n,i){return t.units[n][i]}function l$4(t,n,i,r=2,o="abbr"){return `${m$5(n,{minimumFractionDigits:r,maximumFractionDigits:r})} ${g$5(t,i,o)}`}function p$8(t,n,i,r=2,o="abbr"){return `${m$5(n,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${g$5(t,i,o)}`}function D$2(t,n,i,r=2,o="abbr"){const c=R$2(n,i);return l$4(t,N$1(n,i,c),c,r,o)}function F$3(t,n,i,r=2,o="abbr"){const c=R$2(n,i);return p$8(t,N$1(n,i,c),c,r,o)}function x$2(t,n,i,r=2,o="abbr"){const e=J$2(n,i);return l$4(t,N$1(n,i,e),e,r,o)}function h$4(t,n,i,r=2,o="abbr"){const e=J$2(n,i);return p$8(t,N$1(n,i,e),e,r,o)}function y$7(t,n,i,r=2,o="abbr"){const e=K$2(n,i);return l$4(t,N$1(n,i,e),e,r,o)}function d$4(t,n,i,r=2,o="abbr"){const e=K$2(n,i);return p$8(t,N$1(n,i,e),e,r,o)}function j$3(t,n,i,r=2,o="abbr"){const e=A$3(n,i);return l$4(t,N$1(n,i,e),e,r,o)}function B$3(t,n,i,r=2,o="abbr"){const e=A$3(n,i);return p$8(t,N$1(n,i,e),e,r,o)}function $$2(t,n,i,r=2,o="abbr"){const e=T$3(n,i);return l$4(t,N$1(n,i,e),e,r,o)}function M$3(t,n,i,r=2,o="abbr"){const e=Y$1(n,i);return l$4(t,N$1(n,i,e),e,r,o)}function S$2(t,n,i=2){let r=N$1(t,n,"degrees"),o=r-Math.floor(r);r-=o,o*=60;let e=o-Math.floor(o);return o-=e,e*=60,`${r.toFixed()}Â° ${o.toFixed()}' ${e.toFixed(i)}"`}function w$5(t,i,o,e,c){const s=s$2.normalize(z$2(N$1(t,i,"degrees"),o,e),0,!0);return c=c$9(c,2),m$5(s,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:c,minimumFractionDigits:c})}function z$2(t,n,i){if(n===i)return t;switch(i){case"arithmetic":return E$3(t);case"geographic":return T$2(t)}}function E$3(t){return 90-t}function T$2(t){return -t-90}function I$4(t,n,i,o,e){i!==o&&(t=-t);const c=N$1(t,n,"degrees")%360;return e=c$9(e,2),m$5(c,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:e,minimumFractionDigits:e,signDisplay:"exceptZero"})}const K$1=["B","kB","MB","GB","TB"];function L$1(n,r){let e=0===r?0:Math.floor(Math.log(r)/Math.log(o$3.KILOBYTES));e=o$4(e,0,K$1.length-1);const u=m$5(r/o$3.KILOBYTES**e,{maximumFractionDigits:2});return r$1(n.units.bytes[K$1[e]],{fileSize:u})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const d$3="esri.widgets.Feature.support.featureUtils",p$7=s$3.getLogger(d$3),m$4=/href=(""|'')/gi,y$6=/(\{([^\{\r\n]+)\})/g,g$4=/\'/g,h$3=/^\s*expression\//i,I$3=/(\n)/gi,b$4=/[\u00A0-\u9999<>\&]/gim,F$2=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,w$4=/^(?:mailto:|tel:)/,N="relationships/",E$2=S$3("short-date-short-time");function j$2(e){if(!t(e))return e.get("sourceLayer")||e.get("layer")}async function x$1(e,t){return "function"==typeof e?e.call(null,t):e}function T$1(e=""){if(e)return !w$4.test(e.trim().toLowerCase())}function C$1(e){return !!e&&h$3.test(e)}function M$2(e,t){if(!C$1(t)||!e)return null;const r=t.replace(h$3,"").toLowerCase();let n;return e.some((e=>e.name.toLowerCase()===r&&(n=e,!0))),n}function q$1(e,t){const r=M$2(t,e?.fieldName);return r?r.title||null:e?e.label||e.fieldName:null}function R$1(e,t){const r=t.get(e.toLowerCase());return `{${r&&r.fieldName||e}}`}function v$2(e){return e.replace(m$4,"")}function D$1(e,t){const r=L(t,e);return r?r.name:e}function A$2(e,t){return e&&e.map((e=>D$1(e,t)))}function L(e,t){return e&&"function"==typeof e.getField?e.getField(t):null}function U$1(e){return `${e}`.trim()}function $$1({attributes:e,globalAttributes:t,layer:r,text:n,expressionAttributes:i,fieldInfoMap:o}){return n?S$1({formattedAttributes:t,template:_$1(n,{...t,...i,...e},r),fieldInfoMap:o}):""}function S$1({formattedAttributes:e,template:t,fieldInfoMap:r}){return U$1(v$2(r$1(r$1(t,(e=>R$1(e,r))),e)))}function G$1(e,t,r=!1){const n=t[e];if("string"==typeof n){const i="%27",o=(r?encodeURIComponent(n):n).replace(g$4,i);t[e]=o;}}function k(e,t=!1){const r={...e};return Object.keys(r).forEach((e=>G$1(e,r,t))),r}function O(e,t,r){const i=(t=U$1(t))&&"{"!==t[0];return r$1(e,k(r,i))}function P(e,t){return e.replace(y$6,((e,r,n)=>{const i=L(t,n);return i?`{${i.name}}`:r}))}function _$1(e,t,r){const n=P(e,r);return n?n.replace(F$2,((e,r,n)=>O(e,r||n,t))):n}function z$1(e,t){if("string"==typeof e&&t&&null==t.dateFormat&&(null!=t.places||null!=t.digitSeparator)){const t=Number(e);if(!isNaN(t))return t}return e}function H$1(e){return "feature"===e?.type}function Q$1(e){return !!e?.layer}function Z(e){return "map-image"===e?.type}function V(e,t){const r=t.fieldInfos,n=t.fieldName,i=B$2(r,n)?.clone(),o=t.preventPlacesFormatting,s=t.layer,c=L(s,n);if(i&&"date"===c?.type){const e=i.format||new u$5;e.dateFormat=e.dateFormat||"short-date-short-time",e.dateTimeFormatOptions=!Q$1(s)&&H$1(s)&&s.datesInUnknownTimezone||Q$1(s)&&Z(s.layer)&&s.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,i.format=e;}const d=i&&i.format;return "string"==typeof e&&ye(n)&&d?d.formatRasterPixelValue(e):"string"==typeof(e=z$1(e,d))||null==e||null==d?te(e):o?m$5(e,{...u$6(d),minimumFractionDigits:0,maximumFractionDigits:20}):d.format(e)}function B$2(e,t){if(!e||!e.length||!t)return;const r=t.toLowerCase();let n;return e.some((e=>!(!e.fieldName||e.fieldName.toLowerCase()!==r)&&(n=e,!0))),n}function J$1({fieldName:e,graphic:t,layer:r}){if(ue(e))return null;if(!r||"function"!=typeof r.getFeatureType)return null;const{typeIdField:n}=r;if(!n||e!==n)return null;const i=r.getFeatureType(t);return i?i.name:null}function K({fieldName:e,value:t,graphic:r,layer:n}){if(ue(e))return null;if(!n||"function"!=typeof n.getFieldDomain)return null;const i=n.getFieldDomain(e,{feature:r});return i&&"coded-value"===i.type?i.getName(t):null}function W(e,t){const{creatorField:r,creationDateField:n,editorField:o,editDateField:a}=e;if(!t)return;const u=t[a];if("number"==typeof u){const e=t[o];return {type:"edit",date:L$2(u,E$2),user:e}}const l=t[n];if("number"==typeof l){const e=t[r];return {type:"create",date:L$2(l,E$2),user:e}}return null}function X(e,t){const r=new Map;return e&&e.forEach((e=>{const n=D$1(e.fieldName,t);e.fieldName=n,r.set(n.toLowerCase(),e);})),r}function Y(e){const t=[];if(!e)return t;const{fieldInfos:r,content:n}=e;return r&&t.push(...r),n&&Array.isArray(n)?(n.forEach((e=>{if("fields"===e.type){const r=e&&e.fieldInfos;r&&t.push(...r);}})),t):t}function ee(e){return e.replace(b$4,(e=>`&#${e.charCodeAt(0)};`))}function te(e){return "string"==typeof e?e.replace(I$3,'<br class="esri-text-new-line" />'):e}function re(e){const{value:t,fieldName:r,fieldInfos:n,fieldInfoMap:o,layer:a,graphic:u}=e;if(null==t)return "";const l=K({fieldName:r,value:t,graphic:u,layer:a});if(l)return l;const s=J$1({fieldName:r,graphic:u,layer:a});if(s)return s;if(o.get(r.toLowerCase()))return V(t,{fieldInfos:n||Array.from(o.values()),fieldName:r,layer:a});const f=a&&a.fieldsIndex;return f&&f.isDateField(r)?L$2(t,E$2):te(t)}function ne({fieldInfos:e,attributes:t,layer:r,graphic:n,fieldInfoMap:i,relatedInfos:o}){const a={};return o?.forEach((t=>fe({attributes:a,relatedInfo:t,fieldInfoMap:i,fieldInfos:e,layer:r}))),Object.keys(t).forEach((o=>{const u=t[o];a[o]=re({fieldName:o,fieldInfos:e,fieldInfoMap:i,layer:r,value:u,graphic:n});})),a}async function ie(e,t){const{layer:r,graphic:n,outFields:i,objectIds:o,returnGeometry:a,spatialReference:u}=e,l=o[0];if("number"!=typeof l&&"string"!=typeof l){const e="Could not query required fields for the specified feature. The feature's ID is invalid.",t={layer:r,graphic:n,objectId:l,requiredFields:i};return p$7.warn(e,t),null}if(!r.capabilities?.operations?.supportsQuery){const e="The specified layer cannot be queried. The following fields will not be available.",t={layer:r,graphic:n,requiredFields:i,returnGeometry:a};return p$7.warn(e,t),null}const s=r.createQuery();s.objectIds=o,s.outFields=i?.length?i:[r.objectIdField],s.returnGeometry=!!a,s.returnZ=!!a,s.returnM=!!a,s.outSpatialReference=u;return (await r.queryFeatures(s,t)).features[0]}async function oe(e){if(!e.expressionInfos?.length)return !1;const t=await a$2(),{arcadeUtils:{hasGeometryFunctions:r}}=t;return r(e)}async function ae({graphic:e,popupTemplate:t,layer:r,spatialReference:n},i){if(!r||!t)return;if("function"==typeof r.load&&await r.load(i),!e.attributes)return;const o=e.attributes[r.objectIdField];if(null==o)return;const a=[o],u=await t.getRequiredFields(r.fieldsIndex),l=de$1(u,e),f=l?[]:u,c=t.returnGeometry||await oe(t);if(l&&!c)return;const d=await ie({layer:r,graphic:e,outFields:f,objectIds:a,returnGeometry:c,spatialReference:n},i);d&&(d.geometry&&(e.geometry=d.geometry),d.attributes&&(e.attributes={...e.attributes,...d.attributes}));}function ue(e=""){return !!e&&e.includes(N)}function le(e){return e?`${N}${e.layerId}/${e.fieldName}`:""}function se({attributes:e,graphic:t,relatedInfo:r,fieldInfos:n,fieldInfoMap:i,layer:o}){e&&t&&r&&Object.keys(t.attributes).forEach((a=>{const u=le({layerId:r.relation.id.toString(),fieldName:a}),l=t.attributes[a];e[u]=re({fieldName:u,fieldInfos:n,fieldInfoMap:i,layer:o,value:l,graphic:t});}));}function fe({attributes:e,relatedInfo:t,fieldInfoMap:r,fieldInfos:n,layer:i}){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach((o=>se({attributes:e,graphic:o,relatedInfo:t,fieldInfoMap:r,fieldInfos:n,layer:i}))),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach((o=>se({attributes:e,graphic:o,relatedInfo:t,fieldInfoMap:r,fieldInfos:n,layer:i}))));}const ce=e=>{if(!e)return !1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},de=({layer:e,method:t,query:n,definitionExpression:i})=>{if(!e.capabilities?.query?.supportsCacheHint||"attachments"===t)return;const o=r$2(n.where)&&n.where,a=r$2(n.geometry)&&n.geometry;ce(i)||ce(o)||"extent"===a?.type||"tile"===n.resultType||(n.cacheHint=!0);},pe=({query:e,layer:t,method:r})=>{de({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`});},me=({queryPayload:e,layer:t,method:r})=>{de({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`});};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const u$4={editing:!1,operations:{add:!0,update:!0,delete:!0}},y$5=j$4.ofType(l$5),A$1="graphic.layer.capabilities.operations.supportsResizeAttachments";let f$3=class extends y$8{constructor(t){super(t),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...u$4},this.activeAttachmentInfo=null,this.attachmentInfos=new y$5,this.graphic=null,this.mode="view",this.own(l$6((()=>this.graphic),(()=>this._graphicChanged()),h$5));}destroy(){this._attachmentLayer=null,this.graphic=null;}castAbilities(t){return {...u$4,...t}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get(A$1)||!1}async getAttachments(){const{_attachmentLayer:t,attachmentInfos:e}=this;if(!t||"function"!=typeof t.queryAttachments)throw new s$4("invalid-layer","getAttachments(): A valid layer is required.");const a=this._getFeatureId(),i=new c$a({objectIds:[a],returnMetadata:!0}),n=[],s=t.queryAttachments(i).then((t=>t[a]||n)).catch((()=>n));this._getAttachmentsPromise=s,this.notifyChange("state");const o=await s;return e.removeAll(),o.length&&e.addMany(o),this._getAttachmentsPromise=null,this.notifyChange("state"),o}async addAttachment(t){const{_attachmentLayer:e,attachmentInfos:a,graphic:i,abilities:n}=this;if(!t)throw new s$4("invalid-attachment","addAttachment(): An attachment is required.",{attachment:t});if(!n.operations.add)throw new s$4("invalid-abilities","addAttachment(): add abilities are required.");if(!e||"function"!=typeof e.addAttachment)throw new s$4("invalid-layer","addAttachment(): A valid layer is required.");const s=e.addAttachment(i,t).then((t=>this._queryAttachment(t.objectId))),o=await s;return a.add(o),o}async deleteAttachment(t){const{_attachmentLayer:e,attachmentInfos:a,graphic:i,abilities:n}=this;if(!t)throw new s$4("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!n.operations.delete)throw new s$4("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!e||"function"!=typeof e.deleteAttachments)throw new s$4("invalid-layer","deleteAttachment(): A valid layer is required.");const s=e.deleteAttachments(i,[t.id]).then((()=>t)),o=await s;return a.remove(o),o}async updateAttachment(t,e=this.activeAttachmentInfo){const{_attachmentLayer:a,attachmentInfos:i,graphic:n,abilities:s}=this;if(!t)throw new s$4("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:t});if(!e)throw new s$4("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!s.operations.update)throw new s$4("invalid-abilities","updateAttachment(): Update abilities are required.");const o=i.findIndex((t=>t===e));if(!a||"function"!=typeof a.updateAttachment)throw new s$4("invalid-layer","updateAttachment(): A valid layer is required.");const c=a.updateAttachment(n,e.id,t).then((t=>this._queryAttachment(t.objectId))),h=await c;return i.splice(o,1,h),h}async _queryAttachment(t){if(!t)throw new s$4("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:e}=this,a=this._getFeatureId(),i=new c$a({objectIds:[a],attachmentsWhere:`AttachmentId=${t}`,returnMetadata:!0});return e.queryAttachments(i).then((t=>t[a][0]))}_getFeatureId(){const{_attachmentLayer:t,graphic:e}=this;if(!t||!e)return null;const{objectIdField:a}=t,{attributes:i}=e;return i&&i[a]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch((()=>{})));}_setAttachmentLayer(){const{graphic:t}=this,e=j$2(t);this._attachmentLayer=e?"scene"===e.type&&r$2(e.associatedLayer)?e.associatedLayer:e:null;}};e$5([d$5()],f$3.prototype,"abilities",void 0),e$5([s$5("abilities")],f$3.prototype,"castAbilities",null),e$5([d$5()],f$3.prototype,"activeAttachmentInfo",void 0),e$5([d$5({readOnly:!0,type:y$5})],f$3.prototype,"attachmentInfos",void 0),e$5([d$5({type:g$6})],f$3.prototype,"graphic",void 0),e$5([d$5()],f$3.prototype,"mode",void 0),e$5([d$5({readOnly:!0})],f$3.prototype,"state",null),e$5([d$5({readOnly:!0})],f$3.prototype,"supportsResizeAttachments",null),f$3=e$5([n$4("esri.widgets.Attachments.AttachmentsViewModel")],f$3);const g$3=f$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
function e$4(i){const e=i.toLowerCase();return "image/bmp"===e||"image/emf"===e||"image/exif"===e||"image/gif"===e||"image/x-icon"===e||"image/jpeg"===e||"image/png"===e||"image/tiff"===e||"image/x-wmf"===e}function p$6(e){const p=a$3("esri/themes/base/images/files/");return e?"text/plain"===e?`${p}text-32.svg`:"application/pdf"===e?`${p}pdf-32.svg`:"text/csv"===e?`${p}csv-32.svg`:"application/gpx+xml"===e?`${p}gpx-32.svg`:"application/x-dwf"===e?`${p}cad-32.svg`:"application/postscript"===e||"application/json"===e||"text/xml"===e||"model/vrml"===e?`${p}code-32.svg`:"application/x-zip-compressed"===e||"application/x-7z-compressed"===e||"application/x-gzip"===e||"application/x-tar"===e||"application/x-gtar"===e||"application/x-bzip2"===e||"application/gzip"===e||"application/x-compress"===e||"application/x-apple-diskimage"===e||"application/x-rar-compressed"===e||"application/zip"===e?`${p}zip-32.svg`:e.includes("image/")?`${p}image-32.svg`:e.includes("audio/")?`${p}sound-32.svg`:e.includes("video/")?`${p}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${p}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${p}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${p}report-32.svg`:`${p}generic-32.svg`:`${p}generic-32.svg`}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const v$1={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},y$4={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},B$1=window.CSS;let A=class extends O$1{constructor(t,e){super(t,e),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new g$3,this.visibleElements={...v$1},this._supportsImageOrientation=B$1&&B$1.supports&&B$1.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null;}initialize(){this.own([a$4((()=>this.viewModel?.attachmentInfos),"change",(()=>this.scheduleRender())),l$6((()=>this.viewModel?.mode),(()=>this._modeChanged()),h$5)]);}get effectiveDisplayType(){const{displayType:t}=this;return t&&"auto"!==t?t:this.viewModel.supportsResizeAttachments?"preview":"list"}castVisibleElements(t){return {...v$1,...t}}addAttachment(){const{_addAttachmentForm:t,viewModel:s}=this;return this._set("submitting",!0),this._set("error",null),s.addAttachment(t).then((t=>(this._set("submitting",!1),this._set("error",null),s.mode="view",t))).catch((t=>{throw this._set("submitting",!1),this._set("error",new s$4("attachments:add-attachment",this.messages.addErrorMessage,t)),t}))}deleteAttachment(t){const{viewModel:s}=this;return this._set("submitting",!0),this._set("error",null),s.deleteAttachment(t).then((t=>(this._set("submitting",!1),this._set("error",null),s.mode="view",t))).catch((t=>{throw this._set("submitting",!1),this._set("error",new s$4("attachments:delete-attachment",this.messages.deleteErrorMessage,t)),t}))}updateAttachment(){const{viewModel:t}=this,{_updateAttachmentForm:s}=this;return this._set("submitting",!0),this._set("error",null),t.updateAttachment(s).then((e=>(this._set("submitting",!1),this._set("error",null),t.mode="view",e))).catch((t=>{throw this._set("submitting",!1),this._set("error",new s$4("attachments:update-attachment",this.messages.updateErrorMessage,t)),t}))}render(){const{submitting:t,viewModel:e}=this,{state:s}=e;return n$5("div",{class:this.classes(y$4.base,y$4.esriWidget)},t?this.renderProgressBar():null,"loading"===s?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:t,visibleElements:e}=this;return t&&e.errorMessage?n$5("div",{key:"error-message",class:y$4.errorMessage},t.message):null}renderAttachments(){const{mode:t,activeAttachmentInfo:e}=this.viewModel;return "add"===t?this.renderAddForm():"edit"===t?this.renderDetailsForm(e):this.renderAttachmentContainer()}renderLoading(){return n$5("div",{class:y$4.loaderContainer,key:"loader"},n$5("div",{class:y$4.loader}))}renderProgressBar(){return this.visibleElements.progressBar?n$5("div",{class:y$4.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:t,selectedFile:e}=this,s=t||!e,i=this.visibleElements.cancelAddButton?n$5("button",{type:"button",bind:this,disabled:t,onclick:this._cancelForm,class:this.classes(y$4.esriButton,y$4.esriButtonTertiary,y$4.esriButtonSmall,y$4.esriButtonHalf,t&&y$4.buttonDisabled)},this.messages.cancel):null,a=this.visibleElements.addSubmitButton?n$5("button",{type:"submit",disabled:s,class:this.classes(y$4.esriButton,y$4.esriButtonSecondary,y$4.esriButtonSmall,y$4.esriButtonHalf,{[y$4.buttonDisabled]:s})},this.messages.add):null,n=e?n$5("span",{key:"file-name",class:y$4.fileName},e.name):null,r=n$5("form",{bind:this,afterCreate:v$3,afterRemoved:h$6,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},n$5("fieldset",{class:y$4.fileFieldset},n,n$5("label",{class:this.classes(y$4.fileLabel,y$4.esriButton,y$4.esriButtonSecondary)},e?this.messages.changeFile:this.messages.selectFile,n$5("input",{class:y$4.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),a,i);return n$5("div",{key:"add-form-container",class:y$4.formNode},r)}renderDetailsForm(t){const{visibleElements:e,viewModel:s,selectedFile:i,submitting:a}=this,{contentType:r,size:o,url:l}=t,{abilities:m}=s,d=a||!i,c=m.editing&&m.operations.delete&&e.deleteButton?n$5("button",{key:"delete-button",type:"button",disabled:a,bind:this,onclick:e=>this._submitDeleteAttachment(e,t),class:this.classes(y$4.esriButton,y$4.esriButtonSmall,y$4.esriButtonTertiary,y$4.deleteButton,{[y$4.buttonDisabled]:a})},this.messages.delete):null,h=m.editing&&m.operations.update&&e.updateButton?n$5("button",{disabled:d,key:"update-button",type:"submit",class:this.classes(y$4.esriButton,y$4.esriButtonSmall,y$4.esriButtonThird,{[y$4.buttonDisabled]:d})},this.messages.update):null,u=this.visibleElements.cancelUpdateButton?n$5("button",{disabled:a,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(y$4.esriButton,y$4.esriButtonSmall,y$4.esriButtonTertiary,y$4.esriButtonThird,{[y$4.buttonDisabled]:a})},this.messages.cancel):null,_=i?n$5("span",{key:"file-name",class:y$4.fileName},i.name):null,g=m.editing&&m.operations.update?n$5("fieldset",{key:"file",class:y$4.fileFieldset},_,n$5("label",{class:this.classes(y$4.fileLabel,y$4.esriButton,y$4.esriButtonSecondary)},this.messages.changeFile,n$5("input",{class:y$4.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,v=n$5("fieldset",{key:"size",class:y$4.metadataFieldset},n$5("label",null,L$1(this.messagesUnits,o))),B=n$5("fieldset",{key:"content-type",class:y$4.metadataFieldset},n$5("label",null,r)),A=n$5("form",{bind:this,afterCreate:v$3,afterRemoved:h$6,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},n$5("div",{class:y$4.metadata},v,B),g,n$5("div",{class:y$4.actions},c,u,h));return n$5("div",{key:"edit-form-container",class:y$4.formNode},n$5("a",{class:y$4.itemLink,href:l,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:t,size:400}),n$5("div",{class:y$4.itemLinkOverlay},n$5("span",{class:y$4.itemLinkOverlayIcon},n$5("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},n$5("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),n$5("path",{fill:"none",d:"M0 0h32v32H0z"}))))),A)}renderImageMask({attachmentInfo:t,size:e}){const{supportsResizeAttachments:s}=this.viewModel,{contentType:i,name:a,url:n}=t,r=s&&e$4(i),o=this._getCSSTransform(t,r),l=o?{transform:o,"image-orientation":"none"}:{},m=n.includes("?")?"&":"?",d=r?`${n}${m}w=${e}`:p$6(i),c={[y$4.itemMaskIcon]:!r},p={[y$4.itemImageResizable]:s};return n$5("div",{class:this.classes(c,y$4.itemMask)},n$5("img",{styles:l,alt:a,src:d,class:this.classes(p,y$4.itemImage)}))}renderAttachmentInfo({attachmentInfo:t,displayType:e}){const{viewModel:s}=this,{abilities:i}=s,{name:a,url:n}=t,r=this.renderImageMask({attachmentInfo:t,size:"list"===e?48:400}),o=i.editing?n$5("span",{"aria-hidden":"true",class:this.classes(y$4.itemChevronIcon,f$4(this.container)?y$4.iconLeft:y$4.iconRight)}):null,l=[r,n$5("label",{class:y$4.itemLabel},n$5("span",{class:y$4.itemFilename},a||this.messages.noTitle),o)],m=i.editing?n$5("button",{key:"details-button",bind:this,class:y$4.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":t.id,onclick:()=>this._startEditAttachment(t),type:"button"},l):n$5("a",{key:"details-link",class:y$4.itemButton,href:n,target:"_blank"},l);return n$5("li",{class:y$4.item,key:t},m)}renderAttachmentContainer(){const{effectiveDisplayType:t,viewModel:e,visibleElements:s}=this,{attachmentInfos:i,abilities:a}=e,n=i&&i.length,r={[y$4.containerList]:"preview"!==t,[y$4.containerPreview]:"preview"===t},o=a.editing&&a.operations.add&&s.addButton?n$5("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(y$4.esriButton,y$4.esriButtonTertiary,y$4.addAttachmentButton),type:"button"},n$5("span",{"aria-hidden":"true",class:this.classes(y$4.itemAddIcon,y$4.iconPlus)}),this.messages.add):null,l=n?n$5("ul",{class:y$4.items},i.toArray().map((e=>this.renderAttachmentInfo({attachmentInfo:e,displayType:t})))):n$5("div",{class:y$4.empty},this.messages.noAttachments);return n$5("div",{key:"attachments-container",class:this.classes(y$4.container,r)},l,o)}_modeChanged(){this._set("error",null),this._set("selectedFile",null);}_handleFileInputChange(t){const e=t.target,s=e&&e.files&&e.files.item(0);this._set("selectedFile",s);}_submitDeleteAttachment(t,e){t.preventDefault(),this.deleteAttachment(e);}_submitAddAttachment(t){t.preventDefault(),this.addAttachment();}_submitUpdateAttachment(t){t.preventDefault(),this.updateAttachment();}_startEditAttachment(t){const{viewModel:e}=this;e.activeAttachmentInfo=t,e.mode="edit";}_startAddAttachment(){this.viewModel.mode="add";}_cancelForm(t){t.preventDefault(),this.viewModel.mode="view";}_getCSSTransform(t,e){const{orientationInfo:s}=t;return !this._supportsImageOrientation&&e&&s?[s.rotation?`rotate(${s.rotation}deg)`:"",s.mirrored?"scaleX(-1)":""].join(" "):""}};e$5([o$5("viewModel.abilities")],A.prototype,"abilities",void 0),e$5([d$5()],A.prototype,"displayType",void 0),e$5([d$5({readOnly:!0})],A.prototype,"effectiveDisplayType",null),e$5([o$5("viewModel.graphic")],A.prototype,"graphic",void 0),e$5([d$5({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],A.prototype,"label",void 0),e$5([d$5(),e$6("esri/widgets/Attachments/t9n/Attachments")],A.prototype,"messages",void 0),e$5([d$5(),e$6("esri/core/t9n/Units")],A.prototype,"messagesUnits",void 0),e$5([d$5({readOnly:!0})],A.prototype,"selectedFile",void 0),e$5([d$5({readOnly:!0})],A.prototype,"submitting",void 0),e$5([d$5({readOnly:!0})],A.prototype,"error",void 0),e$5([d$5({type:g$3})],A.prototype,"viewModel",void 0),e$5([d$5()],A.prototype,"visibleElements",void 0),e$5([s$5("visibleElements")],A.prototype,"castVisibleElements",null),A=e$5([n$4("esri.widgets.Attachments")],A);const w$3=A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
let o$2=class extends g$3{constructor(t){super(t),this.description=null,this.title=null;}};e$5([d$5()],o$2.prototype,"description",void 0),e$5([d$5()],o$2.prototype,"title",void 0),o$2=e$5([n$4("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],o$2);const c$8=o$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const p$5={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let n$3=class extends O$1{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null;}render(){return n$5("div",{class:p$5.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?n$5(n$6,{level:this.headingLevel,class:p$5.title},e):null}renderDescription(){const{description:e}=this;return e?n$5("div",{key:"description",class:p$5.description},e):null}};e$5([d$5()],n$3.prototype,"description",void 0),e$5([d$5()],n$3.prototype,"headingLevel",void 0),e$5([d$5()],n$3.prototype,"title",void 0),n$3=e$5([n$4("esri.widgets.Feature.support.FeatureElementInfo")],n$3);const c$7=n$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const d$2={base:"esri-feature-attachments"};let h$2=class extends O$1{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new w$3,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new c$8;}initialize(){this._featureElementInfo=new c$7,this.own([l$6((()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel]),(()=>this._setupFeatureElementInfo()),h$5),l$6((()=>this.viewModel?.graphic),(e=>this.attachmentsWidget.graphic=e),h$5)]);}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy();}render(){const{attachmentsWidget:e}=this;return n$5("div",{class:d$2.base},this._featureElementInfo?.render(),e?.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:s}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:s});}};e$5([d$5({readOnly:!0})],h$2.prototype,"attachmentsWidget",void 0),e$5([o$5("viewModel.description")],h$2.prototype,"description",void 0),e$5([o$5("attachmentsWidget.displayType")],h$2.prototype,"displayType",void 0),e$5([o$5("viewModel.graphic")],h$2.prototype,"graphic",void 0),e$5([d$5()],h$2.prototype,"headingLevel",void 0),e$5([o$5("viewModel.title")],h$2.prototype,"title",void 0),e$5([d$5({type:c$8})],h$2.prototype,"viewModel",void 0),h$2=e$5([n$4("esri.widgets.Feature.FeatureAttachments")],h$2);const m$3=h$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
let p$4=class extends(a$5(y$8)){constructor(t){super(t),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(l$6((()=>this.creator),(t=>{this._destroyContent(),this._createContent(t);}),h$5));}destroy(){this._destroyContent();}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:t,graphic:e,destroyer:r}=this;t&&(x$1(r,{graphic:e}).catch((()=>null)),this._set("created",null));}async _createContent(t){const{graphic:e}=this,r=x$1(t,{graphic:e}).catch((()=>null));this._loadingPromise=r,this.notifyChange("state");const o=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",o));}};e$5([d$5({readOnly:!0})],p$4.prototype,"created",void 0),e$5([d$5()],p$4.prototype,"creator",void 0),e$5([d$5()],p$4.prototype,"destroyer",void 0),e$5([d$5({type:g$6})],p$4.prototype,"graphic",void 0),e$5([d$5({readOnly:!0})],p$4.prototype,"state",null),p$4=e$5([n$4("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],p$4);const l$3=p$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const c$6={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let p$3=class extends O$1{constructor(e,r){super(e,r),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=e=>{Array.from(e.querySelectorAll("a")).forEach((e=>{T$1(e.href)&&!e.hasAttribute("target")&&e.setAttribute("target","_blank");}));};}renderLoading(){return n$5("div",{class:c$6.loaderContainer,key:"loader"},n$5("div",{class:c$6.loader}))}renderCreated(){const e=this.viewModel?.created;return e?e instanceof HTMLElement?n$5("div",{key:e,bind:e,afterCreate:this._attachToNode}):e$7(e)?n$5("div",{key:e},!e.destroyed&&e.render()):n$5("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){const e=this.viewModel?.state;return n$5("div",{class:c$6.base},"loading"===e?this.renderLoading():this.renderCreated())}_attachToNode(e){const r=this;e.appendChild(r);}};e$5([o$5("viewModel.creator")],p$3.prototype,"creator",void 0),e$5([o$5("viewModel.graphic")],p$3.prototype,"graphic",void 0),e$5([d$5({type:l$3})],p$3.prototype,"viewModel",void 0),p$3=e$5([n$4("esri.widgets.Feature.FeatureContent")],p$3);const l$2=p$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
let l$1=class extends y$8{constructor(o){super(o),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null;}get formattedFieldInfos(){const{expressionInfos:o,fieldInfos:e}=this,s=[];return e?.forEach((e=>{if(!(!e.hasOwnProperty("visible")||e.visible))return;const t=e.clone();t.label=q$1(t,o),s.push(t);})),s}};e$5([d$5()],l$1.prototype,"attributes",void 0),e$5([d$5({type:[i$2]})],l$1.prototype,"expressionInfos",void 0),e$5([d$5()],l$1.prototype,"description",void 0),e$5([d$5({type:[c$b]})],l$1.prototype,"fieldInfos",void 0),e$5([d$5({readOnly:!0})],l$1.prototype,"formattedFieldInfos",null),e$5([d$5()],l$1.prototype,"title",void 0),l$1=e$5([n$4("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],l$1);const n$2=l$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const s$1=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function a$1(e){let a=null;return s$1.some((s=>(s.pattern.test(e)&&(a=s),!!a))),a}function p$2(s,p){if("string"!=typeof p||!p)return p;const r=a$1(p);if(!r)return p;const t=p.match(r.pattern),n=t&&t[2],l=r$1(r$1(r.label,{messages:s,hierPart:n}),{appName:r.appName}),i=r.target?` target="${r.target}"`:"",o="_blank"===r.target?' rel="noreferrer"':"";return p.replace(r.pattern,`<a${i} href="$1"${o}>${l}</a>`)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const u$3={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let m$2=class extends O$1{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new n$2,this.messages=null,this.messagesURIUtils=null;}initialize(){this._featureElementInfo=new c$7,this.own(l$6((()=>[this.viewModel?.description,this.viewModel?.title]),(()=>this._setupFeatureElementInfo()),h$5));}destroy(){this._featureElementInfo.destroy();}renderFieldInfo(e,t){const{attributes:s}=this.viewModel,r=e.fieldName,i=e.label||r,o=s?null==s[r]?"":s[r]:"",l=!(!e.format||!e.format.dateFormat),a="number"==typeof o&&!l?this._forceLTR(o):p$2(this.messagesURIUtils,o),d={[u$3.fieldDataDate]:l};return n$5("tr",{key:`fields-element-info-row-${r}-${t}`},n$5("th",{key:`fields-element-info-row-header-${r}-${t}`,class:u$3.fieldHeader,innerHTML:i}),n$5("td",{key:`fields-element-info-row-data-${r}-${t}`,class:this.classes(u$3.fieldData,d),innerHTML:a}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e?.length?n$5("table",{class:u$3.esriTable,summary:this.messages.fieldsSummary},n$5("tbody",null,e.map(((e,t)=>this.renderFieldInfo(e,t))))):null}render(){return n$5("div",{class:u$3.base},this._featureElementInfo?.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t});}_forceLTR(e){return `&lrm;${e}`}};e$5([o$5("viewModel.attributes")],m$2.prototype,"attributes",void 0),e$5([o$5("viewModel.description")],m$2.prototype,"description",void 0),e$5([o$5("viewModel.expressionInfos")],m$2.prototype,"expressionInfos",void 0),e$5([o$5("viewModel.fieldInfos")],m$2.prototype,"fieldInfos",void 0),e$5([o$5("viewModel.title")],m$2.prototype,"title",void 0),e$5([d$5({type:n$2})],m$2.prototype,"viewModel",void 0),e$5([d$5(),e$6("esri/widgets/Feature/t9n/Feature")],m$2.prototype,"messages",void 0),e$5([d$5(),e$6("esri/widgets/support/t9n/uriUtils")],m$2.prototype,"messagesURIUtils",void 0),m$2=e$5([n$4("esri.widgets.Feature.FeatureFields")],m$2);const c$5=m$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const p$1="esri.widgets.Feature.support.relatedFeatureUtils",c$4=s$3.getLogger(p$1),f$2=new Map;function d$1(e){if(!ue(e))return null;const[t,r]=e.split("/").slice(1);return {layerId:t,fieldName:r}}function m$1(e,t){if(!t.relationships)return null;let r=null;const{relationships:s}=t;return s.some((t=>t.id===parseInt(e,10)&&(r=t,!0))),r}function y$3({originRelationship:e,relationships:t,layerId:r}){let s;return t&&t.some((t=>(`${t.relatedTableId}`===r&&t.id===e.id&&(s=t),!!s))),s}function j$1(e,t){const r=t.toLowerCase();for(const s in e)if(s.toLowerCase()===r)return e[s];return null}function h$1(e,t){const r=m$1(e,t);if(!r)return;return {url:`${t.url}/${r.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:r,relatedFields:[],outStatistics:[]}}function F$1(e,t){if(!t)return;if(!e)return;const{features:r,statsFeatures:s}=e,o=r&&r.value;t.relatedFeatures=o?o.features:[];const i=s&&s.value;t.relatedStatsFeatures=i?i.features:[];}function g$2(e,t,r,s){const o=new d$6;return o.outFields=["*"],o.relationshipId="number"==typeof t.id?t.id:parseInt(t.id,10),o.objectIds=[e.attributes[r.objectIdField]],r.queryRelatedFeatures(o,s)}function I$2(e,t,r){let s=0;const o=[];for(;s<t.length;)o.push(`${e} IN (${t.slice(s,r+s)})`),s+=r;return o.join(" OR ")}async function S(e,t,r,a){const l=r.layerId.toString(),{layerInfo:u,relation:p,relatedFields:c,outStatistics:f,url:d,sourceSpatialReference:m}=t,h=y$3({originRelationship:p,relationships:u.relationships,layerId:l});if(h.relationshipTableId&&h.keyFieldInRelationshipTable){const t=(await g$2(e,h,r,a))[e.attributes[r.objectIdField]];if(!t)return null;const o=t.features.map((e=>e.attributes[u.objectIdField]));if(f?.length>0&&u.supportsStatistics){const e=new b$5;e.where=I$2(u.objectIdField,o,1e3),e.outFields=c,e.outStatistics=f,e.sourceSpatialReference=m;const r={features:Promise.resolve(t),statsFeatures:s$6(d,e)};return E$4(r)}}const F=h?.keyField;if(F){const r=B$4(U(u.fields,F)),l=j$1(e.attributes,p.keyField),c=r?`${F}=${l}`:`${F}='${l}'`,f=s$6(d,new b$5({where:c,outFields:t.relatedFields,sourceSpatialReference:m}),a),y=t.outStatistics&&t.outStatistics.length>0&&u.supportsStatistics?s$6(d,new b$5({where:c,outFields:t.relatedFields,outStatistics:t.outStatistics,sourceSpatialReference:m}),a):null,h={features:f};return y&&(h.statsFeatures=y),E$4(h)}return null}function w$2(t,r){return U$2(t,{query:{f:"json"},signal:r&&r.signal})}function b$3({relatedInfos:e,layer:r},o){const i={};return e.forEach(((e,s)=>{const{relation:n}=e;if(!n){const e=new s$4("relation-required","A relation is required on a layer to retrieve related records.");throw c$4.error(e),e}const{relatedTableId:a}=n;if("number"!=typeof a){const e=new s$4("A related table ID is required on a layer to retrieve related records.");throw c$4.error(e),e}const l=`${r.url}/${a}`,u=f$2.get(l),p=u||w$2(l,o);u||f$2.set(l,p),i[s]=p;})),E$4(i)}function R({graphic:e,relatedInfos:t,layer:r},o){const i={};return t.forEach(((t,s)=>{t.layerInfo&&(i[s]=S(e,t,r,o));})),E$4(i)}function $({relatedInfo:e,fieldName:t,fieldInfo:r}){if(e.relatedFields.push(t),r.statisticType){const s=new m$6({statisticType:r.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(s);}}function U(e,t){if(null!=e){t=t.toLowerCase();for(const r of e)if(r&&r.name.toLowerCase()===t)return r}return null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const y$2={chartAnimation:!0};let I$1=class extends y$8{constructor(t){super(t),this.abilities={...y$2},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null;}castAbilities(t){return {...y$2,...t}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(t){this._setContentElementMedia(t);}next(){this._pageContentElementMedia(1);}previous(){this._pageContentElementMedia(-1);}_setContentElementMedia(t){const{formattedMediaInfoCount:e}=this,o=(t+e)%e;this.activeMediaInfoIndex=o;}_pageContentElementMedia(t){const{activeMediaInfoIndex:e}=this,o=e+t;this._setContentElementMedia(o);}_formatMediaInfos(){const{attributes:t,mediaInfos:e,formattedAttributes:o,expressionAttributes:i,fieldInfoMap:r,layer:a}=this;return e?.map((e=>{const s=e?.clone();if(!s)return null;if(s.title=$$1({attributes:t,fieldInfoMap:r,globalAttributes:o,expressionAttributes:i,layer:a,text:s.title}),s.caption=$$1({attributes:t,fieldInfoMap:r,globalAttributes:o,expressionAttributes:i,layer:a,text:s.caption}),s.altText=$$1({attributes:t,fieldInfoMap:r,globalAttributes:o,expressionAttributes:i,layer:a,text:s.altText}),"image"===s.type){const{value:t}=s;return this._setImageValue({value:t,formattedAttributes:o,layer:a}),s.value.sourceURL?s:void 0}if("pie-chart"===s.type||"line-chart"===s.type||"column-chart"===s.type||"bar-chart"===s.type){const{value:e}=s;return this._setChartValue({value:e,chartType:s.type,attributes:t,formattedAttributes:o,layer:a}),s}return null})).filter(Boolean)}_setImageValue(t){const{fieldInfoMap:e}=this,{value:o,formattedAttributes:i,layer:r}=t,{linkURL:a,sourceURL:s}=o;if(s){const t=P(s,r);o.sourceURL=S$1({formattedAttributes:i,template:t,fieldInfoMap:e});}if(a){const t=P(a,r);o.linkURL=S$1({formattedAttributes:i,template:t,fieldInfoMap:e});}}_setChartValue(t){const{value:e,attributes:o,formattedAttributes:i,chartType:r,layer:a}=t,{popupTemplate:s,relatedInfos:l}=this,{fields:n,normalizeField:p}=e;e.fields=A$2(n,a),p&&(e.normalizeField=D$1(p,a));if(!n.some((t=>!!(null!=i[t]||ue(t)&&l.size))))return;const c=s?.fieldInfos;n.forEach((t=>{if(ue(t))return void(e.series=[...e.series,...this._getRelatedChartInfos({fieldInfos:c,fieldName:t,formattedAttributes:i,chartType:r,value:e})]);const a=this._getChartOption({value:e,attributes:o,chartType:r,formattedAttributes:i,fieldName:t,fieldInfos:c});e.series.push(a);}));}_getRelatedChartInfos(t){const{fieldInfos:e,fieldName:o,formattedAttributes:i,chartType:r,value:a}=t,s=[],l=d$1(o),{layerId:n,fieldName:p}=l,d=this.relatedInfos?.get(n.toString());if(!d)return s;const{relatedFeatures:u,relation:f}=d;if(!f||!u)return s;const{cardinality:c}=f;u.forEach((t=>{const{attributes:l}=t;l&&Object.keys(l).forEach((t=>{t===p&&s.push(this._getChartOption({value:a,attributes:l,formattedAttributes:i,fieldName:o,chartType:r,relatedFieldName:t,fieldInfos:e}));}));}));return "one-to-many"===c||"many-to-many"===c?s:[s[0]]}_getTooltip({label:t,value:e,chartType:o}){return "pie-chart"===o?`${t}`:`${t}: ${e}`}_getChartOption(t){const{value:e,attributes:o,formattedAttributes:i,fieldName:r,relatedFieldName:l,fieldInfos:n,chartType:p}=t,{layer:d,fieldInfoMap:y}=this,{normalizeField:I,tooltipField:b}=e,v=I?ue(I)?o[d$1(I).fieldName]:o[I]:null,M=l&&void 0!==o[l]?o[l]:void 0!==o[r]?o[r]:i[r],A=new i$3({fieldName:r,value:void 0===M?null:M&&v?M/v:M});if(ue(r)){const t=y.get(r.toLowerCase()),e=y.get(b.toLowerCase()),o=t?.fieldName??r,a=i[e?.fieldName??b]??t?.label??t?.fieldName??l,s=i[o];return A.tooltip=this._getTooltip({label:a,value:s,chartType:p}),A}const g=B$2(n,r),_=D$1(r,d),x=b&&void 0!==i[b]?i[b]:q$1(g||new c$b({fieldName:_}),this.popupTemplate?.expressionInfos),C=i[_];return A.tooltip=this._getTooltip({label:x,value:C,chartType:p}),A}};e$5([d$5()],I$1.prototype,"abilities",void 0),e$5([s$5("abilities")],I$1.prototype,"castAbilities",null),e$5([d$5()],I$1.prototype,"activeMediaInfoIndex",void 0),e$5([d$5({readOnly:!0})],I$1.prototype,"activeMediaInfo",null),e$5([d$5()],I$1.prototype,"attributes",void 0),e$5([d$5()],I$1.prototype,"description",void 0),e$5([d$5()],I$1.prototype,"fieldInfoMap",void 0),e$5([d$5()],I$1.prototype,"formattedAttributes",void 0),e$5([d$5()],I$1.prototype,"expressionAttributes",void 0),e$5([d$5({readOnly:!0})],I$1.prototype,"formattedMediaInfos",null),e$5([d$5()],I$1.prototype,"layer",void 0),e$5([d$5({readOnly:!0})],I$1.prototype,"formattedMediaInfoCount",null),e$5([d$5()],I$1.prototype,"mediaInfos",void 0),e$5([d$5()],I$1.prototype,"popupTemplate",void 0),e$5([d$5()],I$1.prototype,"relatedInfos",void 0),e$5([d$5()],I$1.prototype,"title",void 0),I$1=e$5([n$4("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],I$1);const b$2=I$1;

var f$1=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],b$1=[].concat(f$1.slice(30,39),f$1.slice(28,30).reverse()),e$3=[{name:"default",colors:b$1},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}],a={"h-yy-010":"#fff7cc","h-yy-020":"#fef3ad","h-yy-030":"#fcee8d","h-yy-040":"#fbea6e","h-yy-050":"#f9e54e","h-yy-060":"#edd317","h-yy-070":"#d9bc00","h-yy-080":"#bfa200","h-yy-090":"#8c7500","h-yy-100":"#5c4e00","h-oy-010":"#ffe2bf","h-oy-020":"#fed3a1","h-oy-030":"#fcc582","h-oy-040":"#fbb664","h-oy-050":"#f9a845","h-oy-060":"#f89927","h-oy-070":"#c67718","h-oy-080":"#9a5b10","h-oy-090":"#6d3f08","h-oy-100":"#402300","h-oo-010":"#ffd8bf","h-oo-020":"#fdc39f","h-oo-030":"#faae7f","h-oo-040":"#f89960","h-oo-050":"#f58440","h-oo-060":"#f36f20","h-oo-070":"#c65a18","h-oo-080":"#9a4410","h-oo-090":"#6d2f08","h-oo-100":"#401900","h-ro-010":"#ffc7b3","h-ro-020":"#f8af95","h-ro-030":"#f09677","h-ro-040":"#e97e5a","h-ro-050":"#e1653c","h-ro-060":"#da4d1e","h-ro-070":"#ad3c16","h-ro-080":"#802c0f","h-ro-090":"#531b07","h-ro-100":"#260a00","h-rr-010":"#ffc6bf","h-rr-020":"#ffaaa1","h-rr-030":"#f2877b","h-rr-040":"#f07062","h-rr-050":"#e65240","h-rr-060":"#d83020","h-rr-070":"#a82b1e","h-rr-080":"#7c1d13","h-rr-090":"#4f0e08","h-rr-100":"#210300","h-pk-010":"#ffd1ef","h-pk-020":"#fabee4","h-pk-030":"#f2a5d6","h-pk-040":"#eb8dc9","h-pk-050":"#e673bb","h-pk-060":"#e04ea6","h-pk-070":"#ba2f7e","h-pk-080":"#851b52","h-pk-090":"#590b32","h-pk-100":"#260404","h-vr-010":"#fadbff","h-vr-020":"#e4beeb","h-vr-030":"#cfa1d7","h-vr-040":"#b983c3","h-vr-050":"#a466af","h-vr-060":"#8e499b","h-vr-070":"#73377e","h-vr-080":"#572561","h-vr-090":"#3c1243","h-vr-100":"#200026","h-vv-010":"#e8d9ff","h-vv-020":"#cdb9eb","h-vv-030":"#b39ad7","h-vv-040":"#987ac3","h-vv-050":"#7e5baf","h-vv-060":"#633b9b","h-vv-070":"#4e2c7e","h-vv-080":"#3a1e61","h-vv-090":"#250f43","h-vv-100":"#100026","h-bb-010":"#c7eaff","h-bb-020":"#9fd4f3","h-bb-030":"#77bde7","h-bb-040":"#50a7da","h-bb-050":"#2890ce","h-bb-060":"#007ac2","h-bb-070":"#00619b","h-bb-080":"#004874","h-bb-090":"#00304d","h-bb-100":"#001726","h-gb-010":"#cef5f4","h-gb-020":"#afedec","h-gb-030":"#8fe6e5","h-gb-040":"#5ae0de","h-gb-050":"#28cecb","h-gb-060":"#00bab5","h-gb-070":"#009b98","h-gb-080":"#007472","h-gb-090":"#004d4c","h-gb-100":"#002625","h-gg-010":"#bdf2c4","h-gg-020":"#a2e4ab","h-gg-030":"#87d692","h-gg-040":"#6bc878","h-gg-050":"#50ba5f","h-gg-060":"#35ac46","h-gg-070":"#288835","h-gg-080":"#1a6324","h-gg-090":"#0d3f14","h-gg-100":"#001a03","h-yg-010":"#e5f7b4","h-yg-020":"#d9ef9f","h-yg-030":"#cde78a","h-yg-040":"#c2e075","h-yg-050":"#b6d860","h-yg-060":"#aad04b","h-yg-070":"#84a338","h-yg-080":"#5e7526","h-yg-090":"#384813","h-yg-100":"#121a00","h-br-010":"#f7e4cb","h-br-020":"#dec6a8","h-br-030":"#c5a885","h-br-040":"#ad8b62","h-br-050":"#946d3f","h-br-060":"#7b4f1c","h-br-070":"#664015","h-br-080":"#51310e","h-br-090":"#3b2307","h-br-100":"#261400","m-yy-010":"#faf7dc","m-yy-020":"#f6f0c1","m-yy-030":"#f2e8a6","m-yy-040":"#ede18b","m-yy-050":"#e9d970","m-yy-060":"#e5d255","m-yy-070":"#bcaa45","m-yy-080":"#8a7d31","m-yy-090":"#584f1c","m-yy-100":"#262107","m-oy-010":"#ffedd6","m-oy-020":"#fce0bd","m-oy-030":"#f8d2a4","m-oy-040":"#f5c58c","m-oy-050":"#f1b773","m-oy-060":"#eeaa5a","m-oy-070":"#bc8645","m-oy-080":"#8a6130","m-oy-090":"#583d1c","m-oy-100":"#261807","m-oo-010":"#ffece0","m-oo-020":"#fcdac5","m-oo-030":"#f8c7aa","m-oo-040":"#f5b590","m-oo-050":"#f1a275","m-oo-060":"#ee905a","m-oo-070":"#bc7145","m-oo-080":"#8a5131","m-oo-090":"#58321c","m-oo-100":"#261207","m-ro-010":"#f7e4dc","m-ro-020":"#f5d0c2","m-ro-030":"#f3bba7","m-ro-040":"#f1a78d","m-ro-050":"#ef9272","m-ro-060":"#ed7e58","m-ro-070":"#bc6345","m-ro-080":"#8a4731","m-ro-090":"#582b1c","m-ro-100":"#582b1c","m-rr-010":"#fadfdc","m-rr-020":"#fccac5","m-rr-030":"#ffb9b0","m-rr-040":"#f79e94","m-rr-050":"#f5867a","m-rr-060":"#eb6c5e","m-rr-070":"#c25347","m-rr-080":"#913d34","m-rr-090":"#5e241e","m-rr-100":"#260a07","m-pk-010":"#fadef0","m-pk-020":"#facdea","m-pk-030":"#f2b1da","m-pk-040":"#eb9dcf","m-pk-050":"#e688c2","m-pk-060":"#e070b4","m-pk-070":"#b8588f","m-pk-080":"#8c4267","m-pk-090":"#592440","m-pk-100":"#260b0b","m-vr-010":"#f6e1fa","m-vr-020":"#e9ceee","m-vr-030":"#dbbbe2","m-vr-040":"#cea8d5","m-vr-050":"#c095c9","m-vr-060":"#b382bd","m-vr-070":"#8e6397","m-vr-080":"#6a4572","m-vr-090":"#46264c","m-vr-100":"#210726","m-vv-010":"#ece6ff","m-vv-020":"#dcd2f2","m-vv-030":"#ccbee5","m-vv-040":"#bbaad7","m-vv-050":"#ab96ca","m-vv-060":"#9b82bd","m-vv-070":"#796397","m-vv-080":"#584572","m-vv-090":"#36264c","m-vv-100":"#140726","m-bb-010":"#dfeffa","m-bb-020":"#c8e3f5","m-bb-030":"#b1d8f1","m-bb-040":"#9bccec","m-bb-050":"#84c1e8","m-bb-060":"#6db5e3","m-bb-070":"#548eb4","m-bb-080":"#3a6884","m-bb-090":"#214155","m-bb-100":"#071a26","m-gb-010":"#dbf2f1","m-gb-020":"#beedec","m-gb-030":"#9fe6e5","m-gb-040":"#8be0df","m-gb-050":"#70d9d7","m-gb-060":"#5cbfbc","m-gb-070":"#53a6a4","m-gb-080":"#40807e","m-gb-090":"#2a5958","m-gb-100":"#102928","m-gg-010":"#e4f0e4","m-gg-020":"#cbe2cb","m-gg-030":"#b2d4b2","m-gg-040":"#9ac699","m-gg-050":"#81b880","m-gg-060":"#68aa67","m-gg-070":"#548953","m-gg-080":"#3f683f","m-gg-090":"#2b472a","m-gg-100":"#172616","m-yg-010":"#f0f7da","m-yg-020":"#e5efc6","m-yg-030":"#dae7b1","m-yg-040":"#cede9d","m-yg-050":"#c3d688","m-yg-060":"#b8ce74","m-yg-070":"#90a15b","m-yg-080":"#687442","m-yg-090":"#3f4728","m-yg-100":"#171a0f","m-br-010":"#faeddf","m-br-020":"#edd9c3","m-br-030":"#e0c6a8","m-br-040":"#d2b28c","m-br-050":"#c59f71","m-br-060":"#b88b55","m-br-070":"#926d41","m-br-080":"#6c4f2d","m-br-090":"#45311a","m-br-100":"#1f1306","l-yy-010":"#f7f5e6","l-yy-020":"#e7e4d1","l-yy-030":"#d7d3bc","l-yy-040":"#c6c1a6","l-yy-050":"#b6b091","l-yy-060":"#a69f7c","l-yy-070":"#837e61","l-yy-080":"#605c47","l-yy-090":"#3d3b2c","l-yy-100":"#1a1911","l-oy-010":"#faf3eb","l-oy-020":"#e9e0d5","l-oy-030":"#d8cdbf","l-oy-040":"#c8b9a8","l-oy-050":"#b7a692","l-oy-060":"#a6937c","l-oy-070":"#837461","l-oy-080":"#605547","l-oy-090":"#3d352c","l-oy-100":"#1a1611","l-oo-010":"#faf1eb","l-oo-020":"#e9ddd5","l-oo-030":"#d8c9bf","l-oo-040":"#c8b4a8","l-oo-050":"#b7a092","l-oo-060":"#a68c7c","l-oo-070":"#836e61","l-oo-080":"#605047","l-oo-090":"#3d322c","l-oo-100":"#1a1411","l-ro-010":"#faf3f0","l-ro-020":"#e9ddd9","l-ro-030":"#d8c8c1","l-ro-040":"#c8b2aa","l-ro-050":"#b79d92","l-ro-060":"#a6877b","l-ro-070":"#836b61","l-ro-080":"#604e47","l-ro-090":"#3d302c","l-ro-100":"#1a1311","l-rr-010":"#faf1f0","l-rr-020":"#eddfdd","l-rr-030":"#dbc6c4","l-rr-040":"#c8adaa","l-rr-050":"#ba9995","l-rr-060":"#ab837e","l-rr-070":"#876764","l-rr-080":"#604a47","l-rr-090":"#3d2e2c","l-rr-100":"#1a1211","l-pk-010":"#faf0f6","l-pk-020":"#e8d7e2","l-pk-030":"#dbc2d2","l-pk-040":"#c9abbe","l-pk-050":"#b897ab","l-pk-060":"#a68097","l-pk-070":"#856376","l-pk-080":"#614755","l-pk-090":"#3d2c35","l-pk-100":"#1a1111","l-vr-010":"#f5edf7","l-vr-020":"#e1d6e4","l-vr-030":"#cebcd1","l-vr-040":"#baa8bf","l-vr-050":"#a791ac","l-vr-060":"#937a99","l-vr-070":"#746079","l-vr-080":"#56465a","l-vr-090":"#372b3a","l-vr-100":"#18111a","l-vv-010":"#f0edf7","l-vv-020":"#dcd8e7","l-vv-030":"#c8c3d7","l-vv-040":"#b5aec6","l-vv-050":"#a199b6","l-vv-060":"#8d84a6","l-vv-070":"#6f6783","l-vv-080":"#504b60","l-vv-090":"#322e3d","l-vv-100":"#13111a","l-bb-010":"#edf3f7","l-bb-020":"#d7e1e7","l-bb-030":"#c1cfd7","l-bb-040":"#acbcc6","l-bb-050":"#96aab6","l-bb-060":"#8098a6","l-bb-070":"#647883","l-bb-080":"#495860","l-bb-090":"#2d373d","l-bb-100":"#11171a","l-gb-010":"#e8f2f2","l-gb-020":"#d7e8e8","l-gb-030":"#c2d7d7","l-gb-040":"#b1c9c9","l-gb-050":"#98b3b2","l-gb-060":"#88a6a5","l-gb-070":"#658584","l-gb-080":"#4b6160","l-gb-090":"#2f3d3d","l-gb-100":"#121a1a","l-gg-010":"#f0f7f0","l-gg-020":"#dde7dd","l-gg-030":"#cad7ca","l-gg-040":"#b7c6b6","l-gg-050":"#a4b6a3","l-gg-060":"#91a690","l-gg-070":"#728371","l-gg-080":"#536053","l-gg-090":"#343d34","l-gg-100":"#151a15","l-yg-010":"#f4f7eb","l-yg-020":"#e3e7d8","l-yg-030":"#d2d7c5","l-yg-040":"#c2c6b3","l-yg-050":"#b1b6a0","l-yg-060":"#a0a68d","l-yg-070":"#7e836f","l-yg-080":"#5d6051","l-yg-090":"#3b3d33","l-yg-100":"#191a15","l-br-010":"#f7f1eb","l-br-020":"#e4ddd4","l-br-030":"#d1c8be","l-br-040":"#bfb4a7","l-br-050":"#ac9f91","l-br-060":"#998b7a","l-br-070":"#796e60","l-br-080":"#5a5146","l-br-090":"#3a332b","l-br-100":"#1a1611","v-yy-120":"#fff766","v-yy-140":"#ffee33","v-yy-160":"#f5d000","v-yy-180":"#ebba17","v-oy-120":"#ffb54d","v-oy-140":"#ff9500","v-oy-160":"#e68600","v-oy-180":"#d17300","v-oo-120":"#ff974d","v-oo-140":"#ff6a00","v-oo-160":"#e05d00","v-oo-180":"#c95100","v-ro-120":"#ff824d","v-ro-140":"#ff4d00","v-ro-160":"#de4300","v-ro-180":"#c93b00","v-rr-120":"#ff624d","v-rr-140":"#ff0015","v-rr-160":"#d90012","v-rr-180":"#b3000f","v-pk-120":"#ff66c2","v-pk-140":"#ff19a4","v-pk-160":"#d11486","v-pk-180":"#c00073","v-vr-120":"#ea80ff","v-vr-140":"#dd33ff","v-vr-160":"#ac08cc","v-vr-180":"#83009e","v-vv-120":"#b580ff","v-vv-140":"#974dff","v-vv-160":"#8129ff","v-vv-180":"#6a0be6","v-bb-120":"#59d6ff","v-bb-140":"#3db8ff","v-bb-160":"#009af2","v-bb-180":"#0089de","v-gb-120":"#59fffc","v-gb-140":"#00f7f3","v-gb-160":"#00e6e2","v-gb-180":"#00cfca","v-gg-120":"#73ff84","v-gg-140":"#3bed52","v-gg-160":"#00b81b","v-gg-180":"#00a118","v-yg-120":"#d7ff73","v-yg-140":"#bbed3b","v-yg-160":"#96cc00","v-yg-180":"#7fab00","d-bb-410":"#47BBFF","d-bb-420":"#00A0FF","d-bb-430":"#0087D7","d-gg-410":"#44ED51","d-gg-420":"#36DA43","d-gg-430":"#11AD1D","d-yy-410":"#FFE24D","d-yy-420":"#FFC900","d-yy-430":"#F4B000","d-rr-410":"#FF7465","d-rr-420":"#FE583E","d-rr-430":"#F3381B","blk-000":"#ffffff","blk-005":"#f8f8f8","blk-010":"#f3f3f3","blk-020":"#eaeaea","blk-030":"#dfdfdf","blk-040":"#d4d4d4","blk-050":"#cacaca","blk-060":"#bfbfbf","blk-070":"#b5b5b5","blk-080":"#aaaaaa","blk-090":"#9f9f9f","blk-100":"#949494","blk-110":"#8a8a8a","blk-120":"#808080","blk-130":"#757575","blk-140":"#6a6a6a","blk-150":"#606060","blk-160":"#555555","blk-170":"#4a4a4a","blk-180":"#404040","blk-190":"#353535","blk-200":"#2b2b2b","blk-210":"#202020","blk-220":"#151515","blk-230":"#0b0b0b","blk-235":"#060606","blk-240":"#000000"},c$3=[{name:"light",variables:{brand:"#007ac2","brand-hover":"#00619B","brand-press":"#004874",background:"#f8f8f8","foreground-1":"#ffffff","foreground-2":"#f3f3f3","foreground-3":"#eaeaea","text-1":"#151515","text-2":"#4a4a4a","text-3":"#6a6a6a","text-inverse":"#FFFFFF","text-link":"#00619b","border-1":"#cacaca","border-2":"#d4d4d4","border-3":"#dfdfdf","border-input":"#949494",info:"#00619b",success:"#35ac46",warning:"#edd317",danger:"#D83020","danger-hover":"#A82B1E","danger-press":"#7C1D13"}},{name:"dark",variables:{brand:"#009AF2","brand-hover":"#007AC2","brand-press":"#00619B",background:"#353535","foreground-1":"#2b2b2b","foreground-2":"#202020","foreground-3":"#151515","text-1":"#ffffff","text-2":"#bfbfbf","text-3":"#9f9f9f","text-inverse":"#151515","text-link":"#00A0FF","border-1":"#555555","border-2":"#4a4a4a","border-3":"#404040","border-input":"#757575",info:"#00A0FF",success:"#36DA43",warning:"#FFC900",danger:"#FE583E","danger-hover":"#FF0015","danger-press":"#D90012"}}];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const n$1="en-us",h=new Map([["ar",()=>import('./ar-5d28e6ee.js').then((t=>t.a))],["bg-bg",()=>import('./bg_BG-37f46c14.js').then((t=>t.b))],["bs-ba",()=>import('./bs_BA-2605247e.js').then((t=>t.b))],["ca-es",()=>import('./ca_ES-ac75acc1.js').then((t=>t.c))],["cs-cz",()=>import('./cs_CZ-56dbe9d1.js').then((t=>t.c))],["da-dk",()=>import('./da_DK-747dc9b2.js').then((t=>t.d))],["de-de",()=>import('./de_DE-007d2248.js').then((t=>t.d))],["de-ch",()=>import('./de_CH-f14ed7e9.js').then((t=>t.d))],["el-gr",()=>import('./el_GR-54a3fa08.js').then((t=>t.e))],["en-us",()=>import('./en_US-111d6329.js').then((t=>t.e))],["en-ca",()=>import('./en_CA-23f1310c.js').then((t=>t.e))],["es-es",()=>import('./es_ES-062503bc.js').then((t=>t.e))],["et-ee",()=>import('./et_EE-8d59121c.js').then((t=>t.e))],["fi-fi",()=>import('./fi_FI-96b0138a.js').then((t=>t.f))],["fr-fr",()=>import('./fr_FR-63fb94b9.js').then((t=>t.f))],["he-il",()=>import('./he_IL-e863c8ef.js').then((t=>t.h))],["hr-hr",()=>import('./hr_HR-67588499.js').then((t=>t.h))],["hu-hu",()=>import('./hu_HU-7b1faac9.js').then((t=>t.h))],["id-id",()=>import('./id_ID-02b420ef.js').then((t=>t.i))],["it-it",()=>import('./it_IT-0393438d.js').then((t=>t.i))],["ja-jp",()=>import('./ja_JP-2a535a03.js').then((t=>t.j))],["ko-kr",()=>import('./ko_KR-7b610262.js').then((t=>t.k))],["lt-lt",()=>import('./lt_LT-4c7fdc16.js').then((t=>t.l))],["lv-lv",()=>import('./lv_LV-3d8a5089.js').then((t=>t.l))],["nb-no",()=>import('./nb_NO-e5c2ab39.js').then((t=>t.n))],["nl-nl",()=>import('./nl_NL-0c055d7b.js').then((t=>t.n))],["pl-pl",()=>import('./pl_PL-6b1f2730.js').then((t=>t.p))],["pt-br",()=>import('./pt_BR-47b063d1.js').then((t=>t.p))],["pt-pt",()=>import('./pt_PT-cd001bc5.js').then((t=>t.p))],["ro-ro",()=>import('./ro_RO-170d43fc.js').then((t=>t.r))],["ru-ru",()=>import('./ru_RU-40c773c8.js').then((t=>t.r))],["sk-sk",()=>import('./sk_SK-e02eb6bf.js').then((t=>t.s))],["sl-sl",()=>import('./sl_SL-2ca53ec1.js').then((t=>t.s))],["sr-rs",()=>import('./sr_RS-f20e8f89.js').then((t=>t.s))],["sv-se",()=>import('./sv_SE-c36452e3.js').then((t=>t.s))],["th-th",()=>import('./th_TH-fe20ca05.js').then((t=>t.t))],["tr-tr",()=>import('./tr_TR-e1ae379b.js').then((t=>t.t))],["uk-ua",()=>import('./uk_UA-3e457a9c.js').then((t=>t.u))],["vi-vn",()=>import('./vi_VN-197ddeb7.js').then((t=>t.v))],["zh-cn",()=>import('./zh_Hans-cbb16878.js').then((t=>t.z))],["zh-hk",()=>import('./zh_Hant-1a61eccb.js').then((t=>t.z))],["zh-tw",()=>import('./zh_Hant-1a61eccb.js').then((t=>t.z))]]);function e$2(t){const s=t.split("-")[0].toLowerCase();let n=null;for(const e of h.keys())if(e.startsWith(s)){n=e;break}return n}function r(t){return t?h.has(t.toLowerCase())?t.toLowerCase():e$2(t)||n$1:n$1}let o$1,i$1;async function c$2(t=l$7()){if(t=r(t),o$1&&t===i$1)return o$1;o$1=import('./index-9ea458a4.js').then((t=>t.i)),i$1=t;try{const[s,n]=await Promise.all([o$1,h.get(i$1)()]);i$1===t&&(s.am4core.options.defaultLocale=n.default),s.am4core.options.suppressWarnings=!0,s.am4core.options.autoDispose=!0;}catch{return o$1=null,i$1=null,null}return o$1}function u$2(s,n="default"){const h=e$3.find((t=>t.name===n));return h?h.colors.map((t=>s.color(t))):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const M$1={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},I=.05,y$1=.95,w$1=15,g$1="color",b="tooltip",C="value",T="default-line-value";let x=class extends O$1{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new b$2,this.messages=null,this._getChartDependencies=async e=>{const t=await c$2(),{destroyed:i,viewModel:r}=this;if(i||!r||!e)return;const{activeMediaInfo:a}=r,o=await this._getRendererColors(t);this._renderChart({chartDiv:e,mediaInfo:a,chartsModule:t,colorMap:o});};}initialize(){this._featureElementInfo=new c$7,this.own([l$6((()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex]),(()=>this._setupMediaRefreshTimer()),h$5),l$6((()=>[this.viewModel?.description,this.viewModel?.title]),(()=>this._setupFeatureElementInfo()),h$5)]);}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy();}render(){return n$5("div",{bind:this,class:M$1.base,onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?n$5("div",{key:"media-element-container",class:M$1.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:a,refreshInterval:o,altText:s,title:n,type:l}=e,{sourceURL:d,linkURL:c}=a,u=T$1(c)?"_blank":"_self",p="_blank"===u?"noreferrer":"",h=o?t:null,f=h?h.timestamp:0,_=h?h.sourceURL:d,M=n$5("img",{alt:s||n,key:`media-${l}-${i}-${r}-${f}`,src:_}),I=c?n$5("a",{title:n,href:c,rel:p,target:u},M):null;return I||M}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return n$5("div",{key:`media-${e.type}-${t}-${i}`,bind:this,class:M$1.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?"image"===e.type?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?n$5("div",{key:"media-title",class:M$1.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?n$5("div",{key:"media-caption",class:M$1.mediaItemCaption,innerHTML:e.caption}):null;return n$5("div",{key:"media-container",class:M$1.mediaItemContainer},n$5("div",{key:"media-item-container",class:M$1.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t="previous"===e,i=t?this.messages.previous:this.messages.next,r=t?this.classes(M$1.mediaButton,M$1.mediaPrevious):this.classes(M$1.mediaButton,M$1.mediaNext),a=t?this.classes(M$1.mediaIcon,M$1.mediaPreviousIconLTR,M$1.iconLeftTriangleArrow):this.classes(M$1.mediaIcon,M$1.mediaNextIconLTR,M$1.iconRightTriangleArrow),o=t?this.classes(M$1.mediaIcon,M$1.mediaPreviousIconRTL,M$1.iconRightTriangleArrow):this.classes(M$1.mediaIcon,M$1.mediaNextIconRTL,M$1.iconLeftTriangleArrow),s=t?"media-previous":"media-next",n=t?this._previous:this._next;return n$5("button",{type:"button",key:s,title:i,"aria-label":i,tabIndex:0,class:r,bind:this,onclick:n},n$5("span",{"aria-hidden":"true",class:a}),n$5("span",{"aria-hidden":"true",class:o}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t});}_next(){this.viewModel.next();}_previous(){this.viewModel.previous();}async _getRendererColors(e){const{am4core:t}=e,i=this.viewModel?.layer,r=new Map;if(!i)return r;const a=await h$7(i.renderer);a.delete(null);return Array.from(a.values()).every((e=>1===e?.length))?(r.set(T,t.color({r:50,g:50,b:50,a:1})),Array.from(a.keys()).forEach((e=>{e&&r.set(e,t.color(a.get(e)[0].toCss(!0)));})),r):r}_handleMediaKeyup(e){const i=i$4(e);"ArrowLeft"===i&&(e.stopPropagation(),this.viewModel.previous()),"ArrowRight"===i&&(e.stopPropagation(),this.viewModel.next());}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:i,chartDiv:r,mediaInfo:a,colorMap:o}=e,{value:s,type:n}=a,{am4core:l}=i,d=u$2(l);function c(e){e instanceof l.ColorSet&&d&&(e.list=d);}r$3()&&l.useTheme(i.am4themes_dark);const m=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!m.matches?l.useTheme(i.am4themes_animated):l.unuseTheme(i.am4themes_animated),l.useTheme(c);const u="pie-chart"===n?this._createPieChart(e):this._createXYChart(e);r.setAttribute("aria-label",a.altText||a.title),u.data=s.series.map((e=>({[b]:e.tooltip,[C]:e.value,[g$1]:o.get(e.fieldName)}))).filter((e=>"pie-chart"!==n||e.value>0));}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7});}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:a}=i,o=r.create(t,a.PieChart);o.rtl=f$4(this.container);const s=o.series.push(new a.PieSeries);return s.labels.template.disabled=!0,s.ticks.template.disabled=!0,s.dataFields.value=C,s.dataFields.category=b,this._customizeChartTooltip(s.tooltip,r),s.slices.template.tooltipText=o.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%",s.slices.template.propertyFields.fill=g$1,s.slices.template.propertyFields.stroke=g$1,o}_getMinSeriesValue(e){let t=0;return e.forEach((e=>t=Math.min(e.value,t))),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:a}=r,{am4core:o,am4charts:s}=i,n=e.xAxes.push(new s.CategoryAxis);n.dataFields.category=b,n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,o),n.tooltip.events.on("sizechanged",(()=>{n.tooltip.dy=-n.tooltip.contentHeight;}));const l=e.yAxes.push(new s.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=I,l.renderer.maxLabelPosition=y$1,l.min=this._getMinSeriesValue(a.series),this._customizeChartTooltip(l.tooltip,o),d.wrap=!0;const c=e.series.push(new s.ColumnSeries);c.dataFields.valueY=C,c.dataFields.categoryX=b,c.columns.template.propertyFields.fill=g$1,c.columns.template.propertyFields.stroke=g$1,e.cursor=new s.XYCursor,a.series.length>w$1&&(e.scrollbarX=new o.Scrollbar);}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:a}=r,{am4core:o,am4charts:s}=i,n=e.yAxes.push(new s.CategoryAxis);n.dataFields.category=b,n.renderer.inversed=!0,n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,o),n.tooltip.events.on("sizechanged",(()=>{n.tooltip.dx=n.tooltip.contentWidth;}));const l=e.xAxes.push(new s.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=I,l.renderer.maxLabelPosition=y$1,l.min=this._getMinSeriesValue(a.series),this._customizeChartTooltip(l.tooltip,o),d.wrap=!0;const c=e.series.push(new s.ColumnSeries);c.dataFields.valueX=C,c.dataFields.categoryY=b,c.columns.template.propertyFields.fill=g$1,c.columns.template.propertyFields.stroke=g$1,e.cursor=new s.XYCursor,a.series.length>w$1&&(e.scrollbarY=new o.Scrollbar);}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r,colorMap:a}=t,{value:o}=r,{am4core:s,am4charts:n}=i,l=e.xAxes.push(new n.CategoryAxis);l.dataFields.category=b,l.renderer.labels.template.disabled=!0,this._customizeChartTooltip(l.tooltip,s),l.tooltip.events.on("sizechanged",(()=>{l.tooltip.dy=-l.tooltip.contentHeight;}));const d=e.yAxes.push(new n.ValueAxis),c=d.renderer.labels.template;d.renderer.minLabelPosition=I,d.renderer.maxLabelPosition=y$1,d.min=this._getMinSeriesValue(o.series),this._customizeChartTooltip(d.tooltip,s),c.wrap=!0;const m=e.series.push(new n.LineSeries);m.dataFields.categoryX=b,m.dataFields.valueY=C,m.strokeWidth=1;const u=a.get(T);u&&(m.stroke=u);const p=m.bullets.push(new n.CircleBullet);p.propertyFields.fill=g$1,p.propertyFields.stroke=g$1,e.cursor=new n.XYCursor,o.series.length>w$1&&(e.scrollbarX=new s.Scrollbar);}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:a}=r,{am4core:o,am4charts:s}=i,n=o.create(t,s.XYChart);return n.rtl=f$4(this.container),"column-chart"===a&&this._createColumnChart(n,e),"bar-chart"===a&&this._createBarChart(n,e),"line-chart"===a&&this._createLineChart(n,e),n}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null);}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender();}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&"image"===e.type&&e.refreshInterval&&this._setRefreshTimeout(e);}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const a=setInterval((()=>{this._updateMediaInfoTimestamp(i.sourceURL);}),r);this._refreshTimer=a;}_getImageSource(e,t){const i=e.includes("?")?"&":"?",[r,a=""]=e.split("#");return `${r}${i}timestamp=${t}${a?"#":""}${a}`}};e$5([o$5("viewModel.attributes")],x.prototype,"attributes",void 0),e$5([o$5("viewModel.activeMediaInfoIndex")],x.prototype,"activeMediaInfoIndex",void 0),e$5([o$5("viewModel.description")],x.prototype,"description",void 0),e$5([o$5("viewModel.fieldInfoMap")],x.prototype,"fieldInfoMap",void 0),e$5([o$5("viewModel.layer")],x.prototype,"layer",void 0),e$5([o$5("viewModel.mediaInfos")],x.prototype,"mediaInfos",void 0),e$5([o$5("viewModel.popupTemplate")],x.prototype,"popupTemplate",void 0),e$5([o$5("viewModel.relatedInfos")],x.prototype,"relatedInfos",void 0),e$5([o$5("viewModel.title")],x.prototype,"title",void 0),e$5([d$5({type:b$2})],x.prototype,"viewModel",void 0),e$5([d$5(),e$6("esri/widgets/Feature/t9n/Feature")],x.prototype,"messages",void 0),x=e$5([n$4("esri.widgets.Feature.FeatureMedia")],x);const F=x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
function e$1(e,t,l,n){let o=null,p=1e3;"number"==typeof t?(p=t,n=l):(o=t??null,p=l);let r,u=0;const a=()=>{u=0,e.apply(n,r);},c=(...e)=>{o&&o.apply(n,e),r=e,p?u||(u=setTimeout(a,p)):a();};return c.remove=()=>{u&&(clearTimeout(u),u=0);},c.forceUpdate=()=>{u&&(clearTimeout(u),a());},c.hasPendingUpdates=()=>!!u,c}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const s=["$datastore","$map","$layer","$aggregatedfeatures"],n="esri.widgets.Feature.support.arcadeFeatureUtils",o=s$3.getLogger(n);function c$1(e){return "string"==typeof e?te(ee(e)):Array.isArray(e)?p(e):"esri.arcade.Dictionary"===e?.declaredClass?l(e):e}function p(e){return `<ul class="esri-widget__list">${e.map((e=>`<li>${"string"==typeof e?te(ee(e)):e}</li>`)).join("")}</ul>`}function l(e){return `<table class="esri-widget__table">${e.keys().map((r=>{const t=e.field(r);return `<tr><th>${r}</th><td>${"string"==typeof t?te(ee(t)):t}</td></tr>`})).join("")}</table>`}function u$1({aggregatedFeatures:e,arcadeUtils:r,featureSetVars:a,context:i,viewInfo:s,map:n,graphic:o,interceptor:c}){a.forEach((a=>{const p=a.toLowerCase(),l={map:n,spatialReference:s.sr,interceptor:c};if("$map"===p&&(i.vars[p]=r.convertMapToFeatureSetCollection(l)),"$layer"===p&&(i.vars[p]=r.convertFeatureLayerToFeatureSet({layer:o.sourceLayer,spatialReference:s.sr,interceptor:c})),"$datastore"===p&&(i.vars[p]=r.convertServiceUrlToWorkspace({url:o.sourceLayer.url,spatialReference:s.sr,interceptor:c})),"$aggregatedfeatures"===p){const a=o.layer,{fields:n,objectIdField:l,geometryType:u,spatialReference:f,displayField:g}=a,y=new Ke({fields:n,objectIdField:l,geometryType:u,spatialReference:f,displayField:g,..."feature"===a.type?{templates:a.templates,typeIdField:a.typeIdField,types:a.types}:null,source:e});i.vars[p]=r.convertFeatureLayerToFeatureSet({layer:y,spatialReference:s.sr,interceptor:c});}}));}function f(){return import('./arcadeUtils-d51c63c3.js').then(function (n) { return n.t; })}async function g({graphic:e,view:r}){const{isAggregate:t,layer:a}=e;if(!t||!a||"2d"!==r?.type)return [];const i=await r.whenLayerView(a);if(!i.createQuery||!i.queryFeatures)return [];const s=i.createQuery();s.aggregateIds=[e.getObjectId()];const{features:n}=await i.queryFeatures(s);return n}async function y({expressionInfo:e,arcadeUtils:r,interceptor:t,spatialReference:a,map:i,graphic:n,view:c}){if(!e||!e.expression)return null;const p=r.createSyntaxTree(e.expression),l=s.filter((e=>r.hasVariable(p,e))),[f]=await Promise.all([g({graphic:n,view:c}),r.loadScriptDependencies(p,!0,l)]),y=r.getViewInfo({spatialReference:a}),d=r.createExecContext(n,y);d.interceptor=t,d.useAsync=!0,u$1({aggregatedFeatures:f,arcadeUtils:r,featureSetVars:l,context:d,viewInfo:y,map:i,graphic:n,interceptor:t});const m=r.createFunction(p,d);return r.executeAsyncFunction(m,d).catch((r=>o.error("arcade-execution-error",{error:r,graphic:n,expressionInfo:e})))}async function d({expressionInfos:e,spatialReference:t,graphic:a,interceptor:i,map:s,view:n}){if(!e||!e.length)return {};const o=await f(),p={};for(const r of e)p[`expression/${r.name}`]=y({expressionInfo:r,arcadeUtils:o,interceptor:i,spatialReference:t,map:s,graphic:a,view:n});const l=await E$4(p),u={};for(const r in l)u[r]=c$1(l[r].value);return u}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const j=1;let v=class extends(a$5(y$8)){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:e}=this;e&&e.abort(),this._abortController=null;},this._createVM=()=>{const e=this.contentElement?.type;this.contentElementViewModel?.destroy();const t="fields"===e?new n$2:"media"===e?new b$2:"text"===e?new l$3:null;this._set("contentElementViewModel",t);},this._compile=async()=>{this._cancelQuery();const e=new AbortController;this._abortController=e,await this._compileExpression(),this._abortController===e&&(this._abortController=null);},this._compileThrottled=e$1(this._compile,j,this),this._compileExpression=async()=>{const{expressionInfo:e,graphic:t,interceptor:r,spatialReference:n,map:s,view:i,_abortController:l}=this;if(!(e&&t&&n&&s))return void this._set("contentElement",null);const p=await f();if(l!==this._abortController)return;const a=await y({arcadeUtils:p,expressionInfo:e,graphic:t,interceptor:r,map:s,spatialReference:n,view:i});if(!a||"esri.arcade.Dictionary"!==a.declaredClass)return void this._set("contentElement",null);const h=await Me(a,l.signal),u=h?.type,f$1="media"===u?I$5.fromJSON(h):"text"===u?c$c.fromJSON(h):"fields"===u?c$d.fromJSON(h):null;this._set("contentElement",f$1);},this.handles.add([l$6((()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view]),(()=>this._compileThrottled()),h$5),l$6((()=>[this.contentElement]),(()=>this._createVM()),h$5)]);}destroy(){this._cancelQuery(),this.contentElementViewModel?.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null);}get spatialReference(){return this.view?.spatialReference||null}set spatialReference(e){void 0!==e?this._override("spatialReference",e):this._clearOverride("spatialReference");}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:o}=this;return e?"loading":t||o?"ready":"disabled"}get map(){return this.view?.map||null}set map(e){void 0!==e?this._override("map",e):this._clearOverride("map");}};e$5([d$5()],v.prototype,"_abortController",void 0),e$5([d$5({type:i$5})],v.prototype,"expressionInfo",void 0),e$5([d$5({type:g$6})],v.prototype,"graphic",void 0),e$5([d$5({readOnly:!0})],v.prototype,"contentElement",void 0),e$5([d$5({readOnly:!0})],v.prototype,"contentElementViewModel",void 0),e$5([d$5()],v.prototype,"interceptor",void 0),e$5([d$5()],v.prototype,"spatialReference",null),e$5([d$5({readOnly:!0})],v.prototype,"state",null),e$5([d$5()],v.prototype,"map",null),e$5([d$5()],v.prototype,"view",void 0),v=e$5([n$4("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],v);const E$1=v;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const c={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let u=class extends O$1{constructor(e,t){super(e,t),this.viewModel=new E$1;}initialize(){this.own(l$6((()=>this.viewModel?.contentElementViewModel),(()=>this._setupExpressionWidget()),h$5));}destroy(){this._destroyContentWidget();}renderLoading(){return n$5("div",{key:"loading-container",class:c.loadingSpinnerContainer},n$5("span",{class:this.classes(c.iconLoading,c.spinner)}))}render(){const{state:e}=this.viewModel;return n$5("div",{class:c.base},"loading"===e?this.renderLoading():"disabled"===e?null:this._contentWidget?.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null;}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,o=t?.type;this._destroyContentWidget();const s=e?"fields"===o?new c$5({viewModel:e}):"media"===o?new F({viewModel:e}):"text"===o?new l$2({viewModel:e}):null:null;this._contentWidget=s,this.scheduleRender();}};e$5([d$5({type:E$1})],u.prototype,"viewModel",void 0),u=e$5([n$4("esri.widgets.Feature.FeatureExpression")],u);const m=u;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
class e{constructor(e,a){this.preLayerQueryCallback=e,this.preRequestCallback=a,this.preLayerQueryCallback||(this.preLayerQueryCallback=e=>{}),this.preRequestCallback||(this.preLayerQueryCallback=e=>{});}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
var q;const D=1,Q="content-view-models",B="esri.widgets.FeatureViewModel",G=s$3.getLogger(B),H={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let z=q=class extends y$8{constructor(e){super(e),this._handles=new u$7,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=e$1(this._graphicChanged,D,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...H},this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:t}=this;return "attachments"===e.type&&t.attachmentsContent||"custom"===e.type&&t.customContent||"fields"===e.type&&t.fieldsContent||"media"===e.type&&t.mediaContent||"text"===e.type&&t.textContent||"expression"===e.type&&t.expressionContent},this._handles.add(l$6((()=>[this.graphic,this._effectivePopupTemplate,this.abilities]),(()=>this.graphicChangedThrottled()),h$5));}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear();}get _effectivePopupTemplate(){return r$2(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return X(Y(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return j$2(this.graphic)}castAbilities(e){return {...H,...e}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null);}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){void 0!==e?this._override("spatialReference",e):this._clearOverride("spatialReference");}get map(){return this.get("view.map")||null}set map(e){void 0!==e?this._override("map",e):this._clearOverride("map");}get waitingForContent(){return !!this._featureAbortController}setActiveMedia(e,t){const r=this.contentViewModels[e];r instanceof b$2&&r.setActiveMedia(t);}nextMedia(e){const t=this.contentViewModels[e];t instanceof b$2&&t.next();}previousMedia(e){const t=this.contentViewModels[e];t instanceof b$2&&t.previous();}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null);}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal});}catch(r){g$7(r)||(this._error=r,G.error("error","The popupTemplate could not be displayed for this feature.",{error:r,graphic:e,popupTemplate:this._effectivePopupTemplate}));}this._featureAbortController===t&&(this._featureAbortController=null);}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null;}_compileContentElement(e,t){return "attachments"===e.type?this._compileAttachments(e,t):"custom"===e.type?this._compileCustom(e,t):"fields"===e.type?this._compileFields(e,t):"media"===e.type?this._compileMedia(e,t):"text"===e.type?this._compileText(e,t):"expression"===e.type?this._compileExpression(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map(((e,t)=>this._compileContentElement(e,t))):"string"==typeof e?this._compileText(new c$c({text:e}),0).text:e}_destroyContentViewModels(){this._handles?.remove(Q),this.contentViewModels.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set("contentViewModels",[]);}_setExpressionContentVM(e,t){const{formattedAttributes:r}=this,{contentElement:i,contentElementViewModel:o}=e,s=i?.type;o&&s&&("fields"===s&&(this._createFieldsFormattedAttributes({contentElement:i,contentElementIndex:t,formattedAttributes:r}),o.set(this._createFieldsVMParams(i,t))),"media"===s&&(this._createMediaFormattedAttributes({contentElement:i,contentElementIndex:t,formattedAttributes:r}),o.set(this._createMediaVMParams(i,t))),"text"===s&&o.set(this._createTextVMParams(i)));}_compileExpression(e,t){const{expressionInfo:r}=e,{graphic:i,map:o,spatialReference:s,view:n}=this,a=new E$1({expressionInfo:r,graphic:i,interceptor:q.interceptor,map:o,spatialReference:s,view:n});return this.contentViewModels[t]=a,this._handles.add(l$6((()=>a.contentElementViewModel),(()=>this._setExpressionContentVM(a,t)),h$5),Q),e}_compileAttachments(e,t){const{graphic:r}=this,{description:i,title:o}=e;return this.contentViewModels[t]=new c$8({graphic:r,...this._compileTitleAndDesc({title:o,description:i})}),e}_compileCustom(e,t){const{graphic:r}=this,{creator:i,destroyer:o}=e;return this.contentViewModels[t]=new l$3({graphic:r,creator:i,destroyer:o}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:r,_sourceLayer:i,graphic:o,formattedAttributes:s,_expressionAttributes:n}=this,{attributes:a}=o,l=s.global;return {title:$$1({attributes:a,fieldInfoMap:r,globalAttributes:l,expressionAttributes:n,layer:i,text:e}),description:$$1({attributes:a,fieldInfoMap:r,globalAttributes:l,expressionAttributes:n,layer:i,text:t})}}_createFieldsVMParams(e,t){const{_effectivePopupTemplate:r,formattedAttributes:i}=this,o={...i.global,...i.content[t]},s=(e?.fieldInfos||r?.fieldInfos)?.filter((({fieldName:e})=>C$1(e)||ue(e)||o.hasOwnProperty(e))),n=r?.expressionInfos,{description:a,title:l}=e;return {attributes:o,expressionInfos:n,fieldInfos:s,...this._compileTitleAndDesc({title:l,description:a})}}_compileFields(e,t){const r=e.clone(),i=new n$2(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=i,r.fieldInfos=i.formattedFieldInfos.slice(0),r}_createMediaVMParams(e,t){const{abilities:r,graphic:i,_fieldInfoMap:o,formattedAttributes:s,_effectivePopupTemplate:n,relatedInfos:a,_sourceLayer:l,_expressionAttributes:p}=this,{attributes:c}=i,{description:d,mediaInfos:u,title:f}=e;return {abilities:{chartAnimation:r.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:c,layer:l,fieldInfoMap:o,formattedAttributes:{...s.global,...s.content[t]},expressionAttributes:p,mediaInfos:u,popupTemplate:n,relatedInfos:a,...this._compileTitleAndDesc({title:f,description:d})}}_compileMedia(e,t){const r=e.clone(),i=new b$2(this._createMediaVMParams(e,t));return r.mediaInfos=i.formattedMediaInfos.slice(0),this.contentViewModels[t]=i,r}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:r,_sourceLayer:i,_expressionAttributes:o}=this;if(e&&e.text){const{attributes:s}=t,n=this.formattedAttributes.global;e.text=$$1({attributes:s,fieldInfoMap:r,globalAttributes:n,expressionAttributes:o,layer:i,text:e.text});}return {graphic:t,creator:e.text}}_compileText(e,t){const r=e.clone();return this.contentViewModels[t]=new l$3(this._createTextVMParams(r)),r}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:r}=this;if(!e)return;const{lastEditInfoEnabled:i}=e,o=t?.editFieldsInfo;return i&&o?W(o,r.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:r,graphic:i,_expressionAttributes:o}=this,{attributes:s}=i,n=this.formattedAttributes.global;return $$1({attributes:s,fieldInfoMap:t,globalAttributes:n,expressionAttributes:o,layer:r,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,r=e?.title;return x$1(r,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,r=e?.content;return x$1(r,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:r,graphic:i,_effectivePopupTemplate:o,spatialReference:s,map:n,view:a}=this,{content:{value:p},title:{value:c}}=await E$4({content:this._getContent(),title:this._getTitle()});if(t!==this._featureAbortController||!i)return;await ae({graphic:i,popupTemplate:o,layer:r,spatialReference:s},e);const{expressionAttributes:{value:d$1}}=await E$4({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:d({expressionInfos:o?.expressionInfos,spatialReference:s,graphic:i,map:n,interceptor:q.interceptor,view:a})});t===this._featureAbortController&&i&&(this._expressionAttributes=d$1,this._graphicExpressionAttributes={...i.attributes,...d$1},this._set("formattedAttributes",this._createFormattedAttributes(p)),this._set("title",this._compileTitle(c)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(p)||null));}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:r}){const{_effectivePopupTemplate:i,graphic:o,relatedInfos:s,_sourceLayer:n,_fieldInfoMap:a,_graphicExpressionAttributes:l}=this;r.content[t]=ne({fieldInfos:i?.fieldInfos,graphic:o,attributes:{...l,...e.attributes},layer:n,fieldInfoMap:a,relatedInfos:s});}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:r}){if(e.fieldInfos){const{graphic:i,relatedInfos:o,_sourceLayer:s,_fieldInfoMap:n,_graphicExpressionAttributes:a}=this;r.content[t]=ne({fieldInfos:e.fieldInfos,graphic:i,attributes:{...a,...e.attributes},layer:s,fieldInfoMap:n,relatedInfos:o});}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:r,relatedInfos:i,_sourceLayer:o,_fieldInfoMap:s,_graphicExpressionAttributes:n}=this,a=t?.fieldInfos,l={global:ne({fieldInfos:a,graphic:r,attributes:n,layer:o,fieldInfoMap:s,relatedInfos:i}),content:[]};return Array.isArray(e)&&e.forEach(((e,t)=>{"fields"===e.type&&this._createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:l}),"media"===e.type&&this._createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:l});})),l}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:r}=this;return this._queryRelatedInfos(t,Y(r),e)}async _queryRelatedInfos(e,t,r){const{relatedInfos:i,_sourceLayer:o}=this;i.clear();const s=r$2(o.associatedLayer)?await o.associatedLayer.load(r):o;if(!s)return;const a=t.filter((e=>e&&ue(e.fieldName)));if(!a||!a.length)return;t.forEach((e=>this._configureRelatedInfo(e,s)));const l=await b$3({relatedInfos:i,layer:s},r);Object.keys(l).forEach((e=>{const t=i.get(e.toString()),r=l[e]?.value;t&&r&&(t.layerInfo=r.data);}));const p=await R({graphic:e,relatedInfos:i,layer:s},r);Object.keys(p).forEach((e=>{F$1(p[e]?.value,i.get(e.toString()));}));}_configureRelatedInfo(e,t){const{relatedInfos:r}=this,i=d$1(e.fieldName);if(!i)return;const{layerId:o,fieldName:s}=i;if(!o)return;const n=r.get(o.toString())||h$1(o,t);n&&($({relatedInfo:n,fieldName:s,fieldInfo:e}),this.relatedInfos.set(o,n));}};z.interceptor=new e(pe,me),e$5([d$5()],z.prototype,"_error",void 0),e$5([d$5()],z.prototype,"_featureAbortController",void 0),e$5([d$5({readOnly:!0})],z.prototype,"_effectivePopupTemplate",null),e$5([d$5({readOnly:!0})],z.prototype,"_fieldInfoMap",null),e$5([d$5({readOnly:!0})],z.prototype,"_sourceLayer",null),e$5([d$5()],z.prototype,"abilities",void 0),e$5([s$5("abilities")],z.prototype,"castAbilities",null),e$5([d$5({readOnly:!0})],z.prototype,"content",void 0),e$5([d$5({readOnly:!0})],z.prototype,"contentViewModels",void 0),e$5([d$5({type:Boolean})],z.prototype,"defaultPopupTemplateEnabled",void 0),e$5([d$5({readOnly:!0})],z.prototype,"state",null),e$5([d$5({readOnly:!0})],z.prototype,"formattedAttributes",void 0),e$5([d$5({type:g$6,value:null})],z.prototype,"graphic",null),e$5([d$5({readOnly:!0})],z.prototype,"lastEditInfo",void 0),e$5([d$5({readOnly:!0})],z.prototype,"relatedInfos",void 0),e$5([d$5()],z.prototype,"spatialReference",null),e$5([d$5({readOnly:!0})],z.prototype,"title",void 0),e$5([d$5()],z.prototype,"map",null),e$5([d$5({readOnly:!0})],z.prototype,"waitingForContent",null),e$5([d$5()],z.prototype,"view",void 0),z=q=e$5([n$4(B)],z);const J=z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const i=i=>{let c=class extends i{constructor(){super(...arguments),this.renderNodeContent=e=>e$7(e)&&!e.destroyed?n$5("div",{key:e},e.render()):e instanceof HTMLElement?n$5("div",{key:e,bind:e,afterCreate:this._attachToNode}):t$1(e)?n$5("div",{key:e,bind:e.domNode,afterCreate:this._attachToNode}):null;}_attachToNode(e){const r=this;e.appendChild(r);}};return c=e$5([n$4("esri.widgets.Feature.ContentMixin")],c),c};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const _={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},w={title:!0,content:!0,lastEditedInfo:!0};let M=class extends(i(O$1)){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={...w},this.map=null,this.view=null,this.viewModel=new J;}initialize(){this.own(l$6((()=>this.viewModel?.contentViewModels),(()=>this._setupContentWidgets()),h$5));}loadDependencies(){return import('./calcite-notice-e9a27339.js')}destroy(){this._destroyContentWidgets();}castVisibleElements(e){return {...w,...e}}render(){const{state:e}=this.viewModel,t=n$5("div",{class:_.container,key:"container"},this.renderTitle(),"error"===e?this.renderError():"loading"===e?this.renderLoading():this.renderContentContainer());return n$5("div",{class:this.classes(_.base,_.esriWidget)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t);}nextMedia(e){this.viewModel.nextMedia(e);}previousMedia(e){this.viewModel.previousMedia(e);}renderError(){const{messagesCommon:e,messages:t,visibleElements:s}=this;return n$5("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},s.title?n$5("div",{key:"error-title",slot:"title"},e.errorMessage):null,n$5("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return n$5("div",{key:"loading-container",class:_.loadingSpinnerContainer},n$5("span",{class:this.classes(_.iconLoading,_.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?n$5("div",{class:_.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?n$5(n$6,{level:this.headingLevel,class:_.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?n$5("div",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if("string"==typeof e){const e=this._contentWidgets[0];return !e||e.destroyed?null:n$5("div",{key:`${t}-content`},e.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:s}=this;if("boolean"!=typeof s.content&&!s.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:s,attachmentInfos:i}=t.viewModel;return "loading"===s||i.length>0?n$5("div",{key:this._buildKey("attachments-element",e),class:this.classes(_.contentElement)},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return !t||t.destroyed?null:n$5("div",{key:this._buildKey("expression-element",e),class:_.contentElement},t.render())}renderCustom(e,t){const{creator:s}=e,i=this._contentWidgets[t];return !i||i.destroyed?null:s?n$5("div",{key:this._buildKey("custom-element",t),class:_.contentElement},i.render()):null}renderFields(e){const t=this._contentWidgets[e];return !t||t.destroyed?null:n$5("div",{key:this._buildKey("fields-element",e),class:_.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return !t||t.destroyed?null:n$5("div",{key:this._buildKey("media-element",e),class:_.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:s}=this.viewModel;if(!s||!e.lastEditedInfo)return null;const{date:i,user:n}=s,r="edit"===s.type?n?t.lastEditedByUser:t.lastEdited:n?t.lastCreatedByUser:t.lastCreated,o=s$7(r,{date:i,user:n});return n$5("div",{key:"edit-info-element",class:this.classes(_.lastEditedInfo,_.contentElement)},o)}renderText(e,t){const s=e.text,i=this._contentWidgets[t];return !i||i.destroyed?null:s?n$5("div",{key:this._buildKey("text-element",t),class:this.classes(_.contentElement,_.text)},i.render()):null}_buildKey(e,...t){return `${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy());}_destroyContentWidgets(){this._contentWidgets.forEach((e=>this._destroyContentWidget(e))),this._contentWidgets=[];}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,s=this.get("viewModel.content"),{contentViewModels:i}=this.viewModel;if(Array.isArray(s))s.forEach(((s,n)=>{"attachments"===s.type&&(this._contentWidgets[n]=new m$3({displayType:s.displayType,headingLevel:t.title?e+1:e,viewModel:i[n]})),"fields"===s.type&&(this._contentWidgets[n]=new c$5({viewModel:i[n]})),"media"===s.type&&(this._contentWidgets[n]=new F({viewModel:i[n]})),"text"===s.type&&(this._contentWidgets[n]=new l$2({viewModel:i[n]})),"custom"===s.type&&(this._contentWidgets[n]=new l$2({viewModel:i[n]})),"expression"===s.type&&(this._contentWidgets[n]=new m({viewModel:i[n]}));}),this);else {const e=i[0];e&&!e.destroyed&&(this._contentWidgets[0]=new l$2({viewModel:e}));}this.scheduleRender();}};e$5([o$5("viewModel.graphic")],M.prototype,"graphic",void 0),e$5([o$5("viewModel.defaultPopupTemplateEnabled")],M.prototype,"defaultPopupTemplateEnabled",void 0),e$5([d$5()],M.prototype,"headingLevel",void 0),e$5([d$5({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],M.prototype,"label",void 0),e$5([d$5(),e$6("esri/widgets/Feature/t9n/Feature")],M.prototype,"messages",void 0),e$5([d$5(),e$6("esri/t9n/common")],M.prototype,"messagesCommon",void 0),e$5([d$5(),e$6("esri/widgets/support/t9n/uriUtils")],M.prototype,"messagesURIUtils",void 0),e$5([o$5("viewModel.spatialReference")],M.prototype,"spatialReference",void 0),e$5([o$5("viewModel.title")],M.prototype,"title",void 0),e$5([d$5()],M.prototype,"visibleElements",void 0),e$5([s$5("visibleElements")],M.prototype,"castVisibleElements",null),e$5([o$5("viewModel.map")],M.prototype,"map",void 0),e$5([o$5("viewModel.view")],M.prototype,"view",void 0),e$5([d$5({type:J})],M.prototype,"viewModel",void 0),M=e$5([n$4("esri.widgets.Feature")],M);const E=M;

const Feature = /*#__PURE__*/Object.freeze({
	__proto__: null,
	'default': E
});

export { $$2 as $, B$3 as B, D$2 as D, E, F$3 as F, I$4 as I, J, M$3 as M, S$2 as S, Feature as a, d$4 as d, e$1 as e, h$4 as h, i, j$3 as j, l$4 as l, p$8 as p, w$5 as w, x$2 as x, y$7 as y };
