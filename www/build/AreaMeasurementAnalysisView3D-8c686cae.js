import { t, r as r$1, ag as c$5, y as y$2, e as e$2, d as d$3, n as n$5, s as s$1, H as l$2, h as e$3 } from './cast-3d5be210.js';
import { z as z$1, c as c$4, e as e$1, t as t$1, g as g$3, r as r$5 } from './quantityFormatUtils-5575ef5b.js';
import { n as n$9, C, a as n$a } from './LineVisualElement-0571b2ba.js';
import { l as l$1, U as U$2, w as w$1 } from './reactiveUtils-bd6fe823.js';
import { H as Hn, j as jn, y as yn, B as Bn, A as An, C as Ce, x as xn, k as Rn } from './projection-fbd5d346.js';
import { t as te, O as O$1, p as p$1, G as G$2, R as R$2, N, Y, T as T$1, K as K$1, b as R$4 } from './unitUtils-a0a11e54.js';
import { a as o, u as u$3, q as q$2, p, P as P$2, x as x$2, _, z as z$2, b as r, n as n$1, F, k as j$2, e, M as M$1, Q as D$1, B as a$3, al as f$1 } from './mathUtils-559a53d9.js';
import { a, o as o$1, v as v$3, m as m$3, l as l$5, b as v$4 } from './Segment-ff1a2d80.js';
import { r as r$2, m as m$1 } from './vec2-4f9a494f.js';
import { n as n$3 } from './vec2f64-2956001b.js';
import { n as n$2, r as r$3 } from './vec4f64-011248e0.js';
import { k as k$3, j as j$3 } from './Point-edff2a11.js';
import { n as n$4 } from './sphere-4710475c.js';
import { G as G$1 } from './Extent-f27111e1.js';
import { S as S$1 } from './DefaultMaterial_COLOR_GAMMA-ba792f7e.js';
import { geodesicArea as q$3 } from './geometryEngine-4d921600.js';
import { v as v$2 } from './Polyline-dcdb3782.js';
import { y as d$2, d as j$1, E as E$1, K, B as q$4, C as b$1 } from './frustum-95850b85.js';
import { k as i$1 } from './viewpointUtils-4c294048.js';
import { x as x$3 } from './earcut-4e6b97b1.js';
import { c as c$3 } from './vectorStacks-3fa8ee55.js';
import { i, S as S$2, g as g$1, x as x$4, p as p$2 } from './EditGeometryOperations-b01ec575.js';
import { n as n$6 } from './Collection-a38e0489.js';
import { u as u$4 } from './Handles-54afc0a7.js';
import { D, m as m$2 } from './aaBoundingRect-5e1a4e52.js';
import { a as a$1 } from './projectionUtils-5ca56a63.js';
import './intl-54ccdc89.js';
import { j as j$4, x as x$6 } from './mat4-d5df0e58.js';
import { e as e$9 } from './mat4f64-ef2c1a38.js';
import { a as i$2, P as d$4, n as n$7, ak as n$8, f as e$4, J as e$5, q as e$6, g as e$7, h as o$2, E as E$2, t as t$2, a2 as i$3, k as e$8, a3 as d$5, aA as x$5, C as E$4, V as o$3, ah as t$3, ai as o$5, aa as h$2, I as g$2 } from './objectResourceUtils-e575a410.js';
import { O as O$2 } from './VertexAttribute-ef09ced9.js';
import { O as O$3, W, E as E$3, e as l$3, b as a$2, S as S$3, c as c$6, l as l$4 } from './OrderIndependentTransparency-b8c8f539.js';
import { F as i$4, G as o$4, aQ as r$4 } from './SceneView-ed3703c9.js';
import { R as R$3 } from './enums-4770f29d.js';
import { s as s$2 } from './Promise-d2759b2e.js';
import { h as h$3 } from './messages-5e9a4a9e.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
function y$1(o$1,s){const i=s.center;o(i,0,0,0);for(let t=0;t<o$1.length;++t)u$3(i,i,o$1[t]);q$2(i,i,1/o$1.length);let f=0;for(let t=0;t<o$1.length;++t)f=Math.max(f,p(i,o$1[t]));s.radius=Math.sqrt(f);}function M(t,e){if(t.length<3)throw new Error("need at least 3 points to fit a plane");d$2(t[0],t[1],t[2],e);}function b(t,e){return P$2(t,e)+t[3]}function P$1(t,e,n){return Hn(t,R$1,n)&&Hn(e,S,n)?x$2(R$1,S):0}function w(t,e){if(!jn(t,R$1)||!jn(e,S))return 0;const n={distance:null};return z$1(n,[R$1[0],R$1[1]],[S[0],S[1]]),n.distance}function k$2(t,e,n){const r={distance:null};return z$1(r,[t[0],t[1]],[e[0],e[1]],n),r.distance}function q$1(t,e,n,r){const o=G;return yn(t,r,R$1)&&yn(e,r,S)&&yn(n,r,U$1)?(o.setPoint(0,0,R$1),o.setPoint(0,1,S),o.setPoint(0,2,U$1),Math.abs(q$3(o,"square-meters"))):0}function v$1(e,n,r){Math.abs(e[0])>Math.abs(e[1])?o(n,0,1,0):o(n,1,0,0),_(r,e,n),z$2(n,n),_(n,r,e),z$2(r,r);}function x$1(n,r$1=null,s=!0){const a=1e-6,c=(t,e)=>{if(0===e[0]&&0===e[1]&&0===e[2])return !1;for(let n=0;n<t.length;++n)if(P$2(e,t[n])<-a)return !1;return !0};if(0===n.length)return !1;if(1===n.length)return r$1&&r(r$1,n[0]),!0;o(T,0,0,0);for(let t=0;t<n.length;++t)u$3(T,T,n[t]);if(z$2(T,T),c(n,T))return r$1&&r(r$1,T),!0;if(!s)return !1;for(let t=0;t<n.length;++t)for(let e=0;e<n.length;++e)if(t!==e&&(_(T,n[t],n[e]),z$2(T,T),c(n,T)))return r$1&&r(r$1,T),!0;return !1}function E(t){return "mouse"!==t.pointerType||0===t.button}const R$1=n$1(),S=n$1(),U$1=n$1(),G=new v$2({rings:[[R$1,S,U$1]],spatialReference:k$3.WGS84}),T=n$1();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
function h$1(t,r=d$1()){return y(t,r)}function j(t,r=d$1()){return y(t,r,!1)}function y(e,h,j=e.hasZ){const y=i(e.spatialReference),d=te(y);if(t(d))return null;const R=(t,r)=>!(r.length<2)&&(o(t,r[0],r[1],j&&r[2]||0),!0);let U=0;for(const t of e.rings){if(t.length<3)continue;const{positionsWorldCoords:r$1}=h;for(;r$1.length<t.length;)r$1.push(n$1());const o=k$1;for(let n=0;n<3;n++){if(!R(o,t[n]))return null;if(!Bn(o,e.spatialReference,r$1[n],y))return null}if(F(r$1[0],r$1[1])||F(r$1[0],r$1[2])||F(r$1[1],r$1[2]))continue;const i=j$1(r$1[0],r$1[1],r$1[2],E$1()),g=r(c$3.get(),r$1[0]);for(let t=0;t<3;t++)K(i,g,r$1[t],r$1[t]);for(let n=3;n<t.length;n++){if(!R(o,t[n]))return null;Bn(o,e.spatialReference,r$1[n],y),K(i,g,r$1[n],r$1[n]);}const j=v(r$1);for(let t=0;t<j.length;t+=3)U+=S$1(r$1[j[t]],r$1[j[t+1]],r$1[j[t+2]]);}return a(U,d)}const k$1=n$1();function d$1(){return {positionsWorldCoords:[]}}function v(t){return x$3(R(t),[],2)}function R(t){const r=new Float64Array(2*t.length);for(let o=0;o<t.length;++o){const e=t[o],n=2*o;r[n+0]=e[0],r[n+1]=e[1];}return r}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
class H{constructor(e,t){this.positionsWorldCoords=[],this.positionsRenderCoords=[],this.positionsProjectedWorldCoords=[],this.positionsFittedRenderCoords=[],this.positionsGeographic=[],this.positionsSpherical=[],this.positionsStereographic=[],this.pathSegmentLengths=[],this.geodesicPathSegmentLengths=[],this.perimeterSegmentLengths=[],this.intersectingSegments=new Set,this.geodesicIntersectingSegments=new Set,this.areaCentroidWorldCoords=n$1(),this.areaCentroidRenderCoords=n$1(),this.geodesicAreaCentroidRenderCoords=n$1(),this._length=0,this._centroidRenderCoords=n$1(),this._planeWorldCoords=n$2(),this._worldUp=n$1(),this._worldTangent=n$1(),this._frame=[n$1(),n$1(),n$1()],this._pathVersion=-1,this._validMeasurement=!1,this._hasCursorPoint=!1,this._mode=null,this._tempU=n$1(),this._tempV=n$1(),this._tempVec3=n$1(),this._tempSphere={center:n$1(),radius:0},this._sceneView=e,this.unitNormalizer=t;}update(e,s,o,r,n,h,d){const g=this.unitNormalizer,l=this._sceneView.renderSpatialReference,p=this.unitNormalizer.spatialReference,c=r$1(s);if(this._pathVersion===e.version&&this._validMeasurement===r&&!d&&this._hasCursorPoint===c&&this._mode===h){return !e.isValidPolygon&&(this._updateCursorSegmentLength(e,s),!0)}this._pathVersion=e.version,this._validMeasurement=r,this._hasCursorPoint=c;const m=e.numVertices;this._resize(m);const u=O$1(o.spatialReference),_=An(o.spatialReference,u)&&Ce(o.spatialReference),{positionsGeographic:C,positionsWorldCoords:f,positionsRenderCoords:j,positionsSpherical:M}=this;e.forEachVertexPosition(((e,t)=>{X(o.elevationProvider,e),Hn(e,f[t],p),Hn(e,j[t],l),_&&(jn(e,C[t]),Hn(e,M[t],u),z$2(M[t],M[t]));}));const W=this._updatePathLengths(r);if(this.pathLength=this._length>1?o$1(g.normalizeDistance(W),"meters"):null,_){const e=this._updateGeodesicPathLengths(r,p);this.geodesicPathLength=this._length>1?o$1(e,"meters"):null;}else this.geodesicPathLength=null;return this._updateCursorSegmentLength(e,s),this._updateMode(e,h),r?(this._updateArea(o,g,l,p,n),_&&this._updateGeodesicArea(o),!0):(this.area=null,this.geodesicArea=null,this.perimeterLength=null,this.triangleIndices=null,this.geodesicTriangleIndices=null,this.intersectingSegments.clear(),this.geodesicIntersectingSegments.clear(),!0)}getData(){return {positionsWorldCoords:this.positionsWorldCoords,positionsRenderCoords:this.positionsRenderCoords,positionsProjectedWorldCoords:this.positionsProjectedWorldCoords,positionsFittedRenderCoords:this.positionsFittedRenderCoords,positionsGeographic:this.positionsGeographic,positionsSpherical:this.positionsSpherical,positionsStereographic:this.positionsStereographic,pathSegmentLengths:this.pathSegmentLengths,geodesicPathSegmentLengths:this.geodesicPathSegmentLengths,perimeterSegmentLengths:this.perimeterSegmentLengths,intersectingSegments:this.intersectingSegments,geodesicIntersectingSegments:this.geodesicIntersectingSegments,triangleIndices:this.triangleIndices,geodesicTriangleIndices:this.geodesicTriangleIndices,areaCentroidWorldCoords:this.areaCentroidWorldCoords,areaCentroidRenderCoords:this.areaCentroidRenderCoords,geodesicAreaCentroidRenderCoords:this.geodesicAreaCentroidRenderCoords,fittingMode:this.fittingMode,area:this.area,geodesicArea:this.geodesicArea,pathLength:this.pathLength,geodesicPathLength:this.geodesicPathLength,perimeterLength:this.perimeterLength,cursorSegmentLength:this.cursorSegmentLength,geodesicCursorSegmentLength:this.geodesicCursorSegmentLength,unitNormalizer:this.unitNormalizer,actualMeasurementMode:this.actualMeasurementMode}}_resize(e){for(e<this._length&&(this.positionsWorldCoords.length=e,this.positionsRenderCoords.length=e,this.positionsProjectedWorldCoords.length=e,this.positionsFittedRenderCoords.length=e,this.positionsGeographic.length=e,this.positionsSpherical.length=e,this.positionsStereographic.length=e,this.pathSegmentLengths.length=e,this.geodesicPathSegmentLengths.length=e,this.perimeterSegmentLengths.length=e,this._length=e);this._length<e;)this.positionsWorldCoords.push(n$1()),this.positionsRenderCoords.push(n$1()),this.positionsProjectedWorldCoords.push(n$3()),this.positionsFittedRenderCoords.push(n$1()),this.positionsGeographic.push(n$1()),this.positionsSpherical.push(n$1()),this.positionsStereographic.push(n$3()),this.pathSegmentLengths.push(0),this.geodesicPathSegmentLengths.push(0),this.perimeterSegmentLengths.push(0),++this._length;}_updatePathLengths(e){const t=this.positionsWorldCoords,s=this.pathSegmentLengths;let i=0;for(let o=0;o<this._length;++o){const r=s[o]=x$2(t[o],t[(o+1)%this._length]);(o<this._length-1||e)&&(i+=r);}return i}_updateGeodesicPathLengths(e,t){const s=this.positionsGeographic,i=this.geodesicPathSegmentLengths;let o=0;for(let r=0;r<this._length;++r){const n=i[r]=k$2(s[r],s[(r+1)%this._length],t);(r<this._length-1||e)&&(o+=n);}return o}_updateArea(e$1,t,s,n,h){const a$1=e$1.renderCoordsHelper,d=this.positionsWorldCoords,C=this.positionsRenderCoords,f=this.positionsProjectedWorldCoords,S=this.positionsFittedRenderCoords,L=this._planeWorldCoords,P=this._centroidRenderCoords;c$4(C,P),a$1.worldUpAtPosition(P,this._worldUp),a$1.worldBasisAtPosition(P,n$4.X,this._worldTangent),xn(P,this._worldUp,s,this._worldUp,n),xn(P,this._worldTangent,s,this._worldTangent,n),d.length>2&&M(d,L),this.fittingMode=this._selectFittingMode(L,d,this._worldUp,h);let R=0;if("horizontal"===this.fittingMode){let e=-1/0;C.forEach(((t,s)=>{const i=a$1.getAltitude(C[s]);i>e&&(e=i,R=s);}));}const A=d[R];let W=L,v=this._worldTangent;"horizontal"===this.fittingMode?W=this._worldUp:"vertical"===this.fittingMode&&(W=this._tempVec3,v=this._worldUp,q$4(L,this._worldUp,W)),r(this._frame[2],W),q$4(v,W,this._frame[0]),_(this._frame[1],this._frame[0],this._frame[2]),j$2(this._frame[1],this._frame[1]);const z=this._tempVec3,U=this._tempU,I=this._tempV;for(let i=0;i<this._length;++i){const e$1=f[i],t=S[i];e(z,d[i],A),r$2(e$1,P$2(this._frame[0],z),P$2(this._frame[1],z)),q$2(U,this._frame[0],e$1[0]),q$2(I,this._frame[1],e$1[1]),u$3(z,U,I),u$3(z,z,A),Bn(z,n,t,s);}this.perimeterLength=this._length>0?o$1(t.normalizeDistance(this._updatePerimeterLengths()),"meters"):null,c$4(S,this.areaCentroidRenderCoords),Bn(this.areaCentroidRenderCoords,s,this.areaCentroidWorldCoords,n),this._updateIntersectingSegments(),this.area=0===this.intersectingSegments.size?a(t.normalizeArea(this._computeArea()),"square-meters"):null;}_updateGeodesicArea(e){const{renderCoordsHelper:t,spatialReference:s}=e,{positionsSpherical:i,positionsStereographic:n}=this,h=this._tempVec3,a$1=x$1(i,h);if(!a$1)return void(this.geodesicArea=null);const d=this._tempU,g=this._tempV;b$1(h,d,g);for(let o=0;o<this._length;++o){const e=P$2(i[o],d),t=P$2(i[o],g),s=P$2(i[o],h);r$2(n[o],e/s,t/s);}q$2(h,h,p$1(s).radius),t.toRenderCoords(h,O$1(s),this.geodesicAreaCentroidRenderCoords),this._updateGeodesicIntersectingSegments(),this.geodesicArea=a$1&&0===this.geodesicIntersectingSegments.size?a(this._computeGeodesicArea(),"square-meters"):null;}_updatePerimeterLengths(){const e=this.positionsProjectedWorldCoords,t=this.perimeterSegmentLengths;let s=0;for(let i=0;i<this._length;++i){s+=t[i]=m$1(e[i],e[(i+1)%this._length]);}return s}_updateIntersectingSegments(){const e=this.positionsProjectedWorldCoords,t=this.intersectingSegments;t.clear();for(let s=0;s<this._length;++s)for(let i=s+2;i<this._length;++i){if((i+1)%this._length===s)continue;const o=e[s],r=e[(s+1)%this._length],n=e[i],h=e[(i+1)%this._length];G$1(o,r,n,h)&&(t.add(s),t.add(i));}}_computeArea(){const e=this.positionsProjectedWorldCoords,t=this.triangleIndices=new Uint32Array(v(e));let s=0;for(let i=0;i<t.length;i+=3)s+=S$1(e[t[i]],e[t[i+1]],e[t[i+2]]);return s}_updateGeodesicIntersectingSegments(){const e=this.positionsStereographic,t=this.geodesicIntersectingSegments;t.clear();for(let s=0;s<this._length;++s)for(let i=s+2;i<this._length;++i){if((i+1)%this._length===s)continue;const o=e[s],r=e[(s+1)%this._length],n=e[i],h=e[(i+1)%this._length];G$1(o,r,n,h)&&(t.add(s),t.add(i));}}_computeGeodesicArea(){const e=this.positionsGeographic,t=this.positionsStereographic,s=this.geodesicTriangleIndices=new Uint32Array(v(t));let i=0;for(let o=0;o<s.length;o+=3)i+=q$1(e[s[o]],e[s[o+1]],e[s[o+2]],k$3.WGS84);return i}_selectFittingMode(t,s,i,o){const r=s.map((e=>Math.abs(b(t,e)))).reduce(((e,t)=>Math.max(e,t)),0);y$1(s,this._tempSphere);const n=r/(2*this._tempSphere.radius),h=n<o.maxRelativeErrorCoplanar,a=n<o.maxRelativeErrorAlmostCoplanar;let d="horizontal";if(h)d="oblique";else if(a){d=Math.abs(P$2(i,t))>Math.cos(M$1(o.verticalAngleThreshold))?"horizontal":"vertical";}return d}_updateCursorSegmentLength(e,s){const o=e.lastPoint;!e.isValidPolygon&&r$1(o)&&r$1(s)?(this.geodesicCursorSegmentLength=o$1(w(o,s),"meters"),this.cursorSegmentLength=o$1(this.unitNormalizer.normalizeDistance(P$1(o,s,this.unitNormalizer.spatialReference)),"meters")):(this.geodesicCursorSegmentLength=null,this.cursorSegmentLength=null);}_updateMode(e,s){if(s===e$1.Auto){this.actualMeasurementMode="euclidean";let s=0;null!=this.geodesicPathLength&&(s+=this.geodesicPathLength.value),!e.isValidPolygon&&r$1(this.geodesicCursorSegmentLength)&&(s+=this.geodesicCursorSegmentLength.value),s>Z&&(this.actualMeasurementMode="geodesic");}else this.actualMeasurementMode=s===e$1.Euclidean?"euclidean":"geodesic";null==this.geodesicPathLength&&(this.actualMeasurementMode="euclidean"),this._mode=s;}}function X(e,t){t.hasZ||(t.z=c$5(i$1(e,t,"ground"),0));}const Z=1e5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
let u$2=class extends y$2{constructor(e){super(e);}initialize(){const{spatialReference:e}=this.view,t=O$1(e),a=t===G$2?R$2:t,o=!e||An(e,a)?a:e,u=new t$1(o);this._measurementDataManager=new H(this.view,u),this.own([this.analysisViewData.path.on("change",(()=>this._update())),l$1((()=>this.analysisViewData.cursorPoint),(()=>this._update()),U$2),l$1((()=>this.analysisViewData.mode),(()=>this._update()),U$2)]),this._update();}_update(e=!1){const{analysisViewData:t,view:r}=this,s={maxRelativeErrorCoplanar:.005,maxRelativeErrorAlmostCoplanar:.01,verticalAngleThreshold:80};this._measurementDataManager.update(t.path,t.cursorPoint,r,t.validMeasurement,s,t.mode,e)&&(t.measurementData=this._measurementDataManager.getData());}};e$2([d$3({constructOnly:!0})],u$2.prototype,"view",void 0),e$2([d$3({constructOnly:!0})],u$2.prototype,"analysis",void 0),e$2([d$3({constructOnly:!0})],u$2.prototype,"analysisViewData",void 0),u$2=e$2([n$5("esri.views.3d.analysis.AreaMeasurement.support.AreaMeasurementController")],u$2);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const V=s$1.getLogger("esri.views.3d.analysis.AreaMeasurement.support.AreaMeasurement3DPathHelper");let x=class extends n$6.EventedAccessor{constructor(e={}){super(e),this._handles=new u$4,this._version=0,this._internalGeometryChange=!1,this._extent=D();}destroy(){this._handles=l$2(this._handles);}set areaMeasurement(e){this._set("areaMeasurement",e),r$1(e)&&r$1(this.view)&&this._initialize(e,this.view);}set view(e){this._set("view",e),r$1(e)&&r$1(this.areaMeasurement)&&this._initialize(this.areaMeasurement,e);}get initialized(){return r$1(this.areaMeasurement)&&r$1(this.view)}get version(){return this._version}get isValidPolygon(){return this.initialized&&this.editGeometry.components.length>0&&this.editGeometry.components[0].isClosed()}get extent(){if(this.initialized&&this.editGeometry.components.length>0&&this.editGeometry.components[0].vertices.length>0){const e=D(this._extent);return this.forEachVertex((t=>{m$2(e,t.pos);})),e}return null}get spatialReference(){return this.initialized?this.editGeometry.coordinateHelper.spatialReference:null}_initialize(e,t){this._handles.removeAll(),this._handles.add(l$1((()=>e.geometry),(()=>{this._updateEditGeometryFromModelGeometry(e,t);}),w$1)),this._makeDirty(!0);}_makeDirty(e=!1){this.notifyChange("isValidPolygon"),this.notifyChange("initialized"),this.notifyChange("extent"),e&&this.notifyChange("numVertices");}_updateEditGeometryFromModelGeometry(e,t$1){if(this._version++,this._internalGeometryChange)return;this._handles.remove("EditGeometry");let i=e.geometry;if(r$1(i)){const r=Rn(i,t$1.spatialReference);t(r)&&a$1(e,i.spatialReference,V),i=r;}r$1(i)?this._editGeometryOperations=S$2.fromGeometry(i,t$1.state.viewingMode):this._editGeometryOperations=new S$2(new g$1("polygon",x$4(!0,!1,t$1.spatialReference))),this._makeDirty(!0),this.emit("change"),this._handles.add(this.editGeometry.on("change",(t=>{this._makeDirty(null!=t.addedVertices||null!=t.removedVertices),this._internalGeometryChange=!0,e.geometry=this.numVertices>0?this.editGeometry.geometry:null,this._internalGeometryChange=!1;})),"EditGeometry");}get editGeometry(){return this._editGeometryOperations.data}get vertices(){const e=[];return this.forEachVertex((t=>{e.push(t);})),e}get numVertices(){return this.initialized&&this.editGeometry.components.length>0?this.editGeometry.components[0].vertices.length:0}get lastPoint(){if(this.initialized&&this.editGeometry.components.length>0){const e=this.editGeometry.components[0].getLastVertex();if(r$1(e))return this.editGeometry.coordinateHelper.vectorToPoint(e.pos)}return null}getVertex(e){if(!this.initialized||0===this.editGeometry.components.length||0===this.editGeometry.components[0].vertices.length)return null;const t=this.editGeometry.components[0].vertices[0];let i=t;do{if(i.index===e)return i;i=i.rightEdge.rightVertex;}while(i!==t&&null!=i);return null}getVertexPositionAsPoint(e){return this.editGeometry.coordinateHelper.vectorToPoint(e.pos)}getVertexPositionAsPointFromIndex(e){return this.editGeometry.coordinateHelper.vectorToPoint(this.getVertex(e).pos)}forEachVertex(e){this.initialized&&this.editGeometry.components.length>0&&this.editGeometry.components[0].iterateVertices(e);}forEachVertexPosition(e){const t=this.editGeometry.coordinateHelper;this.forEachVertex(((i,r)=>{t.vectorToPoint(i.pos,P),e(P,r);}));}clear(){r$1(this.areaMeasurement)&&(this.areaMeasurement.geometry=null);}add(e){if(!this.initialized)return null;if(0===this.editGeometry.components.length){const e=e$3(this.view);this.editGeometry.components.push(new p$2(e.spatialReference,e.state.viewingMode));}const t=this._editGeometryOperations.appendVertex(this.editGeometry.coordinateHelper.pointToVector(e));return this.emit("change"),t}close(){if(!this.initialized||0===this.editGeometry.components.length)return null;const e=this._editGeometryOperations.closeComponent(this.editGeometry.components[0]);return this.emit("change"),e}ensureContains(e,t=""){let i=!1;if(this.editGeometry.components.forEach((t=>{t.iterateVertices((t=>{t===e&&(i=!0);}));})),!i)throw new Error(`vertex doesnt exist ${t}`);return i}setVertexPosition(e,t){if(!this.initialized)return null;const i=this._editGeometryOperations.setVertexPosition(e,this.editGeometry.coordinateHelper.pointToVector(t));return this.emit("change"),i}equals(e){if(this.numVertices!==e.numVertices)return !1;let t=!0;return this.forEachVertexPosition(((i,r)=>{const o=e.getVertexPositionAsPointFromIndex(r);i.equals(o)||(t=!1);})),!!t}};e$2([d$3({value:null})],x.prototype,"areaMeasurement",null),e$2([d$3({value:null})],x.prototype,"view",null),e$2([d$3()],x.prototype,"isValidPolygon",null),e$2([d$3()],x.prototype,"extent",null),e$2([d$3()],x.prototype,"spatialReference",null),e$2([d$3()],x.prototype,"numVertices",null),x=e$2([n$5("esri.views.3d.analysis.AreaMeasurement.support.AreaMeasurement3DPathHelper")],x);const P=new j$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
function n(n){const c=new i$2;return c.extensions.add("GL_OES_standard_derivatives"),d$4(c,n),c.attributes.add(O$2.POSITION,"vec3"),c.attributes.add(O$2.UV0,"vec2"),c.varyings.add("vUV","vec2"),n.hasMultipassTerrain&&c.varyings.add("depth","float"),c.vertex.code.add(n$7`
    void main(void) {
      vUV = uv0;
      ${n.hasMultipassTerrain?"depth = (view * vec4(position, 1.0)).z;":""}
      gl_Position = proj * view * vec4(position, 1.0);
    }
  `),c.include(n$8,n),c.fragment.uniforms.add(new e$4("size",(e=>e.size))),c.fragment.uniforms.add(new e$5("color1",(e=>e.color1))),c.fragment.uniforms.add(new e$5("color2",(e=>e.color2))),c.fragment.include(e$6),c.fragment.code.add(n$7`
    void main() {
      ${n.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}
      vec2 uvScaled = vUV / (2.0 * size);

      vec2 uv = fract(uvScaled - 0.25);
      vec2 ab = clamp((abs(uv - 0.5) - 0.25) / fwidth(uvScaled), -0.5, 0.5);
      float fade = smoothstep(0.25, 0.5, max(fwidth(uvScaled.x), fwidth(uvScaled.y)));
      float t = mix(abs(ab.x + ab.y), 0.5, fade);

      gl_FragColor = mix(color2, color1, t);
      ${n.transparencyPassType===O$3.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}
    }
  `),c}const c$2=Object.freeze(Object.defineProperty({__proto__:null,build:n},Symbol.toStringTag,{value:"Module"}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
class h extends e$7{initializeProgram(e){const r=h.shader.get().build(this.configuration);return new o$2(e.rctx,r,E$2)}_setPipelineState(e){const r=this.configuration,i=e===O$3.NONE,a=e===O$3.FrontFace;return W({blending:r.transparent?i?g:E$3(e):null,depthTest:{func:l$3(e)},depthWrite:i?r.writeDepth&&a$2:S$3(e),colorWrite:c$6,polygonOffset:i||a?r.polygonOffset&&u$1:{factor:-1,units:-25}})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}}h.shader=new t$2(c$2,(()=>import('./CheckerBoard.glsl-5eb6d3a1.js')));const u$1={factor:0,units:-25},g=l$4(R$3.SRC_ALPHA,R$3.ONE,R$3.ONE_MINUS_SRC_ALPHA,R$3.ONE_MINUS_SRC_ALPHA);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
class s extends i$3{constructor(){super(...arguments),this.transparencyPassType=O$3.NONE,this.transparent=!1,this.writeDepth=!0,this.polygonOffset=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1;}}e$2([e$8({count:O$3.COUNT})],s.prototype,"transparencyPassType",void 0),e$2([e$8()],s.prototype,"transparent",void 0),e$2([e$8()],s.prototype,"writeDepth",void 0),e$2([e$8()],s.prototype,"polygonOffset",void 0),e$2([e$8()],s.prototype,"hasMultipassTerrain",void 0),e$2([e$8()],s.prototype,"cullAboveGround",void 0);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
class l extends d$5{constructor(e){super(e,new f),this.techniqueConfig=new s;}dispose(){}getConfiguration(e,r){return this.techniqueConfig.transparent=this.parameters.transparent,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.polygonOffset=this.parameters.polygonOffset,this.techniqueConfig.transparencyPassType=r?r.transparencyPassType:O$3.NONE,this.techniqueConfig.hasMultipassTerrain=!!r&&r.multipassTerrain.enabled,this.techniqueConfig.cullAboveGround=!!r&&r.multipassTerrain.cullAboveGround,this.techniqueConfig}intersect(e,t,r,i,s,n,o){return x$5(e,t,i,s,n,void 0,o)}requiresSlot(e){let t=E$4.OPAQUE_MATERIAL;return this.parameters.transparent&&(t=this.parameters.writeDepth?E$4.TRANSPARENT_MATERIAL:E$4.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL),e===t||e===E$4.DRAPED_MATERIAL}createGLMaterial(t){return t.output===o$3.Color||t.output===o$3.Alpha?new c$1(t):null}createBufferWriter(){return new i$4(o$4)}}class c$1 extends t$3{beginSlot(e){return this.ensureTechnique(h,e)}}class f extends o$5{constructor(){super(...arguments),this.size=[1,1],this.color1=[.75,.75,.75,1],this.color2=[.5,.5,.5,1],this.transparent=!1,this.writeDepth=!0,this.polygonOffset=!1;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
class m extends n$9{constructor(e){super(e),this._checkerBoardMaterial=null,this._renderOccluded=h$2.OccludeAndTransparent,this._geometry=null,this._size=[1,1],this._color1=r$3(1,.5,0,.5),this._color2=r$3(1,1,1,.5),this.applyProps(e);}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial());}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this._geometryChanged();}get size(){return this._size}set size(e){this._size=e,this._updateMaterial();}get color1(){return this._color1}set color1(e){D$1(e,this._color1)||(a$3(this._color1,e),this._updateMaterial());}get color2(){return this._color2}set color2(e){D$1(e,this._color2)||(a$3(this._color2,e),this._updateMaterial());}_updateMaterial(){r$1(this._checkerBoardMaterial)&&this._checkerBoardMaterial.setParameters({size:this._size,color1:this._color1,color2:this._color2,renderOccluded:this._renderOccluded});}createExternalResources(){this._checkerBoardMaterial=new l({size:this._size,color1:this._color1,color2:this._color2,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:h$2.OccludeAndTransparent});}destroyExternalResources(){this._checkerBoardMaterial=null;}forEachExternalMaterial(r){r$1(this._checkerBoardMaterial)&&r(this._checkerBoardMaterial);}createGeometries(e$1){if(t(this._geometry)||t(this._checkerBoardMaterial))return;const i=u;j$4(i,this.transform);const c=this._geometry,a=[],l=n$1();c.position.forEach((e$1=>{e(l,e$1,i),a.push(l[0],l[1],l[2]);}));const n=[];c.uv.forEach((e=>{n.push(e[0],e[1]);}));const _=new g$2([[O$2.POSITION,{size:3,data:a,exclusive:!0}],[O$2.UV0,{size:2,data:n,exclusive:!0}]],[[O$2.POSITION,c.triangleIndices],[O$2.UV0,c.triangleIndices]]);e$1.addGeometry(_,this._checkerBoardMaterial);}_geometryChanged(){this.recreateGeometry();}}const u=n$1();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
let O=class extends y$2{constructor(e){super(e),this._handles=new u$4,this._params={...z},this._path=null,this._intersectedPath=null,this._perimeter=null,this._intersectedPerimeter=null,this._projectionLines=null,this._measurementArea=null,this._areaLabel=null,this._pathLengthLabel=null,this._cursorSegmentLengthLabel=null,this._perimeterLengthLabel=null,this._pathSegments=[],this._perimeterSegments=[],this._cursorSegment=null,this._origin=n$1(),this._originTransform=e$9(),this._cursorPositionRenderSpace=n$1(),this.messages=null,this.viewData=q,this.areaLabel=null,this.perimeterLengthLabel=null,this.loadingMessages=!0;}get visible(){return this.analysisViewData.visible}get testData(){return {labels:{area:this._areaLabel,pathLength:this._pathLengthLabel,cursorSegmentLength:this._cursorSegmentLengthLabel,perimeterLength:this._perimeterLengthLabel}}}initialize(){const{analysisViewData:e,_params:t,view:i}=this;this._path=new C({view:i,attached:!0,width:t.pathLineWidth,color:t.pathLineColor,polygonOffset:!0,renderOccluded:h$2.OccludeAndTransparent}),this._intersectedPath=new C({view:i,attached:!0,width:t.pathLineWidth,color:t.intersectingLineColor,polygonOffset:!0,renderOccluded:h$2.OccludeAndTransparent}),this._perimeter=new C({view:i,attached:!0,width:t.perimeterLineWidth,color:t.perimeterLineColor,polygonOffset:!0,renderOccluded:h$2.OccludeAndTransparent}),this._intersectedPerimeter=new C({view:i,attached:!0,width:t.perimeterLineWidth,color:t.intersectingLineColor,polygonOffset:!0,renderOccluded:h$2.OccludeAndTransparent}),this._projectionLines=new C({view:i,attached:!0,width:t.projectionLineWidth,color:t.projectionLineColor,stipplePattern:r$4(t.projectionLineStippleSize),polygonOffset:!0,renderOccluded:h$2.OccludeAndTransparent}),this._measurementArea=new m({view:i,attached:!0,color1:t.areaColor1,color2:t.areaColor2}),this._areaLabel=new v$3({view:i,attached:!0,fontSize:U.Large}),this._pathLengthLabel=new v$3({view:i,attached:!0,fontSize:U.Small}),this._cursorSegmentLengthLabel=new v$3({view:i,attached:!0,fontSize:U.Small}),this._perimeterLengthLabel=new v$3({view:i,attached:!0,fontSize:U.Small}),this._handles.add([l$1((()=>[e.mode,this.visible,e.unit,e.measurementData,e.cursorPoint]),(()=>this._update()),w$1),l$1((()=>i.state?.camera),(()=>this._updateLabels()),w$1),s$2((async()=>this._updateMessageBundle()))]),this._updateMessageBundle();}destroy(){this._measurementArea=l$2(this._measurementArea),this._path=l$2(this._path),this._intersectedPath=l$2(this._intersectedPath),this._perimeter=l$2(this._perimeter),this._intersectedPerimeter=l$2(this._intersectedPerimeter),this._areaLabel=l$2(this._areaLabel),this._pathLengthLabel=l$2(this._pathLengthLabel),this._cursorSegmentLengthLabel=l$2(this._cursorSegmentLengthLabel),this._perimeterLengthLabel=l$2(this._perimeterLengthLabel),this._projectionLines=l$2(this._projectionLines),this._handles=l$2(this._handles),this.set("view",null);}_update(){if(this.destroyed||!this.view.ready||!this.view.renderCoordsHelper)return;const{analysisViewData:{measurementData:e},analysisViewData:t$1}=this;t(e)||(this._updateViewData(e,t$1.path,t$1.cursorPoint),this._updateOrigin(),this._updatePathSegments(),this._updatePerimeterSegments(),this._updateArea(),this._updateProjectionLines(),this._updateLabels());}_updateViewData(e,t,i){const r=t.isValidPolygon,n="geodesic"===e.actualMeasurementMode,a=n?e.geodesicArea:e.area;let o=1;if(a){const t=this._toPreferredAreaUnit(a,this.analysisViewData.unit);o=f$1(Math.sqrt(t.value)/Math.sqrt(300)),o*=Math.sqrt(N(1,t.unit,"square-meters")),o/=e.unitNormalizer.normalizeDistance(1);}const l={validMeasurement:r,path:t,pathVersion:t.version,cursorPoint:i,measurementData:e,mode:e.actualMeasurementMode,positionsGeographic:e.positionsGeographic,positionsRenderCoords:e.positionsRenderCoords,positionsProjected:e.positionsProjectedWorldCoords,positionsFittedRenderCoords:e.positionsFittedRenderCoords,intersectingSegments:n?e.geodesicIntersectingSegments:e.intersectingSegments,triangleIndices:n?e.geodesicTriangleIndices:e.triangleIndices,fittingMode:e.fittingMode,areaCentroid:n?e.geodesicAreaCentroidRenderCoords:e.areaCentroidRenderCoords,pathLengthLabelSegmentIndex:r?0:t.numVertices-2,perimeterLengthLabelSegmentIndex:0,checkerSize:o};this._set("viewData",l);}_updateOrigin(){const e=this.viewData;c$4(e.positionsRenderCoords,this._origin),x$6(this._originTransform,this._origin),this._measurementArea.transform=this._originTransform,this._projectionLines.transform=this._originTransform;}_createSegments(e){const t=this.viewData,i=t.path,s=this.view.renderCoordsHelper.spatialReference,r=t.mode,n=[],a=[],o=[],l=t.validMeasurement?i.numVertices:i.numVertices-1;for(let h=0;h<l;++h){const l=t[e][h],c=t[e][(h+1)%i.numVertices];let m=null;switch(r){case"euclidean":m=new l$5(l,c);break;case"geodesic":m=new m$3(l,c,s);}t.intersectingSegments.has(h)?o.push(m):a.push(m),n.push(m);}return {all:n,nonIntersecting:a,intersecting:o}}_updatePathSegments(){const{view:{renderCoordsHelper:e},viewData:t,visible:i}=this,s=this._createSegments("positionsRenderCoords"),{cursorPoint:r,mode:n,path:o}=t,l=!o.isValidPolygon,h=e.spatialReference;if(this._cursorSegment=null,o.numVertices>0&&l&&r$1(r)){if(e.toRenderCoords(r,this._cursorPositionRenderSpace)){const e=t.positionsRenderCoords[o.numVertices-1],i=this._cursorPositionRenderSpace;let r=null;switch(n){case"euclidean":r=new l$5(e,i);break;case"geodesic":r=new m$3(e,i,h);}s.nonIntersecting.push(r),this._cursorSegment=r;}}this._path.setGeometryFromSegments(s.nonIntersecting,this._origin),this._path.visible=i,this._intersectedPath.setGeometryFromSegments(s.intersecting,this._origin),this._intersectedPath.visible=i,this._pathSegments=s.all;}_updatePerimeterSegments(){const e=this.visible&&"euclidean"===this.viewData.mode,t=this._createSegments("positionsFittedRenderCoords");this._perimeter.setGeometryFromSegments(t.nonIntersecting,this._origin),this._perimeter.visible=e,this._intersectedPerimeter.setGeometryFromSegments(t.intersecting,this._origin),this._intersectedPerimeter.visible=e,this._perimeterSegments=t.all;}_updateArea(){const e=this.viewData;switch(e.mode){case"euclidean":this._updateAreaEuclidean(e);break;case"geodesic":this._updateAreaGeodesic();}}_updateAreaEuclidean(e){const t=this.visible;e.validMeasurement&&0===e.intersectingSegments.size&&e.triangleIndices?(this._measurementArea.geometry={uv:e.positionsProjected,position:e.positionsFittedRenderCoords,triangleIndices:e.triangleIndices},this._measurementArea.size=[e.checkerSize,e.checkerSize],this._measurementArea.visible=t):this._measurementArea.visible=!1;}_updateAreaGeodesic(){this._measurementArea.visible=!1;}_updateProjectionLines(){const e$1=this.viewData,t=this.visible,i=e$1.path,s=e$1.mode;if(i.numVertices>0&&e$1.validMeasurement&&"euclidean"===s){const s=[];for(let t=0;t<i.numVertices;++t){const i=n$1();e(i,e$1.positionsRenderCoords[t],this._origin);const r=n$1();e(r,e$1.positionsFittedRenderCoords[t],this._origin),s.push([i,r]);}this._projectionLines.geometry=s,this._projectionLines.visible=t;}else this._projectionLines.geometry=null,this._projectionLines.visible=!1;}_updateLabels(){if(this.destroyed)return;const{viewData:e}=this,{measurementData:t,mode:i,path:s}=e;if(!s)return;const r=!s.isValidPolygon,n=this.visible,l=this._formatAreaLabel(this.messages,"geodesic"===i?t.geodesicArea:t.area,this.analysisViewData.unit);r$1(l)?(this._areaLabel.geometry={type:"point",point:e.areaCentroid},this._areaLabel.text=l,this._areaLabel.visible=e.validMeasurement&&0===e.intersectingSegments.size&&n):this._areaLabel.visible=!1,this._set("areaLabel",e$3(l));const h=this._formatLengthLabel(this.messages,"geodesic"===i?t.geodesicPathLength:t.pathLength,this.analysisViewData.unit);if(r$1(h)&&e.pathLengthLabelSegmentIndex>=0&&e.pathLengthLabelSegmentIndex<this._pathSegments.length){const t=this._pathSegments[e.pathLengthLabelSegmentIndex],i=r$1(this._cursorSegment)?this._cursorSegment:k;this._pathLengthLabel.distance=this._params.labelDistance,this._pathLengthLabel.geometry={type:"corner",left:t,right:i},this._pathLengthLabel.text=h,this._pathLengthLabel.visible=r&&s.numVertices>0&&n;}else this._pathLengthLabel.visible=!1;const c="geodesic"===i?e.measurementData.geodesicCursorSegmentLength:e.measurementData.cursorSegmentLength;if(r$1(c)){const e=this._formatLengthLabel(this.messages,c,this.analysisViewData.unit);this._cursorSegmentLengthLabel.distance=this._params.labelDistance,this._cursorSegmentLengthLabel.geometry=r$1(this._cursorSegment)?{type:"segment",segment:this._cursorSegment,sampleLocation:"end"}:null,this._cursorSegmentLengthLabel.anchor="bottom",this._cursorSegmentLengthLabel.text=e$3(e),this._cursorSegmentLengthLabel.visible=r&&0!==c.value&&n;}else this._cursorSegmentLengthLabel.visible=!1;this._cursorSegmentLengthLabel.overlaps(this._pathLengthLabel)&&(this._cursorSegmentLengthLabel.visible=!1),this._pathLengthLabel.overlaps(this._areaLabel)&&(this._pathLengthLabel.visible=!1);const m="geodesic"===e.mode,d=m?t.geodesicPathLength:t.perimeterLength,p=this._formatLengthLabel(this.messages,d,this.analysisViewData.unit);if(this._set("perimeterLengthLabel",e$3(p)),e.validMeasurement&&0===e.intersectingSegments.size){this._perimeterLengthLabel.distance=this._params.labelDistance,this._perimeterLengthLabel.anchor="top",this._perimeterLengthLabel.text=e$3(p),this._perimeterLengthLabel.visible=!0;let t=!0;for(let i=0;i<e.path.numVertices;++i){const s=(e.perimeterLengthLabelSegmentIndex+i)%e.path.numVertices,r=m?this._pathSegments[s]:this._perimeterSegments[s];if(t=!0,this._perimeterLengthLabel.geometry={type:"segment",segment:r,sampleLocation:"center"},!this._perimeterLengthLabel.overlaps(this._areaLabel))break;t=!1;}this._perimeterLengthLabel.visible=t&&n;}else this._perimeterLengthLabel.visible=!1;}_toPreferredAreaUnit(e,t){return v$4(e,this._preferredAreaUnit(e,t))}_preferredAreaUnit(e,t){switch(t){case"metric":return T$1(e.value,e.unit);case"imperial":return Y(e.value,e.unit);default:return t}}_preferredLengthUnit(e,t){const i=this._deriveLengthUnitFromAreaUnit(t);switch(i){case"metric":return R$4(e.value,e.unit);case"imperial":return K$1(e.value,e.unit);default:return i}}_deriveLengthUnitFromAreaUnit(e){switch(e){case"metric":case"ares":case"hectares":return "metric";case"imperial":case"acres":return "imperial";case"square-inches":return "inches";case"square-feet":return "feet";case"square-yards":return "yards";case"square-miles":return "miles";case"square-us-feet":return "us-feet";case"square-millimeters":return "millimeters";case"square-centimeters":return "centimeters";case"square-decimeters":return "decimeters";case"square-meters":return "meters";case"square-kilometers":return "kilometers"}throw new Error("unhandled area unit")}_formatAreaLabel(e,t,i){return e&&t&&g$3(e,t,this._preferredAreaUnit(t,i))}_formatLengthLabel(e,t,i){return e&&t&&g$3(e,t,this._preferredLengthUnit(t,i))}_updateMessageBundle(){this.loadingMessages=!0,h$3("esri/core/t9n/Units").then((e=>{this.messages=e,this.view&&this._update();})).finally((()=>{this.loadingMessages=!1;}));}};var U;e$2([d$3()],O.prototype,"view",void 0),e$2([d$3()],O.prototype,"messages",void 0),e$2([d$3()],O.prototype,"analysis",void 0),e$2([d$3()],O.prototype,"viewData",void 0),e$2([d$3()],O.prototype,"analysisViewData",void 0),e$2([d$3({readOnly:!0})],O.prototype,"areaLabel",void 0),e$2([d$3({readOnly:!0})],O.prototype,"perimeterLengthLabel",void 0),e$2([d$3()],O.prototype,"loadingMessages",void 0),e$2([d$3()],O.prototype,"visible",null),O=e$2([n$5("esri.views.3d.analysis.AreaMeasurement.support.AreaMeasurementVisualization")],O),function(e){e[e.Small=12]="Small",e[e.Large=16]="Large";}(U||(U={}));const z={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:1,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,handleRadiusHovered:10,handleRadiusMouse:10,handleRadiusTouch:25,pathLineColor:[1,.5,0,1],pathLineWidth:3,intersectingLineColor:[1,.2,0,1],perimeterLineColor:[1,.5,0,1],perimeterLineWidth:2,projectionLineColor:[1,.5,0,1],projectionLineWidth:2,projectionLineStippleSize:5,areaColor1:[1,.5,0,.5],areaColor2:[1,1,1,.5],fillColor:[1,.5,0,.5],lineSubdivisions:64,labelDistance:25},q={validMeasurement:!1,path:null,pathVersion:-1,cursorPoint:null,measurementData:null,mode:null,positionsGeographic:null,positionsRenderCoords:null,positionsProjected:null,positionsFittedRenderCoords:null,intersectingSegments:null,triangleIndices:null,fittingMode:null,areaCentroid:null,pathLengthLabelSegmentIndex:null,perimeterLengthLabelSegmentIndex:null,checkerSize:null},k=new l$5(n$1(),n$1());

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
let d=class extends(n$a(y$2)){constructor(e){super(e),this.type="area-measurement-view-3d",this.analysis=null,this.measurementData=null,this.lastDraggedVertex=null,this.cursorPoint=null,this.mode=e$1.Auto;}initialize(){const{analysis:e,view:t}=this;this.path=new x({view:t,areaMeasurement:e}),this.analysisVisualization=new O({view:t,analysis:e,analysisViewData:this}),this.analysisController=new u$2({view:t,analysis:e,analysisViewData:this});}destroy(){this.analysisController=l$2(this.analysisController),this.analysisVisualization=l$2(this.analysisVisualization),this.path.destroy();}get updating(){return !!this.analysisVisualization?.loadingMessages}get result(){const{measurementData:e}=this;return t(e)?{area:null,mode:null,perimeter:null}:"euclidean"===e.actualMeasurementMode?{area:e.area,perimeter:e.perimeterLength,mode:"euclidean"}:{area:e.geodesicArea,perimeter:e.pathLength,mode:"geodesic"}}get viewData(){return this.analysisVisualization.viewData}get validMeasurement(){return this.path.isValidPolygon}get unit(){return c$5(this.analysis.unit,this._defaultUnit)}get testData(){return {visualization:this.analysisVisualization,controller:this.analysisController}}};e$2([d$3({readOnly:!0})],d.prototype,"type",void 0),e$2([d$3({constructOnly:!0,nonNullable:!0})],d.prototype,"analysis",void 0),e$2([d$3()],d.prototype,"updating",null),e$2([d$3()],d.prototype,"analysisVisualization",void 0),e$2([d$3()],d.prototype,"analysisController",void 0),e$2([d$3()],d.prototype,"result",null),e$2([d$3()],d.prototype,"measurementData",void 0),e$2([d$3()],d.prototype,"viewData",null),e$2([d$3()],d.prototype,"validMeasurement",null),e$2([d$3()],d.prototype,"path",void 0),e$2([d$3()],d.prototype,"lastDraggedVertex",void 0),e$2([d$3()],d.prototype,"cursorPoint",void 0),e$2([d$3()],d.prototype,"mode",void 0),e$2([d$3()],d.prototype,"unit",null),e$2([d$3(r$5)],d.prototype,"_defaultUnit",void 0),d=e$2([n$5("esri.views.3d.analysis.AreaMeasurementAnalysisView3D")],d);const c=d;

const AreaMeasurementAnalysisView3D = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': c
});

export { AreaMeasurementAnalysisView3D as A, n };
