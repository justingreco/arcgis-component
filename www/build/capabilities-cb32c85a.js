import { t, r } from './cast-3d5be210.js';
import { i as i$1, o, l as l$1 } from './context-util-5ae1bf7b.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
let n,a;function l(t){const e=i$1(t);for(;e.length>1;){const t=u(e.shift());if(t.available)return t}return u(e.shift())}function u(t){switch(t){case o.WEBGL1:return i();case o.WEBGL2:return p()}}function i(){return n||(n=x()),n}function p(){return a||(a=d()),a}class f{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1;}}class c extends f{constructor(){super(...arguments),this.type=o.WEBGL1;}}class E extends f{constructor(){super(...arguments),this.type=o.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0;}}function _(r$1,n){if(r$1===o.WEBGL1&&void 0===typeof WebGLRenderingContext||r$1===o.WEBGL2&&void 0===typeof WebGL2RenderingContext)return null;const a=document.createElement("canvas");if(!a)return null;let l=l$1(a,r$1,{failIfMajorPerformanceCaveat:!0});if(t(l)&&(l=l$1(a,r$1),r(l)&&(n.majorPerformanceCaveat=!0)),t(l))return l;if(r$1===o.WEBGL1){const t=l.getParameter(l.VERSION)?.match(/^WebGL\s+([\d.]*)/);if(t){const e=parseFloat(t[1]);n.available=e>=.94;}}else n.available=!0;n.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),n.supportsVertexShaderSamplers=l.getParameter(l.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const u=l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,l.HIGH_FLOAT);return u&&(n.supportsHighPrecisionFragment=u.precision>0),l}function x(){const e=new c,r=_(o.WEBGL1,e);return t(r)||(e.supportsElementIndexUint=null!==r.getExtension("OES_element_index_uint"),e.supportsStandardDerivatives=null!==r.getExtension("OES_standard_derivatives"),e.supportsInstancedArrays=null!==r.getExtension("ANGLE_instanced_arrays"),e.supportsTextureFloat=null!==r.getExtension("OES_texture_float"),e.supportsTextureHalfFloat=null!==r.getExtension("OES_texture_half_float"),e.supportsColorBufferFloat=null!==r.getExtension("WEBGL_color_buffer_float"),e.supportsColorBufferFloatBlend=null!==r.getExtension("EXT_float_blend"),e.supportsColorBufferHalfFloat=null!==r.getExtension("EXT_color_buffer_half_float")),e}function d(){const e=new E,r=_(o.WEBGL2,e);return t(r)||(e.supportsColorBufferFloat=null!==r.getExtension("EXT_color_buffer_float"),e.supportsColorBufferFloatBlend=null!==r.getExtension("EXT_float_blend"),e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||null!==r.getExtension("EXT_color_buffer_half_float")),e}

export { l };
