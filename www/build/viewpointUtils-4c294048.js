import { e, d as d$3, n as n$5, s as s$4, m as m$3, r as r$5, ag as c$a, t as t$6, aQ as D$1, a as s$8, E as E$4, h as e$3 } from './cast-3d5be210.js';
import { l as l$3 } from './JSONSupport-dce2c67b.js';
import { r as r$1 } from './enumeration-6695a859.js';
import { S as S$1, o as o$1, r as r$2, j as j$2, k as k$2, R as R$3, M as M$4, g as g$3, p as p$f } from './Point-edff2a11.js';
import { l as l$4 } from './Color-25ce730a.js';
import { p as p$8 } from './symbols-ab3e849a.js';
import { d as d$5, u as u$8 } from './Viewpoint-e3d4029a.js';
import './geometry-2f332a26.js';
import { g as g$4 } from './Graphic-93f45ded.js';
import { a as a$5 } from './asyncUtils-96c00c9e.js';
import { i as i$a, o as o$5, s as s$7 } from './Cyclical-922b1741.js';
import { a as a$6, o as o$6 } from './mat3-eb8de168.js';
import { e as e$4 } from './quatf64-06b7eadd.js';
import { e as e$2, o as o$4 } from './mat4f64-ef2c1a38.js';
import { n as n$6, g as t$5, b as r$3, q as q$2, u as u$5, a as o$2, x as x$2, s as s$5, H as H$4, h as l$5, P as P$2, e as e$1, F as F$2, L as L$2, z as z$3, v as v$3, r as r$4, A as A$4, w as w$2, i as b$4, p as p$c, _ as _$3, m as m$4, M as M$2, c as b$7, k as j$3, U as U$3, O as O$2 } from './mathUtils-559a53d9.js';
import { H as Hn, B as Bn, I as In, r as rn, U as Un, q as qn } from './projection-fbd5d346.js';
import { B as B$2, p as p$e, S as S$2, G as G$2, h as h$5, f as f$4, I as I$3, N as N$2, y as y$5, a as a$7 } from './aaBoundingBox-b312516d.js';
import { b as b$5, H as H$5, u as u$9 } from './aaBoundingRect-5e1a4e52.js';
import { p as p$9, E as E$3, A as A$2, O as O$1, Z as Z$2, F as F$1, q as q$3, x as x$3, U as U$2, z as z$2, J as J$2, L as L$3, a as U$4 } from './frustum-95850b85.js';
import { p as p$d } from './unitUtils-a0a11e54.js';
import { h as h$4, o as o$3, p as p$a, n as n$8, R as R$2, b as b$6, f as f$3 } from './mat4-d5df0e58.js';
import { n as n$9 } from './vec4f64-011248e0.js';
import { f as f$2, h as h$3, n as n$7, d as d$4, p as p$b, l as l$6 } from './sphere-4710475c.js';
import { l as l$2 } from './ViewingMode-4a1cffad.js';
import { c as c$9, s as s$6 } from './vectorStacks-3fa8ee55.js';
import { A as A$3, b as b$3, v as v$4 } from './lineSegment-99193ade.js';
import { u as u$6, y as y$4, a as u$7 } from './utils-eafc976f.js';
import { i as i$b } from './scaleUtils-c3d4b164.js';
import { M as M$3 } from './Extent-f27111e1.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
function r(r,S){return null!=r&&(null==S||(S===l$2.Local?!r.isGeographic||(r.isWGS84||r.wkid===S$1.CGCS2000):r.isWebMercator||r.isWGS84||r.wkid===S$1.CGCS2000||r.wkid===S$1.GCSMARS2000||r.wkid===S$1.GCSMARS2000_SPHERE||r.wkid===S$1.GCSMOON2000))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
var p$7;let c$8=p$7=class extends l$3{constructor(r){super(r),this.type="sunny",this.cloudCover=.5;}clone(){return new p$7({cloudCover:this.cloudCover})}};e([r$1({sunny:"sunny"})],c$8.prototype,"type",void 0),e([d$3({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c$8.prototype,"cloudCover",void 0),c$8=p$7=e([n$5("esri.views.3d.environment.SunnyWeather")],c$8);const n$4=c$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
var c$7;let p$6=c$7=class extends l$3{constructor(o){super(o),this.type="cloudy",this.cloudCover=.5;}clone(){return new c$7({cloudCover:this.cloudCover})}};e([r$1({cloudy:"cloudy"})],p$6.prototype,"type",void 0),e([d$3({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p$6.prototype,"cloudCover",void 0),p$6=c$7=e([n$5("esri.views.3d.environment.CloudyWeather")],p$6);const u$4=p$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
var p$5;let c$6=p$5=class extends l$3{constructor(r){super(r),this.type="foggy",this.fogStrength=.5;}clone(){return new p$5({fogStrength:this.fogStrength})}};e([r$1({foggy:"foggy"})],c$6.prototype,"type",void 0),e([d$3({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c$6.prototype,"fogStrength",void 0),c$6=p$5=e([n$5("esri.views.3d.environment.FoggyWeather")],c$6);const n$3=c$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
var i$9;let p$4=i$9=class extends l$3{constructor(r){super(r),this.type="rainy",this.cloudCover=.5,this.precipitation=.5;}clone(){return new i$9({cloudCover:this.cloudCover,precipitation:this.precipitation})}};e([r$1({rainy:"rainy"})],p$4.prototype,"type",void 0),e([d$3({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p$4.prototype,"cloudCover",void 0),e([d$3({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p$4.prototype,"precipitation",void 0),p$4=i$9=e([n$5("esri.views.3d.environment.RainyWeather")],p$4);const c$5=p$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
var i$8;let p$3=i$8=class extends l$3{constructor(o){super(o),this.type="snowy",this.cloudCover=.5,this.precipitation=.5,this.snowCover="disabled";}clone(){return new i$8({cloudCover:this.cloudCover,precipitation:this.precipitation,snowCover:this.snowCover})}};e([r$1({snowy:"snowy"})],p$3.prototype,"type",void 0),e([d$3({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p$3.prototype,"cloudCover",void 0),e([d$3({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p$3.prototype,"precipitation",void 0),e([d$3({type:["enabled","disabled"],nonNullable:!0,json:{write:!0}})],p$3.prototype,"snowCover",void 0),p$3=i$8=e([n$5("esri.views.3d.environment.SnowyWeather")],p$3);const n$2=p$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const i$7={key:"type",base:n$4,typeMap:{sunny:n$4,cloudy:u$4,rainy:c$5,snowy:n$2,foggy:n$3}},c$4=Object.keys(i$7.typeMap);function y$3(e,o){return !!c$4.includes(e)||(o.error(`"${e}" is not a valid weather type`),!1)}const a$4=1e4;function p$2(e,o){if(e.type!==o.type)return !1;switch(e.type){case"sunny":case"cloudy":return e.cloudCover===o.cloudCover;case"rainy":return e.cloudCover===o.cloudCover&&e.precipitation===o.precipitation;case"snowy":return e.cloudCover===o.cloudCover&&e.precipitation===o.precipitation&&e.snowCover===o.snowCover;case"foggy":return e.fogStrength===o.fogStrength}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
var d$2;let i$6=d$2=class extends l$3{constructor(e){super(e),this.type="sun",this.date=null,this.directShadowsEnabled=!1,this.displayUTCOffset=null;}readDate(e,t){return null!=t.datetime&&new Date(t.datetime)||null}writeDate(e,t,r){t[r]=e.getTime();}readDirectShadowsEnabled(e,t){return !!t.directShadows}writedirectShadowsEnabled(e,t,r){e&&(t[r]=e);}writeDisplayUTCOffset(e,t){null!=e&&(t.displayUTCOffset=e);}clone(){return new d$2(this.cloneConstructProperties())}cloneConstructProperties(){const e={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};return null!=this.date&&(e.date=new Date(this.date.getTime())),e}};e([d$3({readOnly:!0,type:["sun"],json:{write:!0}})],i$6.prototype,"type",void 0),e([d$3({type:Date,json:{type:Number,write:{target:"datetime"}}})],i$6.prototype,"date",void 0),e([o$1("date",["datetime"])],i$6.prototype,"readDate",null),e([r$2("date")],i$6.prototype,"writeDate",null),e([d$3({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],i$6.prototype,"directShadowsEnabled",void 0),e([o$1("directShadowsEnabled",["directShadows"])],i$6.prototype,"readDirectShadowsEnabled",null),e([r$2("directShadowsEnabled")],i$6.prototype,"writedirectShadowsEnabled",null),e([d$3({type:Number,json:{write:!0}})],i$6.prototype,"displayUTCOffset",void 0),e([r$2("displayUTCOffset")],i$6.prototype,"writeDisplayUTCOffset",null),i$6=d$2=e([n$5("esri.webscene.SunLighting")],i$6);const p$1=i$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
var s$3;let c$3=s$3=class extends l$3{constructor(r){super(r),this.type="virtual",this.directShadowsEnabled=!1;}clone(){return new s$3(this.cloneConstructProperties())}cloneConstructProperties(){return {directShadowsEnabled:this.directShadowsEnabled}}};e([d$3({readOnly:!0,type:["virtual"],json:{write:!0}})],c$3.prototype,"type",void 0),e([d$3({type:Boolean,json:{default:!1,name:"directShadows",write:!0}})],c$3.prototype,"directShadowsEnabled",void 0),c$3=s$3=e([n$5("esri.webscene.VirtualLighting")],c$3);const a$3=c$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const i$5={key:"type",defaultKeyValue:"sun",base:null,typeMap:{sun:p$1,virtual:a$3}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
let t$4=class extends l$3{constructor(r){super(r);}clone(){}};e([d$3({readOnly:!0,json:{read:!1}})],t$4.prototype,"type",void 0),t$4=e([n$5("esri.webscene.background.Background")],t$4);const c$2=t$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
var l$1;const a$2={...p$8,nonNullable:!0};let i$4=l$1=class extends c$2{constructor(o){super(o),this.type="color",this.color=new l$4([0,0,0,1]);}clone(){return new l$1(this.cloneProperties())}cloneProperties(){return {color:this.color.clone()}}};e([r$1({color:"color"},{readOnly:!0})],i$4.prototype,"type",void 0),e([d$3(a$2)],i$4.prototype,"color",void 0),i$4=l$1=e([n$5("esri.webscene.background.ColorBackground")],i$4);const n$1=i$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const o={base:c$2,key:"type",typeMap:{color:n$1}};function t$3(e){return (r,o,t)=>{if(!r)return r;for(const n in e.typeMap)if(r.type===n){const o=new e.typeMap[n];return o.read(r,t),o}}}const n={types:o,json:{read:t$3(o),write:{overridePolicy:(e,r,o)=>({enabled:!o||!o.isPresentation})}}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
var g$2;const u$3=s$4.getLogger("esri.webscene.Environment"),d$1=(e,t,o)=>({enabled:!o||!o.isPresentation});let b$2=g$2=class extends l$3{constructor(e){super(e),this.lighting=new p$1,this.background=null,this.atmosphereEnabled=!0,this.starsEnabled=!0;}set weather(e){y$3(e?.type,u$3)&&this._set("weather",e);}clone(){return new g$2(this.cloneConstructProperties())}cloneConstructProperties(){return {lighting:this.lighting&&"virtual"===this.lighting.type?a$3.prototype.clone.call(this.lighting):p$1.prototype.clone.call(this.lighting),background:m$3(this.background),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,weather:this.weather.clone()}}};e([d$3({types:i$5,nonNullable:!0,json:{write:!0}})],b$2.prototype,"lighting",void 0),e([d$3(n)],b$2.prototype,"background",void 0),e([d$3({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:d$1}}})],b$2.prototype,"atmosphereEnabled",void 0),e([d$3({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:d$1}}})],b$2.prototype,"starsEnabled",void 0),e([d$3({types:i$7,nonNullable:!0,json:{write:!0},value:new n$4})],b$2.prototype,"weather",null),b$2=g$2=e([n$5("esri.webscene.Environment")],b$2);const y$2=b$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
var i$3,t$2;!function(i){i[i.OBJECT=0]="OBJECT",i[i.HUD=1]="HUD",i[i.TERRAIN=2]="TERRAIN",i[i.OVERLAY=3]="OVERLAY",i[i.I3S=4]="I3S",i[i.PCL=5]="PCL",i[i.LOD=6]="LOD",i[i.VOXEL=7]="VOXEL";}(i$3||(i$3={}));class s$2{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.store=t$2.ALL;}}!function(i){i[i.MIN=0]="MIN",i[i.MINMAX=1]="MINMAX",i[i.ALL=2]="ALL";}(t$2||(t$2={}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const L$1=s$4.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");class z$1{constructor(){this.plane=p$9(),this.origin=n$6(),this.basis1=n$6(),this.basis2=n$6();}}function G$1(s=vs){return {plane:p$9(s.plane),origin:t$5(s.origin),basis1:t$5(s.basis1),basis2:t$5(s.basis2)}}function W$2(s,i,t){const n=Ss.get();return n.origin=s,n.basis1=i,n.basis2=t,n.plane=E$3(0,0,0,0),H$3(n),n}function X$1(s,i=G$1()){return D(s.origin,s.basis1,s.basis2,i)}function Z$1(s,i){r$3(i.origin,s.origin),r$3(i.basis1,s.basis1),r$3(i.basis2,s.basis2),A$2(i.plane,s.plane);}function D(s,i,t,n=G$1()){return r$3(n.origin,s),r$3(n.basis1,i),r$3(n.basis2,t),H$3(n),ys(n,"fromValues()"),n}function H$3(s){O$1(s.basis2,s.basis1,s.origin,s.plane);}function J$1(s,i,t){s!==t&&X$1(s,t);const n=q$2(c$9.get(),ms(s),i);return u$5(t.origin,t.origin,n),t.plane[3]-=i,t}function K$1(s,i,t){return Q$1(i,t),J$1(t,gs(s,s.origin),t),t}function Q$1(s,i=G$1()){const t=(s[2]-s[0])/2,n=(s[3]-s[1])/2;return o$2(i.origin,s[0]+t,s[1]+n,0),o$2(i.basis1,t,0,0),o$2(i.basis2,0,n,0),F$1(0,0,1,0,i.plane),i}function $$1(s,i,t){return !!q$3(s.plane,i,t)&&hs(s,t)}function ss(s,i,t){if($$1(s,i,t))return t;const n=is(s,i,c$9.get());return u$5(t,i.origin,q$2(c$9.get(),i.direction,x$2(i.origin,n)/s$5(i.direction))),t}function is(s,t,n){const o=Ns.get();Ps(s,t,o,Ns.get());let r=Number.POSITIVE_INFINITY;for(const e of Ts){const a=Is(s,e,ws.get()),u=c$9.get();if(x$3(o,a,u)){const s=H$4(c$9.get(),t.origin,u),o=Math.abs(l$5(P$2(t.direction,s)));o<r&&(r=o,r$3(n,u));}}return r===Number.POSITIVE_INFINITY?ts(s,t,n):n}function ts(s,i,t){if($$1(s,i,t))return t;const n=Ns.get(),o=Ns.get();Ps(s,i,n,o);let r=Number.POSITIVE_INFINITY;for(const e of Ts){const a=Is(s,e,ws.get()),u=c$9.get();if(U$2(n,a,u)){const s=h$3(i,u);if(!z$2(o,u))continue;s<r&&(r=s,r$3(t,u));}}return rs(s,i.origin)<r&&ns(s,i.origin,t),t}function ns(s,i,t){const n=J$2(s.plane,i,c$9.get()),o=A$3(js(s,s.basis1),n,-1,1,c$9.get()),r=A$3(js(s,s.basis2),n,-1,1,c$9.get());return e$1(t,u$5(c$9.get(),o,r),s.origin),t}function os(s,i,t){const{origin:n,basis1:o,basis2:r}=s,e=e$1(c$9.get(),i,n),a=f$2(o,e),c=f$2(r,e),u=f$2(ms(s),e);return o$2(t,a,c,u)}function rs(s,i){const t=os(s,i,c$9.get()),{basis1:n,basis2:o}=s,r=s$5(n),e=s$5(o),a=Math.max(Math.abs(t[0])-r,0),c=Math.max(Math.abs(t[1])-e,0),u=t[2];return a*a+c*c+u*u}function es(s,i){return Math.sqrt(rs(s,i))}function as(s,i){let t=Number.NEGATIVE_INFINITY;for(const n of Ts){const o=Is(s,n,ws.get()),r=b$3(o,i);r>t&&(t=r);}return Math.sqrt(t)}function cs(s,i){return z$2(s.plane,i)&&hs(s,i)}function us(s,i,t,n){return ds(s,t,n)}function gs(s,i){const t=-s.plane[3];return f$2(ms(s),i)-t}function bs(s,i,t,n){const o=gs(s,i),r=q$2(Ms,ms(s),t-o);return u$5(n,i,r),n}function fs(s,i){return F$2(s.basis1,i.basis1)&&F$2(s.basis2,i.basis2)&&F$2(s.origin,i.origin)}function ls(s,i,t){return s!==t&&X$1(s,t),h$4(As,i),o$3(As,As),L$2(t.basis1,s.basis1,As),L$2(t.basis2,s.basis2,As),L$2(Z$2(t.plane),Z$2(s.plane),As),L$2(t.origin,s.origin,i),L$3(t.plane,t.plane,t.origin),t}function ps(s,i,t,n){return s!==n&&X$1(s,n),p$a(xs,i,t),L$2(n.basis1,s.basis1,xs),L$2(n.basis2,s.basis2,xs),H$3(n),n}function ms(s){return Z$2(s.plane)}function ds(s,i,t){switch(i){case n$7.X:r$3(t,s.basis1),z$3(t,t);break;case n$7.Y:r$3(t,s.basis2),z$3(t,t);break;case n$7.Z:r$3(t,ms(s));}return t}function hs(s,i){const t=e$1(c$9.get(),i,s.origin),n=v$3(s.basis1),o=v$3(s.basis2),r=P$2(s.basis1,t),e=P$2(s.basis2,t);return -r-n<0&&r-n<0&&-e-o<0&&e-o<0}function js(s,i){const t=ws.get();return r$3(t.origin,s.origin),r$3(t.vector,i),t}function Is(s,i,t){const{basis1:n,basis2:o,origin:r}=s,e=q$2(c$9.get(),n,i.origin[0]),a=q$2(c$9.get(),o,i.origin[1]);u$5(t.origin,e,a),u$5(t.origin,t.origin,r);const c=q$2(c$9.get(),n,i.direction[0]),b=q$2(c$9.get(),o,i.direction[1]);return q$2(t.vector,u$5(c,c,b),2),t}function ys(s,i){Math.abs(P$2(s.basis1,s.basis2)/(s$5(s.basis1)*s$5(s.basis2)))>1e-6&&L$1.warn(i,"Provided basis vectors are not perpendicular"),Math.abs(P$2(s.basis1,ms(s)))>1e-6&&L$1.warn(i,"Basis vectors and plane normal are not perpendicular"),Math.abs(-P$2(ms(s),s.origin)-s.plane[3])>1e-6&&L$1.warn(i,"Plane offset is not consistent with plane origin");}function Ps(s,i,t,n){const o=ms(s);O$1(o,i.direction,i.origin,t),O$1(Z$2(t),o,i.origin,n);}const vs={plane:p$9(),origin:r$4(0,0,0),basis1:r$4(1,0,0),basis2:r$4(0,1,0)},Ns=new s$6(p$9),ws=new s$6(v$4),Ms=n$6(),Ss=new s$6((()=>({origin:null,basis1:null,basis2:null,plane:null}))),Ts=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],As=e$2(),xs=e$2(),Vs=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:z$1,create:G$1,wrap:W$2,copy:X$1,copyWithoutVerify:Z$1,fromValues:D,updateUnboundedPlane:H$3,elevate:J$1,setExtent:K$1,fromAABoundingRect:Q$1,intersectRay:$$1,intersectRayClosestSilhouette:ss,closestPointOnSilhouette:is,closestPoint:ts,projectPoint:ns,projectPointLocal:os,distance2:rs,distance:es,distanceToSilhouette:as,extrusionContainsPoint:cs,axisAt:us,altitudeAt:gs,setAltitudeAt:bs,equals:fs,transform:ls,rotate:ps,normal:ms,UP:vs},Symbol.toStringTag,{value:"Module"}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
function c$1(t){return r$5(t)&&r$5(t.dist)}function s$1(r){return (e,o,c)=>(A$4(f$1,e,o,c),!cs(r,f$1))}function i$2(r){return c$1(r)&&r.intersector===i$3.OBJECT&&!!r.target}function u$2(t){return c$1(t)&&t.intersector===i$3.HUD&&!!t.target&&r$5(t.target.center)}const f$1=n$6();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const A$1=1e-5;class T$1{constructor(t){this.options=new s$2,this._results=new I$2,this.transform=new u$6,this.tolerance=A$1,this.verticalOffset=null,this._ray=d$4(),this._rayEnd=n$6(),this._rayBeginTransformed=n$6(),this._rayEndTransformed=n$6(),this.viewingMode=null==t?l$2.Global:t;}get results(){return this._results}get ray(){return this._ray}get rayBegin(){return this._ray.origin}get rayEnd(){return this._rayEnd}reset(t,r,s){this.resetWithRay(p$b(t,r,this._ray),s);}resetWithRay(t,r){this.camera=r,t!==this._ray&&l$6(t,this._ray),0!==this.options.verticalOffset?this.viewingMode===l$2.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,u$5(this._rayEnd,this._ray.origin,this._ray.direction),this._results.init(this._ray);}intersect(r=null,s,i,e,a){this.point=s,this.filterPredicate=e,this.tolerance=null==i?A$1:i;const n=y$4(this.verticalOffset);if(r$5(r)&&r.length>0){const s=a?t=>{a(t)&&this.intersectObject(t);}:t=>{this.intersectObject(t);};for(const i of r){const r=i.getSpatialQueryAccelerator&&i.getSpatialQueryAccelerator();r$5(r)?(r$5(n)?r.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,s,n):r.forEachAlongRay(this._ray.origin,this._ray.direction,s),this.options.selectionMode&&this.options.hud&&r.forEachDegenerateObject(s)):i.objects.forAll((t=>s(t)));}}this.sortResults();}intersectObject(r){const s=r.geometryRecords;if(!s)return;const i=r.transformation,a=y$4(this.verticalOffset);for(const o of s){const{geometry:s,material:h,instanceParameters:d}=o;if(u$7(d))continue;const c=s.id;this.transform.setAndInvalidateLazyTransforms(i,o.getShaderTransformation()),L$2(this._rayBeginTransformed,this.rayBegin,this.transform.inverse),L$2(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const l=this.transform.transform;r$5(a)&&(a.objectTransform=this.transform),h.intersect(s,d,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,((s,i,a,n,o,h)=>{if(s>=0){if(r$5(this.filterPredicate)&&!this.filterPredicate(this._ray.origin,this._rayEnd,s))return;const d=n?this._results.hud:this._results,m=n?n=>{const d={object:r,geometryId:c,triangleNr:a,center:r$5(h)?[h[0],h[1],h[2]]:null};n.set(i$3.HUD,d,s,i,o$4,o);}:t=>t.set(i$3.OBJECT,{object:r,geometryId:c,triangleNr:a},s,i,l,o);if((null==d.min.drapedLayerOrder||o>=d.min.drapedLayerOrder)&&(null==d.min.dist||s<d.min.dist)&&m(d.min),this.options.store!==t$2.MIN&&(null==d.max.drapedLayerOrder||o<d.max.drapedLayerOrder)&&(null==d.max.dist||s>d.max.dist)&&m(d.max),this.options.store===t$2.ALL)if(n){const t=new M$1(this._ray);m(t),this._results.hud.all.push(t);}else {const t=new N$1(this._ray);m(t),this._results.all.push(t);}}}),o.shaderTransformation);}}sortResults(t=this._results.all){t.sort(((t,s)=>t.dist!==s.dist?c$a(t.dist,0)-c$a(s.dist,0):t.drapedLayerOrder!==s.drapedLayerOrder?c$a(t.drapedLayerOrder,Number.MAX_VALUE)-c$a(s.drapedLayerOrder,Number.MAX_VALUE):c$a(s.drapedLayerGraphicOrder,Number.MIN_VALUE)-c$a(t.drapedLayerGraphicOrder,Number.MIN_VALUE)));}}function x$1(t){return new T$1(t)}class I$2{constructor(){this.min=new N$1(d$4()),this.max=new N$1(d$4()),this.hud={min:new M$1(d$4()),max:new M$1(d$4()),all:new Array},this.ground=new N$1(d$4()),this.all=[];}init(t){this.min.init(t),this.max.init(t),this.ground.init(t),this.all.length=0,this.hud.min.init(t),this.hud.max.init(t),this.hud.all.length=0;}}class N$1{constructor(t){this.intersector=i$3.OBJECT,this.normal=n$6(),this.transformation=e$2(),this._ray=d$4(),this.init(t);}get ray(){return this._ray}get distanceInRenderSpace(){return r$5(this.dist)?(q$2(B$1,this.ray.direction,this.dist),s$5(B$1)):null}getIntersectionPoint(t){return !!c$1(this)&&(q$2(B$1,this.ray.direction,this.dist),u$5(t,this.ray.origin,B$1),!0)}getTransformedNormal(t){return r$3(R$1,this.normal),R$1[3]=0,w$2(R$1,R$1,this.transformation),r$3(t,R$1),z$3(t,t)}init(t){this.dist=null,this.target=null,this.drapedLayerOrder=null,this.drapedLayerGraphicOrder=null,this.intersector=i$3.OBJECT,l$6(t,this._ray);}set(t,i,a,n,o,h,c){this.intersector=t,this.dist=a,r$3(this.normal,c$a(n,b$4)),n$8(this.transformation,c$a(o,o$4)),this.target=i,this.drapedLayerOrder=h,this.drapedLayerGraphicOrder=c;}copy(t){l$6(t.ray,this._ray),this.intersector=t.intersector,this.dist=t.dist,this.target=t.target,this.drapedLayerOrder=t.drapedLayerOrder,this.drapedLayerGraphicOrder=t.drapedLayerGraphicOrder,r$3(this.normal,t.normal),n$8(this.transformation,t.transformation);}}class M$1 extends N$1{constructor(){super(...arguments),this.intersector=i$3.HUD;}}function U$1(t){return new N$1(t)}const B$1=n$6(),R$1=n$9();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
function p(r,n,t,o){return r$5(r.renderCoordsHelper.fromRenderCoords(n.eye,j$1,o))&&b$5(t,j$1)}function m$2(e,n){return e.elevationProvider?c$a(e.elevationProvider.getElevation(n[0],n[1],n[2],e.renderCoordsHelper.spatialReference,"ground"),0):0}function g$1(e,r,a,c){const l=e.state.camera.clone();r&&(l.eye=r,l.center=a,l.up=c),v$2(e,l.ray,w$1)||r$3(w$1,l.center);const d=e.state.constraints,u=d.minimumPoiDistance;if(p$c(l.eye,w$1)<u){const r=d.collision.enabled;r$3(H$2,l.viewForward),q$2(H$2,H$2,u),r?l.eye=e$1(j$1,w$1,H$2):u$5(w$1,l.eye,H$2);const t=e.renderCoordsHelper,a=t.getAltitude(l.eye),c=d.collision.elevationMargin;r&&a<c&&(e$1(H$2,w$1,l.eye),l.eye=t.setAltitude(j$1,c,l.eye),u$5(w$1,l.eye,H$2));}return l.center=w$1,l}function y$1(e,r,n){if(!e.state.isGlobal)return !1;const o=m$2(e,r),i=e.stateManager.constraintsManager.nearFarHeuristic,{far:s}=i.compute(r,n,e.renderDataExtent,o,C$1),a=s*s;return p$c(r,n)>a}function v$2(e,r,n){let t=M[e.viewingMode];t||(t=x$1(e.state.viewingMode),t.options.backfacesTerrain=!e.state.isGlobal,t.options.invisibleTerrain=!0,M[e.viewingMode]=t);const{isGlobal:o}=e.state;return !(!e.sceneIntersectionHelper.intersectRay(r,t,n)||y$1(e,r.origin,n))||(!(!e.renderCoordsHelper.intersectManifold(r,0,n)||y$1(e,r.origin,n))||!!o&&b$1(r,n,p$d(e.spatialReference).radius))}function b$1(e,r,n){const t=P$2(e.origin,e.origin)-n*n,i=t>0?Math.sqrt(t)/3:1;return q$2(r,e.direction,i/s$5(e.direction)),u$5(r,r,e.origin),!0}const M={},j$1=n$6(),w$1=n$6(),H$2=n$6(),C$1={near:0,far:0};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const l=n$6(),u$1=n$6();function h$2(){return {direction:n$6(),up:n$6()}}function m$1(f,h,m,p,b){let d=z$3(l,f),g=P$2(d,p);const j=g>0;g=Math.abs(g),g>.99&&(g=Math.abs(P$2(h,p)),g<.99?(r$3(d,h),j&&q$2(d,d,-1)):d=null);let k=0;if(d){q$2(u$1,p,P$2(p,d)),e$1(d,d,u$1);const n=P$2(d,b)/(s$5(d)*s$5(b));_$3(u$1,d,b);k=(P$2(u$1,p)>0?1:-1)*m$4(l$5(n));}const v=m$4(l$5(-P$2(p,f)/s$5(f)));return m?(m.heading=k,m.tilt=v,m):{heading:k,tilt:v}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const T=r$4(0,1,0),j=r$4(0,0,1),g=e$2(),y=n$6(),x=n$6();function h$1(t,i,s,c=h$2()){const{direction:m,up:f}=c;return R$2(g,-M$2(i)),b$6(g,g,M$2(s)),L$2(m,j,g),q$2(m,m,-1),L$2(f,T,g),c}function b(t,e,o,r){return m$1(e,o,r,j,T)}function v$1(t,e,o,r){const i=h$1(t,o,r),n=n$6();return q$2(n,i.direction,-e),u$5(n,n,t),{up:i.up,eye:n,heading:o,tilt:r}}function R(e){return m$4(e)}function _$2(t){return M$2(t)}function E$2(t,e,o,r,i){const n=t.renderSpatialReference,a=t.map&&t.spatialReference||e.spatialReference;return Hn(e,y,n),Hn(e,x,n),y[0]-=o/2,x[0]+=o/2,y[1]-=r/2,x[1]+=r/2,Bn(y,n,y,a),Bn(x,n,x,a),i?(i.xmin=y[0],i.ymin=y[1],i.xmax=x[0],i.ymax=x[1],i.spatialReference=a):i=new M$3(y[0],y[1],x[0],x[1],a),i}const H$1=Object.freeze(Object.defineProperty({__proto__:null,headingTiltToDirectionUp:h$1,directionToHeadingTilt:b,eyeForCenterWithHeadingTilt:v$1,lookAtTiltToEyeTilt:R,eyeTiltToLookAtTilt:_$2,toExtent:E$2},Symbol.toStringTag,{value:"Module"}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
function s(t,n,o){return u(t,n.longitude,n.latitude,o.longitude,o.latitude)}function u(t,r,e,s,u){const i=M$2(e),c=M$2(u),a=i-c,h=M$2(r)-M$2(s),d=Math.sin(a/2),f=Math.sin(h/2),m=2*b$7(Math.sqrt(d*d+Math.cos(i)*Math.cos(c)*f*f))*t;return Math.round(1e4*m)/1e4}function i$1(t,n,o){const u=n.spatialReference,i=p$d(u),c=new j$2(n.x,t.y,u),a=new j$2(o.x,t.y,u),h=new j$2(t.x,n.y,u),d=new j$2(t.x,o.y,u);return {lon:s(i.radius,c,a),lat:s(i.radius,h,d)}}function c(r,e,s){const u=e/s,i=M$2(r),c=Math.sin(u/2),a=Math.cos(i),h=2*b$7(Math.sqrt(c*c/(a*a)));return m$4(h)}function a$1(n,o){return m$4(n/o)}function h(t,n){const r=M$2(t/2);return (1-Math.sin(r))*n/Math.sin(r)}function d(t,n){let o=t/15;return n||(o=Math.round(o)),o}function f(t,n){return d(t.longitude,n)}function m(t,n){n||(n={hours:0,minutes:0,seconds:0}),n.hours=d(t[0],!0);const o=n.hours%1;n.hours-=o,n.minutes=60*o;const r=n.minutes%1;return n.minutes-=r,n.seconds=Math.round(60*r),n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const I$1=r$4(0,0,1),P$1=z$3(n$6(),r$4(1,1,1)),v=new i$a(-180,180),w=e$2(),U=n$6(),q$1=n$6();function E$1(t,e,n,a=h$2()){_$3(U,t,I$1),0===P$2(U,U)&&_$3(U,t,P$1),p$a(w,-M$2(e),t),f$3(w,w,-M$2(n),U);const{up:r,direction:h}=a;return _$3(r,U,t),z$3(r,r),L$2(r,r,w),z$3(h,t),j$3(h,h),L$2(h,h,w),a}function S(t,e,o,n){const a=U,i=q$1;return z$3(a,t),_$3(q$1,a,I$1),0===P$2(q$1,q$1)&&_$3(q$1,a,P$1),_$3(i,q$1,a),m$1(e,o,n,a,i)}function _$1(t,e,n,i){const s={eye:n$6(),up:null,tilt:i,heading:n},r=U;r[0]=t[0],r[1]=t[2],r[2]=-t[1];const c=e,l=M$2(n),m=M$2(i),f=Math.sin(l),p=Math.cos(l),y=Math.sin(m),d=Math.cos(m),g=s$5(r);let j;if(Math.abs(m)<1e-8)j=c+g;else {const t=g/y,e=b$7(c/t),o=Math.PI-m-e;j=t*Math.sin(o);}const T=d*c,b=c*c*(y*y),x=p*p*b,R=j-T,I=R*R,P=x*(x+I-r[1]*r[1]);if(P<0)return q$2(s.eye,r,j/g),s.tilt=0,s;const v=Math.sqrt(P),w=r[1]*R,q=x+I;let E;if(E=p>0?-v+w:v+w,Math.abs(q)<1e-8)return g<1e-8?(s.eye[0]=0,s.eye[1]=0,s.eye[2]=c):q$2(s.eye,r,j/g),s.tilt=0,H(s.eye),W$1(s,t);s.eye[1]=E/q;const S=f*f*b,_=y*c,k=p*_*s.eye[1],z=s.eye[1]*s.eye[1],A=1-z,C=Math.sqrt(A),G=x*z+S-2*k*C*R+A*I;return Math.abs(G)<1e-8?(q$2(s.eye,r,j/g),s.tilt=0,H(s.eye),W$1(s,t)):(s.eye[0]=(A*(j*r[0]-T*r[0])-_*C*(r[0]*s.eye[1]*p+r[2]*f))/G,s.eye[2]=(A*(j*r[2]-T*r[2])-_*C*(r[2]*s.eye[1]*p-r[0]*f))/G,q$2(s.eye,s.eye,j),H(s.eye),W$1(s,t))}function H(t){const e=t[1];t[1]=-t[2],t[2]=e;}function W$1(t,e){const o=E$1(e,t.heading,t.tilt);return t.up=o.up,t}function k$1(t,e,o){const i=s$5(e),s=Math.sqrt(o*o+i*i-2*o*i*Math.cos(Math.PI-t)),r=b$7(o/(s/Math.sin(t)));return m$4(t-r)}function z(t,e,n){const i=M$2(t),s=s$5(e);return b$7(n/(s/Math.sin(i)))+i}function A(t,a,i,s,r){let c$1,l,m,f;const p=a.latitude,h=p$d(t.spatialReference).radius,u=a.longitude,y=c(p,i,h)/2;c$1=u-y,l=u+y;const M=M$2(p),b=(1+Math.sin(M))/(1-Math.sin(M)),x=(b+1)*Math.tan(s/h/2),I=x*x;function P(t){const o=Math.PI/2;return (t=o$5.normalize(t,-o))>o&&(t=Math.PI-t),t}if(m=1.5*Math.PI-2*Math.atan(.5*(x+Math.sqrt(4*b+I))),f=m+s/h,m=P(m),f=P(f),f<m){const t=f;f=m,m=t;}if(m=Math.max(m$4(m),-90),f=Math.min(m$4(f),90),l=v.monotonic(c$1,l),l-c$1>180){const t=(l-c$1-180)/2;c$1+=t,l-=t;}const w=t.spatialReference&&t.spatialReference.isGeographic?t.spatialReference:k$2.WGS84;return r?(r.xmin=c$1,r.ymin=m,r.xmax=l,r.ymax=f,r.spatialReference=w):r=new M$3(c$1,m,l,f,w),t.spatialReference&&t.spatialReference.isWebMercator&&R$3(r,!1,r),r}const C=Object.freeze(Object.defineProperty({__proto__:null,headingTiltToDirectionUp:E$1,directionToHeadingTilt:S,eyeForCenterWithHeadingTilt:_$1,lookAtTiltToEyeTilt:k$1,eyeTiltToLookAtTilt:z,toExtent:A},Symbol.toStringTag,{value:"Module"}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
function t$1(t){return "point"===t.type}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
class t{constructor(e,r=null,t=0){this.array=e,this.spatialReference=r,this.offset=t;}}function a(e){return "array"in e}function i(t,i,n="ground"){if(t$1(i))return t.getElevation(i.x,i.y,i.z||0,i.spatialReference,n);if(a(i)){let r=i.offset;return t.getElevation(i.array[r++],i.array[r++],i.array[r]||0,c$a(i.spatialReference,t.spatialReference),n)}return t.getElevation(i[0],i[1],i[2]||0,t.spatialReference,n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const P=s$4.getLogger("esri.views.3d.support.cameraUtils"),L=39.37,E=96,G=1,O=8,k=5,I=1,q=n$6(),J=n$6(),F={heading:0,tilt:0},W=new j$2,X=new i$a(-20037508.342788905,20037508.342788905),K=new i$a(-180,180);var Y;function N(e){return e.spatialReference||k$2.WGS84}function V(e){return "global"===e.viewingMode?C:H$1}function Z(e,t,n,r,i){return V(e).headingTiltToDirectionUp(t,n,r,i)}function B(e,t){if(t$6(t))return null;const n=e.renderSpatialReference,i=V(e).headingTiltToDirectionUp,a=n$6();if(!Hn(t.position,a,n))return null;const s=i(a,t.heading,t.tilt);q$2(s.direction,s.direction,e.state.camera.distance),u$5(s.direction,s.direction,a);const c=g$1(e,a,s.direction,s.up);return c.fov=M$2(t.fov),c}!function(e){e[e.LOCKED=0]="LOCKED",e[e.ADJUST=1]="ADJUST";}(Y||(Y={}));const Q=n$6();function $(t,n,r){const a=t.renderSpatialReference,s=re(t,n.eye,n.viewForward,n.up,F);let c=N(t);return Bn(n.eye,a,Q,c)||(c=k$2.WGS84,Bn(n.eye,a,Q,c)),t$6(r)?new d$5(new j$2(Q,c),s.heading,s.tilt,m$4(n.fov)):(r.position.x=Q[0],r.position.y=Q[1],r.position.z=Q[2],r.position.spatialReference=c,r.heading=s.heading,r.tilt=s.tilt,r.fov=m$4(n.fov),r)}function _(e,t,n){const i=e.state.camera,o=i.width/2/i.pixelRatio;e.renderCoordsHelper.viewingMode===l$2.Global&&null!=n&&(t*=Math.cos(M$2(n))),t/=e.renderCoordsHelper.unitInMeters;return o/(E*L/t)/Math.tan(i.fovX/2)}function ee(e,t,n){const i=e.state.camera,o=t*Math.tan(i.fovX/2),a=i.width/2/i.pixelRatio;let s=E*L/(a/o);return e.renderCoordsHelper.viewingMode===l$2.Global&&(s/=Math.cos(M$2(n))),s*=e.renderCoordsHelper.unitInMeters,s}function te(e,t,n,r,i,o){return ne(e,t,_(e,n,t.latitude),r,i,o)}function ne(e,t,n,r,i,a){if(Te$1(a)){const s=new Se$1(a.signal);return ce$1(e,r.heading,r.tilt,t,n,i,s),void s.resolver.promise.then((t=>{const n=Re$1(e,t,r.fov);if(!t$6(n))return a.resolver.resolve(n);a.resolver.reject();}),(e=>a.resolver.reject(e)))}const s=ce$1(e,r.heading,r.tilt,t,n,i);return Re$1(e,s,r.fov,a)}function re(e,t,n,r,i){return V(e).directionToHeadingTilt(t,n,r,i)}function ie(e,t){return !!(e.basemapTerrain&&e.renderCoordsHelper.fromRenderCoords(t,W,e.spatialReference)&&c$a(i(e.elevationProvider,W),0)>W.z-I)}async function oe(e,t,n){if(!e.renderCoordsHelper.fromRenderCoords(t,W,e.spatialReference))return !1;const r=await e.elevationProvider.queryElevation(W.x,W.y,W.z,W.spatialReference,"ground",n);return c$a(r,0)>W.z-I}async function ae(e,t,n){const r=n$6();if(t)if(t instanceof j$2){if(Hn(t,r,e.renderSpatialReference),null==t.z&&null!=e.basemapTerrain){const i=await e.elevationProvider.queryElevation(t.x,t.y,t.z,t.spatialReference,"ground",n);return r$5(i)&&e.renderCoordsHelper.setAltitude(r,i),r}}else r$3(r,t);else r$3(r,e.state.camera.center);return r}function se(e,t){const n=n$6();if(t&&t instanceof j$2){if(Hn(t,n,e.renderSpatialReference),null==t.z&&null!=e.basemapTerrain){const r=i(e.elevationProvider,t);r$5(r)&&e.renderCoordsHelper.setAltitude(n,r);}}else r$3(n,t||e.state.camera.center);return n}function ce$1(e,t,n,r,i,o,a){const s=r&&r instanceof j$2?r:null;if(Te$1(a))return ae(e,r,a.signal).then((r=>{le$1(e,t,n,s,r,i,o,a);}),(e=>a.resolver.reject(e))),null;const c=se(e,r);return le$1(e,t,n,s,c,i,o,a)}function le$1(e,t,n,r,i,a,s,c){if(t$6(r)){const t=e.renderSpatialReference;if(r=In(i,t,N(e)),t$6(r))return null}a=Math.max(a,e.state.constraints.minimumPoiDistance);const l=pe$1(e,t,n,i,a,s),f=(0,V(e).eyeForCenterWithHeadingTilt)(i,a,l.heading,l.tilt);if(s===Y.ADJUST&&"global"===e.viewingMode&&n>0){const o=()=>{const o=ge$1(e,i,a,ve$1(e,a,n,i));return s=n-o<1?Y.LOCKED:Y.ADJUST,le$1(e,t,o,r,i,a,s,c)},l=e.map.ground.navigationConstraint;if(!l||"stay-above"===l.type){if(ie(e,f.eye))return o();if(Te$1(c))return oe(e,f.eye,c.signal).then((e=>e?o():(c.resolver.resolve({eye:f.eye,up:f.up,center:t$5(i),heading:f.heading,tilt:f.tilt}),null))),null}}const u=!c||Te$1(c)?{center:n$6(),eye:n$6(),up:n$6(),tilt:0,heading:0}:c;return u.eye=f.eye,u.up=f.up,u.center=t$5(i),u.heading=f.heading,u.tilt=f.tilt,Te$1(c)&&c.resolver.resolve(u),u}function fe$1(e,t,n,r$1,i,s=null){const c=null!=t.zmax&&null!=t.zmin;let l,f,u;if(e.state.isGlobal){if(!r(t.spatialReference,l$2.Global))return Te$1(s)&&s.resolver.reject(),null;const e=new j$2(t.xmin,t.ymin,t.spatialReference),n=new j$2(t.xmax,t.ymax,t.spatialReference),r$1=t.spatialReference.isGeographic?K:X;l=new j$2({x:r$1.center(e.x,n.x),y:(n.y+e.y)/2,z:c?(t.zmax+t.zmin)/2:null,spatialReference:t.spatialReference});const i=p$d(t.spatialReference),o=i$1(l,e,n);f=o.lon,u=o.lat,r$1.diff(e.x,n.x)>r$1.range/2&&(f+=i.halfCircumference),f=Math.min(f,i.halfCircumference),u=Math.min(u,i.halfCircumference);}else {const n=c$a(e.renderSpatialReference,t.spatialReference);n.equals(t.spatialReference)||(t=rn(t,n)),f=t.xmax-t.xmin,u=t.ymax-t.ymin;const r=c?(t.zmax+t.zmin)/2:null;l=new j$2({x:t.xmin+.5*f,y:t.ymin+.5*u,z:r,spatialReference:n});}const m=c?t.zmax-t.zmin:0,p=e.state.camera,d=1/Math.tan(p.fovX/2),h=1/Math.tan(p.fovY/2),g=1/Math.tan(p.fov/2),y=Math.max(.5*f*d,.5*u*h,.5*m*g)/G;if(Te$1(s)){const t=new Se$1(s.signal);return ce$1(e,n,r$1,l,y,i,t),void t.resolver.promise.then((t=>{const n=Re$1(e,t,e.camera.fov);if(!t$6(n))return s.resolver.resolve(n);s.resolver.reject();}),(e=>s.resolver.reject(e)))}const R=ce$1(e,n,r$1,l,y,i);return Re$1(e,R,e.camera.fov,s)}function ue$1(e,t,n){const r=e.renderSpatialReference,i=In(n,r,N(e));if(t$6(i))return null;const a=Math.tan(t.fovX/2),s=Math.tan(t.fovY/2),c=U$3(t.eye,n),l=2*c*a*G,f=2*c*s*G;return "global"===e.viewingMode?A(e,i,l,f):E$2(e,i,l,f)}function me$1(e,t,n){const r=e.pointsOfInterest.centerOnSurfaceFrequent.distance;if(Math.log(n/r)/Math.LN2>O)return !0;const i=e.renderSpatialReference,a=N(e),s=In(t,i,a),c=In(e.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,i,a);if(t$6(s)||t$6(c))return !1;const l=Math.tan(.5*e.state.camera.fov)*r;return c.distance(s)/l>k}function pe$1(e,t,n,r,i,o){let a=0;return o===Y.ADJUST&&me$1(e,r,i)?(t=0,a=he$1(e,i,n,r)):a=ye$1(e,r,i,n),a=e.state.constraints.clampTilt(i,a),{heading:t,tilt:n=ge$1(e,r,i,a)}}const de$1=.7;function he$1(e,t,n,r){const i=e.state.constraints.tilt(t);i.max=Math.min(i.max,.5*Math.PI);const o=i.min*(1-de$1)+i.max*de$1,a=ye$1(e,r,t,n);return Math.min(a,o)}function ve$1(e,t,n,r){const i=e.state.constraints.tilt(t);let o=ye$1(e,r,t,n);return o=Math.min(o,.5*Math.PI),i.min*(1-de$1)+o*de$1}function ge$1(e,t,n,r){return V(e).lookAtTiltToEyeTilt(r,t,n)}function ye$1(e,t,n,r){return V(e).eyeTiltToLookAtTilt(r,t,n)}function Re$1(t,n,r,i){if(t$6(n))return null;const a=t.renderSpatialReference,c=In(n.eye,a,N(t));return t$6(c)?null:r$5(i)?(i.position=c,i.heading=n.heading,i.tilt=n.tilt,i.fov=r,i):new d$5(c,n.heading,n.tilt,r)}function xe$1(e,t){const n=e.basemapTerrain?.tilingScheme;if(n)return n.levelAtScale(t);P.error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme");}function je$1(e,t){const n=e.basemapTerrain?.tilingScheme;if(n)return n.scaleAtLevel(t);P.error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme");}function Me$1(e,t){return e.spatialReference?i$b(t,e.spatialReference):void 0}function we$1(t,n,r){const i=t.renderSpatialReference;let o,a;n||(n=t.state.camera);const s=k$2.WGS84;return n instanceof d$5?(o=n.position.latitude,Hn(n.position,q,i),Hn(r,J,i),a=x$2(q,J)):(Bn(n.center,i,J,s),o=J[1],a=n.distance),ee(t,a,o)}class Se$1{constructor(e){this.signal=e,this.resolver=D$1();}}function Te$1(e){return e&&"resolver"in e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
const ce=.66;function le(e){return 360-s$7.normalize(e)}function me(e){return s$7.normalize(360-e)}function ue(e){return r$5(e)&&e.resolver&&e.resolver.reject(),null}function fe(e,t){return r$5(e)&&e.resolver&&e.resolver.resolve(t),t}function pe(e,t,n,r=null){if(!t)return ue(r);const a=e.spatialReference||k$2.WGS84;if(r$5(t.camera)){const e=M$4(t.camera.position,a);if(t$6(e))return ue(r);const n=t.camera.clone();return n.position=e,fe(r,n)}if(t$6(t.targetGeometry))return ue(r);const o=t.get("targetGeometry.spatialReference");if(o&&!g$3(o,a))return ue(r);const c=$(e,e.state.camera);let l=Y.ADJUST;if(null!=t.rotation&&(c.heading=le(t.rotation),l=Y.LOCKED),null!=n&&(c.tilt=n),"point"===t.targetGeometry.type){const n=t.targetGeometry;let a;const o=t.targetGeometry.clone();return a=null!=t.scale?_(e,t.scale,n.latitude):e.state.camera.distance,ne(e,o,a,c,l,r)}const m=t.targetGeometry.extent;return fe$1(e,m,c.heading,c.tilt,l,r)}function ge(e,t,r=null){return t$6(r)&&(r=new u$8),we(e,null,t.clone(),r)}async function he(t,r,a){const i=Fe(t,r);if(!i)throw new s$8("viewpointutils-create:no-target","Missing target for creating viewpoint");const s=new d$5({fov:t.camera.fov}),c=new u$8({camera:s});if(i.target instanceof u$8){return Ee(await Re(t,i.target,i,a,c))}if(i.target instanceof d$5)return Ee(Ge(t,i.target,c));const l=null!=i.scale||null!=i.zoom;if(i.target instanceof M$3){const e=i.target.xmin===i.target.xmax||i.target.ymin===i.target.ymax;return Ee(l||e?await Se(t,i,i.target.center,s,a,c):await Me(t,i,i.target,s,a,c))}const m={boundingBox:B$2(),hasZ:!1,screenSpaceObjects:[]},u=l?de(t,i):void 0;if(await je(t,i.target,u,m),isFinite(m.boundingBox[0])){let e;if(p$e(m.boundingBox,Te),Ne.x=Te[0],Ne.y=Te[1],Ne.z=Te[2],Ne.spatialReference=t.spatialReference,isFinite(Ne.z)&&m.hasZ?e=S$2(m.boundingBox):(Ne.z=void 0,e=H$5(G$2(m.boundingBox,Pe))),l||e)return Ee(await Se(t,i,Ne,s,a,c));const n=De(t,m.screenSpaceObjects);return Ee(await Ae(t,i,Ne,m.boundingBox,n,s,a,c))}return i.position?Ee(Be(t,i,s,c)):Ee(await ke(t,i,s,a,c))}function ye(e,t){return null==t.scale&&null!=t.zoom?je$1(e,t.zoom):t.scale}function de(e,t){return Me$1(e,ye(e,t))}function xe(e,t){let n=!1;return null!=t.heading?(e.heading=t.heading,n=!0):null!=t.rotation&&(e.heading=le(t.rotation),n=!0),null!=t.tilt&&(e.tilt=t.tilt,n=!0),null!=t.fov&&(e.fov=t.fov),n}function we(e,t,n,r){const a=e.spatialReference||k$2.WGS84;return t=r$5(t)?t:B(e,n),t$6(t)||(r.targetGeometry=In(t.center,e.renderSpatialReference,a),r.scale=we$1(e,t),r.rotation=me(n.heading),r.camera=n),r}function ve(e,t,n){if(!t)return;if(!g$3(t.spatialReference,e.spatialReference))throw new s$8("viewpointutils:incompatible-spatialreference",`Spatial reference (${t.spatialReference?t.spatialReference.wkid:"unknown"}) is incompatible with the view (${e.spatialReference.wkid})`,{geometry:t});const r=[];if(!t.hasZ&&e.basemapTerrain){let n;switch(t.type){case"point":n=t;break;case"multipoint":case"polyline":n=t.extent.center;break;case"mesh":n=t.origin;break;case"extent":n=t.center;break;case"polygon":n=t.centroid;}n&&g$3(n,e.basemapTerrain.spatialReference)?Te[2]=c$a(i(e.elevationProvider,n),0):Te[2]=0;}(0,Ve[t.type])(t,(e=>{r.push(e[0],e[1],e[2]);}),Te);const a=r.length/3;if(0===a)return;const i$1=new Array(r.length);if(Un(r,t.spatialReference,0,i$1,e.spatialReference,0,a)){t.hasZ&&(n.hasZ=!0);for(let e=0;e<i$1.length;e+=3)t.hasZ?(Te[0]=i$1[e+0],Te[1]=i$1[e+1],Te[2]=i$1[e+2]):(Te[0]=i$1[e+0],Te[1]=i$1[e+1]),h$5(n.boundingBox,Te);}}async function be(e,t,n,a){const o=await a$5(e.whenViewForGraphic(t));if(!1===o.ok||t$6(o.value)||!("whenGraphicBounds"in o.value))return void ve(e,t.geometry,a);const i=o.value,c=await a$5(i.whenGraphicBounds(t,{minDemResolution:n}));if(!1===c.ok)return void ve(e,t.geometry,a);const{screenSpaceObjects:l,boundingBox:m}=c.value;f$4(a.boundingBox,m),l&&l.forEach((e=>{a.screenSpaceObjects.push(e);})),isFinite(m[2])&&(a.hasZ=!0);}async function je(e,n,r,a){if(Array.isArray(n)&&2===n.length){const t=n[0],r=n[1];if("number"==typeof t&&"number"==typeof r)return Ne.x=t,Ne.y=r,Ne.z=void 0,Ne.spatialReference=e.spatialReference.isGeographic?e.spatialReference:k$2.WGS84,void ve(e,Ne,a)}n&&"function"==typeof n.map?await E$4(n.map((t=>je(e,t,r,a)))):n instanceof p$f?ve(e,n,a):n instanceof g$4&&await be(e,n,r,a);}async function Re(e,t,n,r,a){if(r$5(t.camera))return Ge(e,t.camera,a);a.scale=t.scale,a.rotation=t.rotation,a.targetGeometry=r$5(t.targetGeometry)?t.targetGeometry.clone():null,a.camera=null,null!=n.heading?a.rotation=me(n.heading):null!=n.rotation&&(a.rotation=n.rotation);const o=ye(e,n);null!=o&&(a.scale=o);const s=new Se$1(r);return pe(e,a,n.tilt,s),a.camera=await s.resolver.promise,a}function Ge(e,t,n){const r=e.spatialReference,a=M$4(t.position,r);return t$6(a)?null:((t=t.clone()).fov=e.camera.fov,t.position=a,we(e,null,t,n))}function ze(e,t,n,r,a,o){const i=e.renderSpatialReference;return Hn(n.position,Je,i),Hn(t,Ke,i),o.targetGeometry=new j$2(t),a.position=new j$2(n.position),e$1(Ie,Ke,Je),re(e,Je,Ie,r.up,a),o.scale=ee(e,x$2(Je,Ke),o.targetGeometry.latitude),o.rotation=me(a.heading),o.camera=a,o}async function Se(e,t,n,r,a,i){if(t$6(n))throw new s$8("createfromcenter","invalid point");i.targetGeometry=n.clone();const c=g$1(e);if(t.position)return ze(e,i.targetGeometry,t,c,r,i);if(t.zoomFactor){const r=c.distance/t.zoomFactor,a=q$2(Te,c.viewForward,-r);c.eye=u$5(Te,c.center,a),i.scale=ee(e,r,n.latitude);}$(e,c,r);const l=xe(r,t)?Y.LOCKED:Y.ADJUST;if(!t.zoomFactor){i.scale=ye(e,t),null==i.scale&&(Hn(n,Te,e.renderSpatialReference),U$4(c.frustum,Te)?i.scale=ee(e,x$2(c.eye,Te),n.latitude):i.scale=we$1(e,c));const o=new Se$1(a);te(e,i.targetGeometry,i.scale,r,l,o),i.camera=await o.resolver.promise;}return i}function Be(e,t,n,r){const a=g$1(e);return r$3(Ie,a.viewForward),re(e,a.eye,Ie,a.up,Le),n.position=new j$2(t.position),n.heading=null!=t.heading?t.heading:Le.heading,n.tilt=null!=t.tilt?t.tilt:Le.tilt,we(e,null,n,r)}async function ke(e,t,n,r,a){const o=g$1(e);return Se(e,t,In(o.center,e.renderSpatialReference,e.spatialReference),n,r,a)}async function Me(e,t,n,r,a,o){o.targetGeometry=n.clone();const i=g$1(e);$(e,i,r);const s=xe(r,t)?Y.LOCKED:Y.ADJUST,c=new Se$1(a);return fe$1(e,n,r.heading,r.tilt,s,c),o.camera=await c.resolver.promise,o}function Ze(e,t,n,r,a){let o=0;n.hasZ?o=n.z:e.basemapTerrain&&(o=e$3(i(e.elevationProvider,n))),o$2(Te,n.x,n.y,o),qn(e.spatialReference,Te,Ue,e.renderSpatialReference),a$6(Oe,Ue),o$6(Oe,Oe),B$2(Ce);const i$1=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];for(let l=0;l<i$1.length;l++){const t=i$1[l];let n=r[t[2]];isFinite(n)||(n=o),o$2(Te,r[t[0]],r[t[1]],n),Bn(Te,e.spatialReference,Te,e.renderSpatialReference),h$5(Ce,O$2(Te,Te,Oe));}const s=I$3(Ce),c=N$2(Ce),m=y$5(Ce),p=1/Math.tan(t.fovX/2),g=1/Math.tan(t.fovY/2),h=.5*Math.sqrt(s*s+m*m)*Math.max(g,p)+.5*c,y=.5*c*g+.5*Math.max(s,m);return Math.max(h,y)/a}async function Ae(e,t,n,r,a,o,i,s){s.targetGeometry=n.clone();const c=g$1(e),l=Ze(e,c,n,r,a);$(e,c,o);const m=xe(o,t)?Y.LOCKED:Y.ADJUST;s.scale=ee(e,l,s.targetGeometry.latitude);const u=new Se$1(i);return te(e,s.targetGeometry,s.scale,o,m,u),s.camera=await u.resolver.promise,s}function Fe(e,t){if(!t||!e.spatialReference)return null;const n={target:null};if("declaredClass"in t||Array.isArray(t))n.target=t;else {for(const e in t)n[e]=t[e];t.center&&!n.target&&(n.target=t.center);}return n}function Ee(e){return e&&r$5(e.camera)&&(e.rotation=me(e.camera.heading)),e}function De(e,t){const n=ce;if(!t.length)return n;let r=Number.NEGATIVE_INFINITY;for(let a=0;a<t.length;a++){const e=t[a].screenSpaceBoundingRect;r=Math.max(r,Math.abs(e[0]),Math.abs(e[1]),Math.abs(e[2]),Math.abs(e[3]));}return n-r/Math.min(e.width,e.height)*2}const Te=n$6(),Ue=e$2(),Oe=e$4(),Ce=a$7(),Pe=u$9(),Ie=n$6(),Je=n$6(),Ke=n$6(),Le={heading:0,tilt:0},Ne=new j$2,Ve={point(e,t,n){n[0]=e.x,n[1]=e.y,e.hasZ&&(n[2]=e.z),t(n);},polygon(e,t,n){const r=e.hasZ;for(let a=0;a<e.rings.length;a++){const o=e.rings[a];for(let e=0;e<o.length;e++)n[0]=o[e][0],n[1]=o[e][1],r&&(n[2]=o[e][2]),t(n);}},polyline(e,t,n){const r=e.hasZ;for(let a=0;a<e.paths.length;a++){const o=e.paths[a];for(let e=0;e<o.length;e++)n[0]=o[e][0],n[1]=o[e][1],r&&(n[2]=o[e][2]),t(n);}},multipoint(e,t,n){const r=e.points,a=e.hasZ;for(let o=0;o<r.length;o++)n[0]=r[o][0],n[1]=r[o][1],a&&(n[2]=r[o][2]),t(n);},extent(e,t,n){e.hasZ?(t(o$2(n,e.xmin,e.ymin,e.zmin)),t(o$2(n,e.xmax,e.ymin,e.zmin)),t(o$2(n,e.xmin,e.ymax,e.zmin)),t(o$2(n,e.xmax,e.ymax,e.zmin)),t(o$2(n,e.xmin,e.ymin,e.zmax)),t(o$2(n,e.xmax,e.ymin,e.zmax)),t(o$2(n,e.xmin,e.ymax,e.zmax)),t(o$2(n,e.xmax,e.ymax,e.zmax))):(t(o$2(n,e.xmin,e.ymin,n[2])),t(o$2(n,e.xmax,e.ymin,n[2])),t(o$2(n,e.xmin,e.ymax,n[2])),t(o$2(n,e.xmax,e.ymax,n[2])));},mesh(e,t,n){const r=e.vertexAttributes&&e.vertexAttributes.position;if(r)for(let a=0;a<r.length;a+=3)t(o$2(n,r[a+0],r[a+1],r[a+2]));}};

export { $, ge as A, B, xe$1 as C, D, g$1 as E, fe$1 as F, G$1 as G, ce$1 as H, je$1 as I, A$1 as J, c$1 as K, s$1 as L, re as M, fs as N, i$2 as O, u$2 as P, z$1 as Q, ps as R, $$1 as S, ms as T, U$1 as U, Vs as V, H$3 as W, X$1 as X, Y, Z, _, i$7 as a, Q$1 as a0, es as a1, a$3 as b, pe as c, a$4 as d, n$1 as e, m$2 as f, cs as g, h$2 as h, i$5 as i, a as j, i as k, ls as l, m, n$4 as n, t as o, p$1 as p, i$3 as q, r, t$2 as s, t$1 as t, p as u, he as v, ue$1 as w, x$1 as x, y$2 as y, ee as z };
